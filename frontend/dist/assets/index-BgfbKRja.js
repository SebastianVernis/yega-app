var Ua=t=>{throw TypeError(t)};var Lr=(t,s,r)=>s.has(t)||Ua("Cannot "+r);var f=(t,s,r)=>(Lr(t,s,"read from private field"),r?r.call(t):s.get(t)),T=(t,s,r)=>s.has(t)?Ua("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,r),A=(t,s,r,a)=>(Lr(t,s,"write to private field"),a?a.call(t,r):s.set(t,r),r),q=(t,s,r)=>(Lr(t,s,"access private method"),r);var Js=(t,s,r,a)=>({set _(n){A(t,s,n,r)},get _(){return f(t,s,a)}});import{j as e,S as Wn,P as Qs,c as Yn,u as Co,a as So,b as Xn,R as ko,d as Ca,I as Eo,e as Kr,f as Po,g as Ro,h as Io}from"./vendor-ui-emVCc9Cn.js";import{b as Ao,r as g,R as V,d as _o,e as Mo,u as Ks,L as Pt,f as De,h as To,B as Oo,i as Lo,j as Q,N as tt}from"./vendor-react-hliwL07M.js";import{a as zo}from"./vendor-utils-NIGUFBhG.js";import{p as Fo,N as er,C as ie,a as Qt,b as Kt,B as de,R as ee,c as _,S as ke,d as I,A as ne,F as S,e as M,P as $o,L as Qa,I as Ka,M as Ps,T as Sa}from"./vendor-bootstrap-D5JJ41Dc.js";import{m as we,b as Te,c as Ae,d as Fe,i as Wr,l as Wa,e as Do,f as Zn,g as Bo,h as $t,s as Yr,j as qo,k as Go,n as Vo,o as Ho,A as Uo,p as Qo,t as Ko,q as Wo,r as tr,u as Yo,v as Xo,w as sr,x as Zo,y as Jo,H as ec}from"./vendor-heroui-SKEKtsT5.js";import{L as Rt,M as ka,T as Ea,a as es,P as zr,b as Os,c as Ls,u as Jn,C as Ya}from"./vendor-leaflet-DbTWcsOe.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Xr={},Xa=Ao;Xr.createRoot=Xa.createRoot,Xr.hydrateRoot=Xa.hydrateRoot;const tc="https://yega.com.mx/api",ei=tc;console.log("API client initialized with base URL:",ei);const O=zo.create({baseURL:ei,timeout:1e4,headers:{"Content-Type":"application/json"}});O.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));O.interceptors.response.use(t=>t,t=>{if(t.response?.status===401){localStorage.removeItem("token");const r=window.location?.pathname||"",a=["/login","/register","/verify-otp"],n=t.config?.url||"",i=n.includes("/otp/")||n.includes("/auth/verify-otp")||n.includes("/auth/resend-otp");if(!a.includes(r)&&!i)try{window.location.assign("/login")}catch{}}return t.response||console.error("Error de red:",t.message),Promise.reject(t)});const Y={setAuthToken:t=>{t?O.defaults.headers.common.Authorization=`Bearer ${t}`:delete O.defaults.headers.common.Authorization},get:(t,s={})=>O.get(t,s),post:(t,s={},r={})=>O.post(t,s,r),put:(t,s={},r={})=>O.put(t,s,r),patch:(t,s={},r={})=>O.patch(t,s,r),delete:(t,s={})=>O.delete(t,s),auth:{login:(t,s)=>O.post("/auth/login",{email:t,password:s}),register:t=>O.post("/auth/register",t),verifyOTP:(t,s)=>O.post("/auth/verify-otp",{email:t,otp:s}),resendOTP:t=>O.post("/auth/resend-otp",{email:t}),getProfile:()=>O.get("/auth/profile"),updateProfile:t=>O.put("/auth/profile",t)},products:{getAll:(t={})=>O.get("/products",{params:t}).catch(s=>(console.error("Error fetching products:",s),Promise.resolve({data:{success:!0,productos:[],total:0}}))),getById:t=>O.get(`/products/${t}`).catch(s=>{throw console.error("Error fetching product by ID:",s),s}),create:t=>O.post("/products",t).catch(s=>{throw console.error("Error creating product:",s),s}),update:(t,s)=>O.put(`/products/${t}`,s).catch(r=>{throw console.error("Error updating product:",r),console.debug("Product update failed. ID:",t,"Data:",s),r}),delete:t=>O.delete(`/products/${t}`).catch(s=>{throw console.error("Error deleting product:",s),console.debug("Product deletion failed. ID:",t),s}),updateStock:(t,s)=>O.patch(`/products/${t}/stock`,s).catch(r=>{throw console.error("Error updating stock:",r),r}),toggleAvailability:(t,s)=>O.patch(`/products/${t}`,{disponible:s}).catch(r=>{throw console.error("Error toggling availability:",r),r}),getCategories:()=>O.get("/products/categories").catch(t=>(console.error("Error fetching categories:",t),Promise.resolve({data:{success:!0,categorias:["comida","bebida","postre","snack","otro"]}})))},orders:{getAll:(t={})=>O.get("/orders",{params:t}),getById:t=>O.get(`/orders/${t}`),create:t=>O.post("/orders",t),updateStatus:(t,s)=>O.put(`/orders/${t}/status`,{estado:s}),assignDelivery:(t,s)=>O.put(`/orders/${t}/assign-delivery`,{repartidorId:s}),rate:(t,s)=>O.put(`/orders/${t}/rate`,s),getAvailable:(t={})=>O.get("/orders/available",{params:t}),claim:t=>O.put(`/orders/${t}/claim`)},location:{update:t=>O.put("/location/update",t),getNearbyDelivery:t=>O.get("/location/nearby-delivery",{params:t}),getNearbyStores:t=>O.get("/location/nearby-stores",{params:t})},documents:{upload:(t,s)=>{const r=new FormData;return r.append("file",s),O.post(`/documents/${t}`,r,{headers:{"Content-Type":"multipart/form-data"}})}},uploadFile:(t,s=null)=>{const r=new FormData;return r.append("file",t),O.post("/upload",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:s})}};function ti(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(r=ti(t[s]))&&(a&&(a+=" "),a+=r);else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function Nt(){for(var t,s,r=0,a="";r<arguments.length;)(t=arguments[r++])&&(s=ti(t))&&(a&&(a+=" "),a+=s);return a}const zs=t=>typeof t=="number"&&!isNaN(t),Gt=t=>typeof t=="string",Ce=t=>typeof t=="function",lr=t=>Gt(t)||Ce(t)?t:null,Fr=t=>g.isValidElement(t)||Gt(t)||Ce(t)||zs(t);function sc(t,s,r){r===void 0&&(r=300);const{scrollHeight:a,style:n}=t;requestAnimationFrame(()=>{n.minHeight="initial",n.height=a+"px",n.transition=`all ${r}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(s,r)})})}function Cr(t){let{enter:s,exit:r,appendPosition:a=!1,collapse:n=!0,collapseDuration:i=300}=t;return function(o){let{children:c,position:d,preventExitTransition:m,done:x,nodeRef:p,isIn:y}=o;const l=a?`${s}--${d}`:s,b=a?`${r}--${d}`:r,u=g.useRef(0);return g.useLayoutEffect(()=>{const h=p.current,v=l.split(" "),N=j=>{j.target===p.current&&(h.dispatchEvent(new Event("d")),h.removeEventListener("animationend",N),h.removeEventListener("animationcancel",N),u.current===0&&j.type!=="animationcancel"&&h.classList.remove(...v))};h.classList.add(...v),h.addEventListener("animationend",N),h.addEventListener("animationcancel",N)},[]),g.useEffect(()=>{const h=p.current,v=()=>{h.removeEventListener("animationend",v),n?sc(h,x,i):x()};y||(m?v():(u.current=1,h.className+=` ${b}`,h.addEventListener("animationend",v)))},[y]),V.createElement(V.Fragment,null,c)}}function Za(t,s){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:s}:{}}const _e={list:new Map,emitQueue:new Map,on(t,s){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(s),this},off(t,s){if(s){const r=this.list.get(t).filter(a=>a!==s);return this.list.set(t,r),this}return this.list.delete(t),this},cancelEmit(t){const s=this.emitQueue.get(t);return s&&(s.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(s=>{const r=setTimeout(()=>{s(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(r)})}},rr=t=>{let{theme:s,type:r,...a}=t;return V.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${r})`,...a})},$r={info:function(t){return V.createElement(rr,{...t},V.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return V.createElement(rr,{...t},V.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return V.createElement(rr,{...t},V.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return V.createElement(rr,{...t},V.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return V.createElement("div",{className:"Toastify__spinner"})}};function rc(t){const[,s]=g.useReducer(l=>l+1,0),[r,a]=g.useState([]),n=g.useRef(null),i=g.useRef(new Map).current,o=l=>r.indexOf(l)!==-1,c=g.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:l=>i.get(l)}).current;function d(l){let{containerId:b}=l;const{limit:u}=c.props;!u||b&&c.containerId!==b||(c.count-=c.queue.length,c.queue=[])}function m(l){a(b=>l==null?[]:b.filter(u=>u!==l))}function x(){const{toastContent:l,toastProps:b,staleId:u}=c.queue.shift();y(l,b,u)}function p(l,b){let{delay:u,staleId:h,...v}=b;if(!Fr(l)||function(R){return!n.current||c.props.enableMultiContainer&&R.containerId!==c.props.containerId||i.has(R.toastId)&&R.updateId==null}(v))return;const{toastId:N,updateId:j,data:C}=v,{props:k}=c,P=()=>m(N),w=j==null;w&&c.count++;const E={...k,style:k.toastStyle,key:c.toastKey++,...Object.fromEntries(Object.entries(v).filter(R=>{let[H,U]=R;return U!=null})),toastId:N,updateId:j,data:C,closeToast:P,isIn:!1,className:lr(v.className||k.toastClassName),bodyClassName:lr(v.bodyClassName||k.bodyClassName),progressClassName:lr(v.progressClassName||k.progressClassName),autoClose:!v.isLoading&&(z=v.autoClose,se=k.autoClose,z===!1||zs(z)&&z>0?z:se),deleteToast(){const R=Za(i.get(N),"removed");i.delete(N),_e.emit(4,R);const H=c.queue.length;if(c.count=N==null?c.count-c.displayedToast:c.count-1,c.count<0&&(c.count=0),H>0){const U=N==null?c.props.limit:1;if(H===1||U===1)c.displayedToast++,x();else{const L=U>H?H:U;c.displayedToast=L;for(let $=0;$<L;$++)x()}}else s()}};var z,se;E.iconOut=function(R){let{theme:H,type:U,isLoading:L,icon:$}=R,D=null;const me={theme:H,type:U};return $===!1||(Ce($)?D=$(me):g.isValidElement($)?D=g.cloneElement($,me):Gt($)||zs($)?D=$:L?D=$r.spinner():(oe=>oe in $r)(U)&&(D=$r[U](me))),D}(E),Ce(v.onOpen)&&(E.onOpen=v.onOpen),Ce(v.onClose)&&(E.onClose=v.onClose),E.closeButton=k.closeButton,v.closeButton===!1||Fr(v.closeButton)?E.closeButton=v.closeButton:v.closeButton===!0&&(E.closeButton=!Fr(k.closeButton)||k.closeButton);let X=l;g.isValidElement(l)&&!Gt(l.type)?X=g.cloneElement(l,{closeToast:P,toastProps:E,data:C}):Ce(l)&&(X=l({closeToast:P,toastProps:E,data:C})),k.limit&&k.limit>0&&c.count>k.limit&&w?c.queue.push({toastContent:X,toastProps:E,staleId:h}):zs(u)?setTimeout(()=>{y(X,E,h)},u):y(X,E,h)}function y(l,b,u){const{toastId:h}=b;u&&i.delete(u);const v={content:l,props:b};i.set(h,v),a(N=>[...N,h].filter(j=>j!==u)),_e.emit(4,Za(v,v.props.updateId==null?"added":"updated"))}return g.useEffect(()=>(c.containerId=t.containerId,_e.cancelEmit(3).on(0,p).on(1,l=>n.current&&m(l)).on(5,d).emit(2,c),()=>{i.clear(),_e.emit(3,c)}),[]),g.useEffect(()=>{c.props=t,c.isToastActive=o,c.displayedToast=r.length}),{getToastToRender:function(l){const b=new Map,u=Array.from(i.values());return t.newestOnTop&&u.reverse(),u.forEach(h=>{const{position:v}=h.props;b.has(v)||b.set(v,[]),b.get(v).push(h)}),Array.from(b,h=>l(h[0],h[1]))},containerRef:n,isToastActive:o}}function Ja(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function en(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function ac(t){const[s,r]=g.useState(!1),[a,n]=g.useState(!1),i=g.useRef(null),o=g.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,c=g.useRef(t),{autoClose:d,pauseOnHover:m,closeToast:x,onClick:p,closeOnClick:y}=t;function l(C){if(t.draggable){C.nativeEvent.type==="touchstart"&&C.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",N),document.addEventListener("touchmove",v),document.addEventListener("touchend",N);const k=i.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=k.getBoundingClientRect(),k.style.transition="",o.x=Ja(C.nativeEvent),o.y=en(C.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=k.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=k.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function b(C){if(o.boundingRect){const{top:k,bottom:P,left:w,right:E}=o.boundingRect;C.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=w&&o.x<=E&&o.y>=k&&o.y<=P?h():u()}}function u(){r(!0)}function h(){r(!1)}function v(C){const k=i.current;o.canDrag&&k&&(o.didMove=!0,s&&h(),o.x=Ja(C),o.y=en(C),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),k.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,k.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function N(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",N),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",N);const C=i.current;if(o.canDrag&&o.didMove&&C){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return n(!0),void t.closeToast();C.style.transition="transform 0.2s, opacity 0.2s",C.style.transform=`translate${t.draggableDirection}(0)`,C.style.opacity="1"}}g.useEffect(()=>{c.current=t}),g.useEffect(()=>(i.current&&i.current.addEventListener("d",u,{once:!0}),Ce(t.onOpen)&&t.onOpen(g.isValidElement(t.children)&&t.children.props),()=>{const C=c.current;Ce(C.onClose)&&C.onClose(g.isValidElement(C.children)&&C.children.props)}),[]),g.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||h(),window.addEventListener("focus",u),window.addEventListener("blur",h)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",u),window.removeEventListener("blur",h))}),[t.pauseOnFocusLoss]);const j={onMouseDown:l,onTouchStart:l,onMouseUp:b,onTouchEnd:b};return d&&m&&(j.onMouseEnter=h,j.onMouseLeave=u),y&&(j.onClick=C=>{p&&p(C),o.canCloseOnClick&&x()}),{playToast:u,pauseToast:h,isRunning:s,preventExitTransition:a,toastRef:i,eventHandlers:j}}function si(t){let{closeToast:s,theme:r,ariaLabel:a="close"}=t;return V.createElement("button",{className:`Toastify__close-button Toastify__close-button--${r}`,type:"button",onClick:n=>{n.stopPropagation(),s(n)},"aria-label":a},V.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},V.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function nc(t){let{delay:s,isRunning:r,closeToast:a,type:n="default",hide:i,className:o,style:c,controlledProgress:d,progress:m,rtl:x,isIn:p,theme:y}=t;const l=i||d&&m===0,b={...c,animationDuration:`${s}ms`,animationPlayState:r?"running":"paused",opacity:l?0:1};d&&(b.transform=`scaleX(${m})`);const u=Nt("Toastify__progress-bar",d?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":x}),h=Ce(o)?o({rtl:x,type:n,defaultClassName:u}):Nt(u,o);return V.createElement("div",{role:"progressbar","aria-hidden":l?"true":"false","aria-label":"notification timer",className:h,style:b,[d&&m>=1?"onTransitionEnd":"onAnimationEnd"]:d&&m<1?null:()=>{p&&a()}})}const ic=t=>{const{isRunning:s,preventExitTransition:r,toastRef:a,eventHandlers:n}=ac(t),{closeButton:i,children:o,autoClose:c,onClick:d,type:m,hideProgressBar:x,closeToast:p,transition:y,position:l,className:b,style:u,bodyClassName:h,bodyStyle:v,progressClassName:N,progressStyle:j,updateId:C,role:k,progress:P,rtl:w,toastId:E,deleteToast:z,isIn:se,isLoading:X,iconOut:R,closeOnClick:H,theme:U}=t,L=Nt("Toastify__toast",`Toastify__toast-theme--${U}`,`Toastify__toast--${m}`,{"Toastify__toast--rtl":w},{"Toastify__toast--close-on-click":H}),$=Ce(b)?b({rtl:w,position:l,type:m,defaultClassName:L}):Nt(L,b),D=!!P||!c,me={closeToast:p,type:m,theme:U};let oe=null;return i===!1||(oe=Ce(i)?i(me):g.isValidElement(i)?g.cloneElement(i,me):si(me)),V.createElement(y,{isIn:se,done:z,position:l,preventExitTransition:r,nodeRef:a},V.createElement("div",{id:E,onClick:d,className:$,...n,style:u,ref:a},V.createElement("div",{...se&&{role:k},className:Ce(h)?h({type:m}):Nt("Toastify__toast-body",h),style:v},R!=null&&V.createElement("div",{className:Nt("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!X})},R),V.createElement("div",null,o)),oe,V.createElement(nc,{...C&&!D?{key:`pb-${C}`}:{},rtl:w,theme:U,delay:c,isRunning:s,isIn:se,closeToast:p,hide:x,type:m,style:j,className:N,controlledProgress:D,progress:P||0})))},Sr=function(t,s){return s===void 0&&(s=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:s}},oc=Cr(Sr("bounce",!0));Cr(Sr("slide",!0));Cr(Sr("zoom"));Cr(Sr("flip"));const Zr=g.forwardRef((t,s)=>{const{getToastToRender:r,containerRef:a,isToastActive:n}=rc(t),{className:i,style:o,rtl:c,containerId:d}=t;function m(x){const p=Nt("Toastify__toast-container",`Toastify__toast-container--${x}`,{"Toastify__toast-container--rtl":c});return Ce(i)?i({position:x,rtl:c,defaultClassName:p}):Nt(p,lr(i))}return g.useEffect(()=>{s&&(s.current=a.current)},[]),V.createElement("div",{ref:a,className:"Toastify",id:d},r((x,p)=>{const y=p.length?{...o}:{...o,pointerEvents:"none"};return V.createElement("div",{className:m(x),style:y,key:`container-${x}`},p.map((l,b)=>{let{content:u,props:h}=l;return V.createElement(ic,{...h,isIn:n(h.toastId),style:{...h.style,"--nth":b+1,"--len":p.length},key:`toast-${h.key}`},u)}))}))});Zr.displayName="ToastContainer",Zr.defaultProps={position:"top-right",transition:oc,autoClose:5e3,closeButton:si,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Dr,Et=new Map,As=[],cc=1;function ri(){return""+cc++}function lc(t){return t&&(Gt(t.toastId)||zs(t.toastId))?t.toastId:ri()}function Fs(t,s){return Et.size>0?_e.emit(0,t,s):As.push({content:t,options:s}),s.toastId}function xr(t,s){return{...s,type:s&&s.type||t,toastId:lc(s)}}function ar(t){return(s,r)=>Fs(s,xr(t,r))}function F(t,s){return Fs(t,xr("default",s))}F.loading=(t,s)=>Fs(t,xr("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s})),F.promise=function(t,s,r){let a,{pending:n,error:i,success:o}=s;n&&(a=Gt(n)?F.loading(n,r):F.loading(n.render,{...r,...n}));const c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(x,p,y)=>{if(p==null)return void F.dismiss(a);const l={type:x,...c,...r,data:y},b=Gt(p)?{render:p}:p;return a?F.update(a,{...l,...b}):F(b.render,{...l,...b}),y},m=Ce(t)?t():t;return m.then(x=>d("success",o,x)).catch(x=>d("error",i,x)),m},F.success=ar("success"),F.info=ar("info"),F.error=ar("error"),F.warning=ar("warning"),F.warn=F.warning,F.dark=(t,s)=>Fs(t,xr("default",{theme:"dark",...s})),F.dismiss=t=>{Et.size>0?_e.emit(1,t):As=As.filter(s=>t!=null&&s.options.toastId!==t)},F.clearWaitingQueue=function(t){return t===void 0&&(t={}),_e.emit(5,t)},F.isActive=t=>{let s=!1;return Et.forEach(r=>{r.isToastActive&&r.isToastActive(t)&&(s=!0)}),s},F.update=function(t,s){s===void 0&&(s={}),setTimeout(()=>{const r=function(a,n){let{containerId:i}=n;const o=Et.get(i||Dr);return o&&o.getToast(a)}(t,s);if(r){const{props:a,content:n}=r,i={delay:100,...a,...s,toastId:s.toastId||t,updateId:ri()};i.toastId!==t&&(i.staleId=t);const o=i.render||n;delete i.render,Fs(o,i)}},0)},F.done=t=>{F.update(t,{progress:1})},F.onChange=t=>(_e.on(4,t),()=>{_e.off(4,t)}),F.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},F.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},_e.on(2,t=>{Dr=t.containerId||t,Et.set(Dr,t),As.forEach(s=>{_e.emit(0,s.content,s.options)}),As=[]}).on(3,t=>{Et.delete(t.containerId||t),Et.size===0&&_e.off(0).off(1).off(5)});const ai=g.createContext(),ue=()=>{const t=g.useContext(ai);if(!t)throw new Error("useAuth debe ser usado dentro de AuthProvider");return t},dc=({children:t})=>{const[s,r]=g.useState(null),[a,n]=g.useState(!0),[i,o]=g.useState(localStorage.getItem("token")),[c,d]=g.useState(null),m=()=>{localStorage.removeItem("token"),o(null),r(null),d(null),Y.setAuthToken(null),F.info("Sesión cerrada")},x=async()=>{try{const j=await Y.get("/auth/profile");r(j.data.usuario),h()}catch(j){console.error("--- ¡FALLO AL CARGAR PERFIL DE USUARIO! ---"),console.error("Este es el error que causa el cierre de sesión."),j.response?(console.error("Datos de la respuesta:",j.response.data),console.error("Estado de la respuesta:",j.response.status),console.error("Cabeceras de la respuesta:",j.response.headers)):j.request?console.error("La solicitud fue enviada pero no se recibió respuesta:",j.request):console.error("Error al configurar la solicitud:",j.message),console.error("Objeto de error completo:",j),console.error("--- FIN DEL REPORTE DE ERROR ---"),m()}finally{n(!1)}};g.useEffect(()=>{i?(Y.setAuthToken(i),x()):n(!1)},[i]);const p=async(j,C)=>{try{n(!0);const k=await Y.post("/auth/login",{email:j,password:C}),{token:P,usuario:w}=k.data;return localStorage.setItem("token",P),o(P),r(w),Y.setAuthToken(P),F.success("Inicio de sesión exitoso"),h(),{success:!0,user:w}}catch(k){const P=k.response?.status,w=k.response?.data||{},E=w.message||"Error al iniciar sesión";return F.error(E),P===403&&(w.requires_otp||w.requiresOTP)?{success:!1,error:E,requiresOTP:!0,email:w.email||j,telefono:w.telefono}:{success:!1,error:E}}finally{n(!1)}},y=async j=>{try{n(!0);const C=await Y.post("/auth/register",j),{token:k,usuario:P,requiere_otp:w}=C.data;return w?(F.info("Se ha enviado un código de verificación a tu teléfono"),{success:!0,requiresOTP:!0,email:j.email}):(localStorage.setItem("token",k),o(k),r(P),Y.setAuthToken(k),F.success("Registro exitoso"),h(),{success:!0,user:P})}catch(C){const k=C.response?.data?.message||"Error al registrarse";return F.error(k),{success:!1,error:k}}finally{n(!1)}},l=async(j,C,k=void 0)=>{try{n(!0);const P=await Y.post("/auth/verify-otp",{email:j,otp:C,telefono:k});if(P.data?.token&&P.data?.usuario){const w=P.data.token,E=P.data.usuario;localStorage.setItem("token",w),o(w),r(E),Y.setAuthToken(w)}return F.success("Cuenta verificada exitosamente"),h(),{success:!0,user:P.data?.usuario}}catch(P){const w=P.response?.data?.message||"Error verificando código";return F.error(w),{success:!1,error:w}}finally{n(!1)}},b=async j=>{try{return await Y.post("/auth/resend-otp",{email:j}),F.success("Nuevo código enviado"),{success:!0}}catch(C){const k=C.response?.data?.message||"Error reenviando código";return F.error(k),{success:!1,error:k}}},u=async j=>{try{const C=await Y.put("/auth/profile",j);return r(C.data.usuario),F.success("Perfil actualizado exitosamente"),{success:!0,user:C.data.usuario}}catch(C){const k=C.response?.data?.message||"Error actualizando perfil";return F.error(k),{success:!1,error:k}}},h=()=>{if(!("geolocation"in navigator)){d("not_supported");return}navigator.permissions&&navigator.permissions.query?navigator.permissions.query({name:"geolocation"}).then(j=>{j.state==="granted"?d("granted"):j.state==="denied"?d("denied"):navigator.geolocation.getCurrentPosition(()=>d("granted"),()=>d("denied"),{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})}).catch(()=>{navigator.geolocation.getCurrentPosition(()=>d("granted"),()=>d("denied"),{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})}):navigator.geolocation.getCurrentPosition(()=>d("granted"),()=>d("denied"),{enableHighAccuracy:!1,timeout:1e4,maximumAge:6e4})},N={user:s,loading:a,locationPermission:c,login:p,register:y,verifyOTP:l,resendOTP:b,logout:m,updateProfile:u,updateLocation:async j=>{try{const C=await Y.put("/location/update",j);return r(k=>({...k,ubicacion:C.data.ubicacion})),{success:!0,ubicacion:C.data.ubicacion}}catch(C){const k=C.response?.data?.message||"Error actualizando ubicación";return F.error(k),{success:!1,error:k}}},requestLocationPermission:h,isAuthenticated:!!s,isClient:s?.rol==="cliente",isStore:s?.rol==="tienda",isDelivery:s?.rol==="repartidor",isAdmin:s?.rol==="administrador"};return e.jsx(ai.Provider,{value:N,children:t})};var ve={},ni={};const uc=_o(Mo);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(g),r=i(Fo),a=uc,n=["children","onClick","replace","to","state","activeClassName","className","activeStyle","style","isActive"];function i(u){return u&&u.__esModule?u:{default:u}}function o(u,h){var v=Object.keys(u);if(Object.getOwnPropertySymbols){var N=Object.getOwnPropertySymbols(u);h&&(N=N.filter(function(j){return Object.getOwnPropertyDescriptor(u,j).enumerable})),v.push.apply(v,N)}return v}function c(u){for(var h=1;h<arguments.length;h++){var v=arguments[h]!=null?arguments[h]:{};h%2?o(Object(v),!0).forEach(function(N){d(u,N,v[N])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(v)):o(Object(v)).forEach(function(N){Object.defineProperty(u,N,Object.getOwnPropertyDescriptor(v,N))})}return u}function d(u,h,v){return h in u?Object.defineProperty(u,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):u[h]=v,u}function m(u){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},m(u)}function x(u,h){if(u==null)return{};var v=p(u,h),N,j;if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(u);for(j=0;j<C.length;j++)N=C[j],!(h.indexOf(N)>=0)&&Object.prototype.propertyIsEnumerable.call(u,N)&&(v[N]=u[N])}return v}function p(u,h){if(u==null)return{};var v={},N=Object.keys(u),j,C;for(C=0;C<N.length;C++)j=N[C],!(h.indexOf(j)>=0)&&(v[j]=u[j]);return v}var y=function(h){return!!(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)},l=function(h){var v=h.children,N=h.onClick,j=h.replace,C=j===void 0?!1:j,k=h.to,P=h.state,w=h.activeClassName,E=w===void 0?"active":w,z=h.className,se=h.activeStyle,X=h.style,R=h.isActive,H=x(h,n),U=m(k)==="object"?k.pathname||"":k,L=(0,a.useNavigate)(),$=(0,a.useHref)(typeof k=="string"?{pathname:k}:k),D=(0,a.useMatch)(U),me=(0,a.useLocation)(),oe=s.default.Children.only(v),qe=!!(R?typeof R=="function"?R(D,me):R:D),ge=function(Xe){v.props.onClick&&v.props.onClick(Xe),N&&N(Xe),!Xe.defaultPrevented&&Xe.button===0&&!y(Xe)&&(Xe.preventDefault(),L(k,{replace:C,state:P}))};return s.default.cloneElement(oe,c(c({},H),{},{className:[z,oe.props.className,qe?E:null].join(" ").trim(),style:qe?c(c({},X),se):X,href:$,onClick:ge}))};l.propTypes={children:r.default.element.isRequired,onClick:r.default.func,replace:r.default.bool,to:r.default.oneOfType([r.default.string,r.default.object]).isRequired,state:r.default.object,className:r.default.string,activeClassName:r.default.string,style:r.default.objectOf(r.default.oneOfType([r.default.string,r.default.number])),activeStyle:r.default.objectOf(r.default.oneOfType([r.default.string,r.default.number])),isActive:r.default.oneOfType([r.default.func,r.default.bool])};var b=l;t.default=b})(ni);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LinkContainer",{enumerable:!0,get:function(){return s.default}});var s=r(ni);function r(a){return a&&a.__esModule?a:{default:a}}})(ve);var ii={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tn=V.createContext&&V.createContext(ii),wt=function(){return wt=Object.assign||function(t){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},wt.apply(this,arguments)},hc=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(r[a[n]]=t[a[n]]);return r};function oi(t){return t&&t.map(function(s,r){return V.createElement(s.tag,wt({key:r},s.attr),oi(s.child))})}function W(t){return function(s){return V.createElement(mc,wt({attr:wt({},t.attr)},s),oi(t.child))}}function mc(t){var s=function(r){var a=t.attr,n=t.size,i=t.title,o=hc(t,["attr","size","title"]),c=n||r.size||"1em",d;return r.className&&(d=r.className),t.className&&(d=(d?d+" ":"")+t.className),V.createElement("svg",wt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:d,style:wt(wt({color:t.color||r.color},r.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&V.createElement("title",null,i),t.children)};return tn!==void 0?V.createElement(tn.Consumer,null,function(r){return s(r)}):s(ii)}function pc(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"}}]})(t)}function fc(t){return W({attr:{viewBox:"0 0 488 512"},child:[{tag:"path",attr:{d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"}}]})(t)}function gc(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"}}]})(t)}function sn(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}}]})(t)}function ci(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(t)}function rn(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(t)}function an(t){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"}}]})(t)}function xc(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(t)}function nn(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function bc(t){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(t)}function Pa(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(t)}function yc(t){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function li(t){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(t)}function di(t){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(t)}function vc(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"}}]})(t)}function nr(t){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(t)}function jc(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}}]})(t)}function Jr(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M444.52 3.52L28.74 195.42c-47.97 22.39-31.98 92.75 19.19 92.75h175.91v175.91c0 51.17 70.36 67.17 92.75 19.19l191.9-415.78c15.99-38.39-25.59-79.97-63.97-63.97z"}}]})(t)}function ui(t){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(t)}function Dt(t){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(t)}function Nc(t){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function hi(t){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.9 192c-14.9-.1-29.1 2.3-42.4 6.9L437.6 144H520c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24h-45.3c-6.8 0-13.3 2.9-17.8 7.9l-37.5 41.7-22.8-38C392.2 68.4 384.4 64 376 64h-80c-8.8 0-16 7.2-16 16v16c0 8.8 7.2 16 16 16h66.4l19.2 32H227.9c-17.7-23.1-44.9-40-99.9-40H72.5C59 104 47.7 115 48 128.5c.2 13 10.9 23.5 24 23.5h56c24.5 0 38.7 10.9 47.8 24.8l-11.3 20.5c-13-3.9-26.9-5.7-41.3-5.2C55.9 194.5 1.6 249.6 0 317c-1.6 72.1 56.3 131 128 131 59.6 0 109.7-40.8 124-96h84.2c13.7 0 24.6-11.4 24-25.1-2.1-47.1 17.5-93.7 56.2-125l12.5 20.8c-27.6 23.7-45.1 58.9-44.8 98.2.5 69.6 57.2 126.5 126.8 127.1 71.6.7 129.8-57.5 129.2-129.1-.7-69.6-57.6-126.4-127.2-126.9zM128 400c-44.1 0-80-35.9-80-80s35.9-80 80-80c4.2 0 8.4.3 12.5 1L99 316.4c-8.8 16 2.8 35.6 21 35.6h81.3c-12.4 28.2-40.6 48-73.3 48zm463.9-75.6c-2.2 40.6-35 73.4-75.5 75.5-46.1 2.5-84.4-34.3-84.4-79.9 0-21.4 8.4-40.8 22.1-55.1l49.4 82.4c4.5 7.6 14.4 10 22 5.5l13.7-8.2c7.6-4.5 10-14.4 5.5-22l-48.6-80.9c5.2-1.1 10.5-1.6 15.9-1.6 45.6-.1 82.3 38.2 79.9 84.3z"}}]})(t)}function mi(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(t)}function wc(t){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function pi(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function js(t){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(t)}function Cc(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(t)}function fi(t){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}}]})(t)}function $s(t){return W({attr:{viewBox:"0 0 616 512"},child:[{tag:"path",attr:{d:"M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"}}]})(t)}function Sc(t){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(t)}function kc(t){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(t)}function gi(t){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(t)}function We(t){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}function Ec(t){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(t)}const Pc=()=>{const{user:t,logout:s,isAuthenticated:r}=ue(),a=()=>{s()},n=o=>{switch(o){case"cliente":return e.jsx(js,{className:"me-1"});case"tienda":return e.jsx(nn,{className:"me-1"});case"repartidor":return e.jsx(gi,{className:"me-1"});case"administrador":return e.jsx(We,{className:"me-1"});default:return e.jsx(We,{className:"me-1"})}},i=o=>({cliente:"Cliente",tienda:"Tienda",repartidor:"Repartidor",administrador:"Administrador"})[o]||o;return e.jsx(er,{expand:"lg",className:"navbar-yega",variant:"dark",children:e.jsxs(ie,{children:[e.jsx(ve.LinkContainer,{to:"/",children:e.jsx(er.Brand,{children:e.jsx("img",{src:"/images/yega-light.svg",alt:"YEGA",height:"30",className:"d-inline-block align-top"})})}),e.jsx(er.Toggle,{"aria-controls":"basic-navbar-nav"}),e.jsxs(er.Collapse,{id:"basic-navbar-nav",children:[e.jsxs(Qt,{className:"me-auto",children:[!r&&e.jsx(e.Fragment,{children:e.jsx(ve.LinkContainer,{to:"/",children:e.jsx(Qt.Link,{children:"Inicio"})})}),r&&e.jsx(e.Fragment,{children:e.jsx(ve.LinkContainer,{to:"/dashboard",children:e.jsx(Qt.Link,{children:"Dashboard"})})})]}),e.jsx(Qt,{children:r?e.jsxs(Kt,{title:e.jsxs("span",{children:[n(t.rol),t.nombre,e.jsx(de,{bg:"secondary",className:"ms-2",children:i(t.rol)})]}),id:"user-dropdown",align:"end",children:[e.jsxs(Kt.Item,{children:[e.jsx(We,{className:"me-2"}),t.email]}),e.jsx(Kt.Divider,{}),e.jsx(ve.LinkContainer,{to:"/profile",children:e.jsxs(Kt.Item,{children:[e.jsx(nn,{className:"me-2"}),"Mi Perfil"]})}),e.jsx(Kt.Divider,{}),e.jsxs(Kt.Item,{onClick:a,children:[e.jsx(Cc,{className:"me-2"}),"Cerrar Sesión"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ve.LinkContainer,{to:"/login",children:e.jsx(Qt.Link,{children:"Iniciar Sesión"})}),e.jsx(ve.LinkContainer,{to:"/register",children:e.jsx(Qt.Link,{children:"Registrarse"})})]})})]})]})})},Rc=()=>{const t=Ks(),{user:s}=ue();if(!s)return null;const a=(()=>{const n=[];switch(s.rol){case"cliente":n.push({to:"/cliente/tiendas",icon:e.jsx($s,{}),label:"Tiendas"},{to:"/cliente/mycart",icon:e.jsx(js,{}),label:"Carrito"},{to:"/dashboard",icon:e.jsx(nr,{}),label:"Home",isHome:!0},{to:"/cliente/pedidos",icon:e.jsx(an,{}),label:"Pedidos"},{to:"/cliente/perfil",icon:e.jsx(We,{}),label:"Perfil"});break;case"tienda":n.push({to:"/tienda/productos",icon:e.jsx($s,{}),label:"Productos"},{to:"/tienda/pedidos",icon:e.jsx(an,{}),label:"Pedidos"},{to:"/dashboard",icon:e.jsx(nr,{}),label:"Home",isHome:!0},{to:"/tienda/estadisticas",icon:e.jsx(sn,{}),label:"Stats"},{to:"/tienda/perfil",icon:e.jsx(We,{}),label:"Perfil"});break;case"repartidor":n.push({to:"/repartidor/historial",icon:e.jsx(vc,{}),label:"Historial"},{to:"/dashboard",icon:e.jsx(nr,{}),label:"Home",isHome:!0},{to:"/repartidor/perfil",icon:e.jsx(We,{}),label:"Perfil"});break;case"administrador":n.push({to:"/admin/usuarios",icon:e.jsx(We,{}),label:"Usuarios"},{to:"/admin/tiendas",icon:e.jsx($s,{}),label:"Tiendas"},{to:"/dashboard",icon:e.jsx(nr,{}),label:"Home",isHome:!0},{to:"/admin/repartidores",icon:e.jsx(hi,{}),label:"Repartidores"},{to:"/admin/reportes",icon:e.jsx(sn,{}),label:"Reportes"});break;default:return null}return n})();return a?e.jsx("div",{className:"bottom-navbar fixed-bottom bg-dark",children:e.jsx("div",{className:"d-flex justify-content-around align-items-center py-2",children:a.map((n,i)=>e.jsxs(Pt,{to:n.to,className:`text-center nav-item ${t.pathname===n.to?"active":""} ${n.isHome?"home-button":""}`,children:[e.jsx("div",{className:`nav-icon ${n.isHome?"home-icon":""}`,children:n.icon}),e.jsx("div",{className:"nav-label small",children:n.label})]},i))})}):null},Ra=({size:t="lg",text:s="Cargando...",fullScreen:r=!1,variant:a="warning"})=>{const n=e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{animation:"border",variant:a,size:t,className:"mb-3"}),s&&e.jsx("div",{className:"text-muted",children:s})]});return r?e.jsx(ie,{fluid:!0,className:"d-flex align-items-center justify-content-center min-vh-100",children:e.jsx(ee,{children:e.jsx(_,{children:n})})}):n},xi=g.createContext(null),Ia=()=>{const t=g.useContext(xi);if(!t)throw new Error("useCart must be used within CartProvider");return t},Br=t=>t?.tiendaId?._id??t?.tienda?._id??t?.tiendaId??t?.tienda??null,Ic=({children:t})=>{const[s,r]=g.useState(()=>{try{const y=localStorage.getItem("yega_cart");return y?JSON.parse(y).map(h=>h.producto&&h.cantidad?{product:h.producto,quantity:h.cantidad,tiendaId:h.tiendaId}:h).filter(h=>h.product&&typeof h.quantity=="number"):[]}catch{return[]}}),a=g.useCallback(async()=>{if(s.length!==0)try{const y=Br(s[0]);if(!y)return;const b=(await O.get(`/products?tiendaId=${y}`)).data?.productos||[];if(b.length===0)return;r(u=>u.map(h=>{const v=b.find(N=>N._id===h.product._id);return v?{...h,product:v}:h}))}catch(y){console.warn("Failed to refresh cart products:",y)}},[s]);g.useEffect(()=>{s.length>0&&a()},[]),g.useEffect(()=>{try{localStorage.setItem("yega_cart",JSON.stringify(s))}catch{}},[s]);const n=g.useMemo(()=>s.length?Br(s[0]):null,[s]),i=(y,l=1)=>{const b=y,u=Br(b);if(u){if(n&&n!==u){r([{product:b,quantity:l,tiendaId:u}]);return}r(h=>{const v=h.findIndex(N=>N.product._id===b._id);if(v>=0){const N=[...h];return N[v]={...N[v],quantity:N[v].quantity+l},N}return[...h,{product:b,quantity:l,tiendaId:u}]})}},o=y=>{r(l=>l.filter(b=>b.product._id!==y))},c=g.useMemo(()=>s.reduce((y,l)=>!l.product||typeof l.quantity!="number"||typeof l.product.precio!="number"?y:y+l.product.precio*l.quantity,0),[s]),d=(y,l)=>{r(b=>b.map(u=>u.product._id===y?{...u,quantity:l}:u))},m=()=>r([]),x=g.useCallback(()=>{a()},[a]),p={items:s,addItem:i,removeItem:o,updateQuantity:d,clearCart:m,clear:m,subtotal:c,storeId:n,refreshCart:x};return e.jsx(xi.Provider,{value:p,children:t})},kr=()=>{const{locationPermission:t,requestLocationPermission:s,isAuthenticated:r}=ue();return g.useEffect(()=>{if(r&&(t===null||t==="denied")){const a=setTimeout(()=>{s()},1e3);return()=>clearTimeout(a)}},[r,t,s]),{locationPermission:t,requestLocationPermission:s,hasLocationAccess:t==="granted",isLocationDenied:t==="denied",isLocationSupported:t!=="not_supported"}},Ac=({onGetStarted:t})=>{const s=[{icon:e.jsx(js,{className:"text-2xl"}),title:"Compra Fácil",description:"Miles de productos a tu alcance"},{icon:e.jsx(gi,{className:"text-2xl"}),title:"Entrega Rápida",description:"Delivery en menos de 30 minutos"},{icon:e.jsx($s,{className:"text-2xl"}),title:"Tiendas Locales",description:"Apoya a comercios de tu zona"}];return e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_40%,rgba(192,192,192,0.1),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_60%,rgba(255,255,255,0.05),transparent_50%)]"}),e.jsx("div",{className:"absolute top-20 left-10 w-20 h-20 bg-white/10 rounded-full blur-xl animate-float"}),e.jsx("div",{className:"absolute top-40 right-20 w-32 h-32 bg-gray-400/5 rounded-full blur-2xl animate-float",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute bottom-40 left-20 w-24 h-24 bg-white/8 rounded-full blur-xl animate-float",style:{animationDelay:"2s"}}),e.jsx("div",{className:"relative z-10 container mx-auto px-6 py-16",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs(we.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:e.jsx("img",{src:"/images/yega-light.svg",alt:"YEGA Logo",height:"120",width:"auto",className:"drop-shadow-2xl"})}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent mb-4",children:"Delivery de comida y productos en minutos"}),e.jsx("h2",{className:"text-lg md:text-xl text-gray-400 leading-relaxed max-w-2xl mx-auto",children:"YEGA conecta clientes, tiendas y repartidores para entregarte lo que necesites, directo a tu puerta, rápido y seguro."})]}),e.jsx(we.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.4},className:"mb-12",children:e.jsx(Te,{size:"lg",className:"bg-gradient-to-r from-gray-200 to-white text-black font-semibold px-12 py-6 text-lg rounded-2xl hover:scale-105 transition-all duration-300 shadow-2xl shadow-white/25",onPress:t,as:Pt,to:"/login",children:"Comenzar Ahora"})}),e.jsx(we.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-5xl mb-16",children:s.map((r,a)=>e.jsx(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8+a*.1},children:e.jsx(Ae,{className:"yega-glass hover:bg-white/10 transition-all duration-300 group h-full",children:e.jsxs(Fe,{className:"text-center p-8",children:[e.jsx("div",{className:"flex justify-center mb-4 text-gray-300 group-hover:scale-110 transition-transform duration-300",children:r.icon}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:r.title}),e.jsx("p",{className:"text-gray-400",children:r.description})]})})},a))}),e.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:1},className:"text-center",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"O explora nuestras secciones:"}),e.jsxs("div",{className:"flex justify-center gap-4 md:gap-8",children:[e.jsx(Pt,{to:"/cliente/tiendas",className:"text-gray-300 hover:text-white transition-colors",children:"Explorar Tiendas"}),e.jsx(Pt,{to:"/register",className:"text-gray-300 hover:text-white transition-colors",children:"Únete como Tienda"}),e.jsx(Pt,{to:"/register",className:"text-gray-300 hover:text-white transition-colors",children:"Únete como Repartidor"})]})]})]})})]})},_c=()=>{const{isAuthenticated:t,user:s}=ue(),r=De();kr();const a=()=>{r(t?{cliente:"/cliente/dashboard",tienda:"/tienda/dashboard",repartidor:"/repartidor/dashboard",administrador:"/admin/dashboard"}[s?.rol]||"/cliente/dashboard":"/login")};return e.jsx("div",{className:"min-h-screen bg-black",children:e.jsx(Ac,{onGetStarted:a})})},Mc=()=>{const[t,s]=g.useState({email:"",password:""}),[r,a]=g.useState(!1),[n,i]=g.useState(!1),{login:o}=ue(),c=De(),d=()=>a(!r),m=(p,y)=>{s(l=>({...l,[p]:y}))},x=async p=>{if(p.preventDefault(),!t.email||!t.password){F.error("Por favor completa todos los campos");return}i(!0);try{const y=await o(t.email,t.password);y.success?c({cliente:"/cliente/dashboard",tienda:"/tienda/dashboard",repartidor:"/repartidor/dashboard",administrador:"/admin/dashboard"}[y.user?.rol]||"/cliente/dashboard"):y.requiresOTP&&c("/verify-otp",{state:{email:y.email,telefono:y.telefono}})}catch(y){console.error("Login error:",y)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_40%,rgba(192,192,192,0.1),transparent_50%)]"}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_60%,rgba(255,255,255,0.05),transparent_50%)]"}),e.jsx("div",{className:"w-full max-w-md relative z-10",children:e.jsxs(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(we.div,{initial:{scale:.5},animate:{scale:1},transition:{duration:.5,delay:.1},className:"inline-flex items-center justify-center mb-4",children:e.jsx("img",{src:"/images/yega-light.svg",alt:"YEGA",height:"80",width:"auto"})}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent mb-2",children:"Bienvenido de vuelta"}),e.jsx("p",{className:"text-gray-400",children:"Inicia sesión en tu cuenta YEGA"})]}),e.jsx(Ae,{className:"yega-glass",children:e.jsx(Fe,{className:"p-6",children:e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsx(Wr,{type:"email",label:"Correo electrónico",placeholder:"tu@email.com",value:t.email,onValueChange:p=>m("email",p),startContent:e.jsx(Pa,{className:"text-gray-400 my-auto"}),variant:"bordered",className:"text-white",classNames:{input:"text-white",inputWrapper:"flex items-center border-gray-600 data-[hover=true]:border-gray-400 group-data-[focus=true]:border-white",label:"text-gray-300"}}),e.jsx(Wr,{type:r?"text":"password",label:"Contraseña",placeholder:"••••••••",value:t.password,onValueChange:p=>m("password",p),startContent:e.jsx(ui,{className:"text-gray-400 my-auto"}),endContent:e.jsx("button",{className:"focus:outline-none my-auto",type:"button",onClick:d,children:r?e.jsx(li,{className:"text-gray-400 hover:text-gray-200"}):e.jsx(di,{className:"text-gray-400 hover:text-gray-200"})}),variant:"bordered",className:"text-white",classNames:{input:"text-white",inputWrapper:"flex items-center border-gray-600 data-[hover=true]:border-gray-400 group-data-[focus=true]:border-white",label:"text-gray-300"}}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Wa,{href:"/forgot-password",className:"text-gray-300 hover:text-white text-sm",children:"¿Olvidaste tu contraseña?"})}),e.jsx(Te,{type:"submit",className:"w-full bg-gradient-to-r from-gray-200 to-white text-black font-semibold py-3 text-lg",size:"lg",isLoading:n,disabled:n,children:n?"Iniciando sesión...":"Iniciar Sesión"}),e.jsxs("div",{className:"relative",children:[e.jsx(Do,{className:"bg-gray-600"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"bg-gray-900 px-4 text-gray-400 text-sm",children:"o continúa con"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(Te,{variant:"bordered",className:"border-gray-600 text-gray-300 hover:border-gray-400 hover:text-white",startContent:e.jsx(fc,{}),disabled:!0,children:"Google"}),e.jsx(Te,{variant:"bordered",className:"border-gray-600 text-gray-300 hover:border-gray-400 hover:text-white",startContent:e.jsx(pc,{}),disabled:!0,children:"Facebook"})]})]})})}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-gray-400",children:["¿No tienes una cuenta?"," ",e.jsx(Wa,{href:"/register",className:"text-gray-300 hover:text-white font-semibold",children:"Regístrate gratis"})]})})]})})]})},Tc=()=>e.jsx(Mc,{}),Oc=()=>{const[t,s]=g.useState({nombre:"",telefono:"",email:"",password:"",rol:"cliente"}),[r,a]=g.useState(!1),[n,i]=g.useState(""),[o,c]=g.useState(!1),{register:d}=ue(),m=De(),x=y=>{const{name:l,value:b}=y.target;s(u=>({...u,[l]:b})),n&&i("")},p=async y=>{if(y.preventDefault(),i(""),c(!0),!t.nombre||!t.telefono||!t.email||!t.password){i("Todos los campos son requeridos"),c(!1);return}if(t.password.length<6){i("La contraseña debe tener al menos 6 caracteres"),c(!1);return}try{const l=await d(t);l.success?l.requiresOTP?m("/verify-otp",{state:{email:t.email,telefono:t.telefono,tipo:"registro"}}):m("/dashboard"):i(l.error||"Error al registrarse")}catch{i("Error inesperado. Por favor intenta de nuevo.")}finally{c(!1)}};return e.jsx(ie,{className:"py-5",children:e.jsx(ee,{className:"justify-content-center",children:e.jsx(_,{md:6,lg:5,children:e.jsxs(I,{className:"card-yega",children:[e.jsx(I.Header,{className:"text-center",children:e.jsx("h3",{className:"mb-0",children:"Registrarse"})}),e.jsxs(I.Body,{className:"p-4",children:[n&&e.jsx(ne,{variant:"danger",className:"alert-yega-danger",children:n}),e.jsxs(S,{onSubmit:p,children:[e.jsxs(S.Group,{className:"mb-3",children:[e.jsxs(S.Label,{className:"form-label-yega",children:[e.jsx(We,{className:"me-2"}),"Nombre Completo"]}),e.jsx(S.Control,{type:"text",name:"nombre",value:t.nombre,onChange:x,placeholder:"Tu nombre completo",className:"form-control-yega",disabled:o})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsxs(S.Label,{className:"form-label-yega",children:[e.jsx(mi,{className:"me-2"}),"Teléfono"]}),e.jsx(S.Control,{type:"tel",name:"telefono",value:t.telefono,onChange:x,placeholder:"+541112345678",className:"form-control-yega",disabled:o})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsxs(S.Label,{className:"form-label-yega",children:[e.jsx(Pa,{className:"me-2"}),"Email"]}),e.jsx(S.Control,{type:"email",name:"email",value:t.email,onChange:x,placeholder:"tu@email.com",className:"form-control-yega",disabled:o})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsxs(S.Label,{className:"form-label-yega",children:[e.jsx(ui,{className:"me-2"}),"Contraseña"]}),e.jsxs("div",{className:"position-relative",children:[e.jsx(S.Control,{type:r?"text":"password",name:"password",value:t.password,onChange:x,placeholder:"Mínimo 6 caracteres",className:"form-control-yega pe-5",disabled:o}),e.jsx(M,{variant:"link",className:"position-absolute end-0 top-50 translate-middle-y border-0 text-muted",style:{zIndex:10},onClick:()=>a(!r),disabled:o,children:r?e.jsx(li,{}):e.jsx(di,{})})]})]}),e.jsxs(S.Group,{className:"mb-4",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Rol"}),e.jsxs(S.Select,{name:"rol",value:t.rol,onChange:x,className:"form-control-yega",disabled:o,children:[e.jsx("option",{value:"cliente",children:"Cliente"}),e.jsx("option",{value:"tienda",children:"Tienda"}),e.jsx("option",{value:"repartidor",children:"Repartidor"})]})]}),e.jsx(M,{type:"submit",className:"w-100 btn-yega-primary",size:"lg",disabled:o,children:o?"Registrando...":"Registrarse"})]}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"mb-0",children:["¿Ya tienes una cuenta?"," ",e.jsx(Pt,{to:"/login",className:"text-decoration-none",children:"Inicia sesión aquí"})]})})]})]})})})})},Lc=()=>{const[t,s]=g.useState(!1),[r,a]=g.useState(0),[n,i]=g.useState(!0),o=async(p,y,l="verificacion",b="sms")=>{try{s(!0);const u=await Y.post("/otp/send",{telefono:p,email:y,tipo:l,metodo:b});return u.data.success?(F.success("Código enviado exitosamente"),m(u.data.tiempo_restante||600),{success:!0,data:u.data}):{success:!1,error:"Error enviando código"}}catch(u){if(u.response?.status===429){const v=parseInt(u.response.headers?.["retry-after"]||"0",10),N=Number.isFinite(v)&&v>0?v:120;return m(N),F.warn(`Demasiados intentos. Intenta de nuevo en ~${Math.ceil(N/60)} min`),{success:!1,error:"Demasiados intentos. Intenta más tarde."}}const h=u.response?.data?.message||"Error enviando código OTP";return F.error(h),{success:!1,error:h}}finally{s(!1)}},c=async(p,y,l="verificacion")=>{try{s(!0);const b=await Y.post("/otp/verify",{telefono:p,codigo:y,tipo:l});return b.data.success?(F.success("Código verificado exitosamente"),a(0),{success:!0,data:b.data}):{success:!1,error:"Código inválido"}}catch(b){const u=b.response?.data?.message||"Error verificando código";return F.error(u),{success:!1,error:u}}finally{s(!1)}},d=async(p,y,l="verificacion",b="sms")=>{try{s(!0);const u=await Y.post("/otp/resend",{telefono:p,email:y,tipo:l,metodo:b});return u.data.success?(F.success("Código reenviado exitosamente"),m(u.data.tiempo_restante||600),{success:!0,data:u.data}):{success:!1,error:"Error reenviando código"}}catch(u){if(u.response?.status===429){const v=parseInt(u.response.headers?.["retry-after"]||"0",10),N=Number.isFinite(v)&&v>0?v:120;return m(N),F.warn(`Demasiados intentos. Intenta de nuevo en ~${Math.ceil(N/60)} min`),{success:!1,error:"Demasiados intentos. Intenta más tarde."}}const h=u.response?.data?.message||"Error reenviando código";return F.error(h),{success:!1,error:h}}finally{s(!1)}},m=p=>{a(p),i(!1);const y=setInterval(()=>{a(l=>l<=1?(clearInterval(y),i(!0),0):l-1)},1e3)};return{loading:t,timeLeft:r,canResend:n,sendOTP:o,verifyOTP:c,resendOTP:d,formatTimeLeft:()=>{const p=Math.floor(r/60),y=r%60;return`${p.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`}}};var Se=function(){return Se=Object.assign||function(s){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},Se.apply(this,arguments)};function br(t,s,r){if(r||arguments.length===2)for(var a=0,n=s.length,i;a<n;a++)(i||!(a in s))&&(i||(i=Array.prototype.slice.call(s,0,a)),i[a]=s[a]);return t.concat(i||Array.prototype.slice.call(s))}var ae="-ms-",Ds="-moz-",Z="-webkit-",bi="comm",Er="rule",Aa="decl",zc="@import",yi="@keyframes",Fc="@layer",vi=Math.abs,_a=String.fromCharCode,ea=Object.assign;function $c(t,s){return fe(t,0)^45?(((s<<2^fe(t,0))<<2^fe(t,1))<<2^fe(t,2))<<2^fe(t,3):0}function ji(t){return t.trim()}function et(t,s){return(t=s.exec(t))?t[0]:t}function G(t,s,r){return t.replace(s,r)}function dr(t,s,r){return t.indexOf(s,r)}function fe(t,s){return t.charCodeAt(s)|0}function fs(t,s,r){return t.slice(s,r)}function Ue(t){return t.length}function Ni(t){return t.length}function _s(t,s){return s.push(t),t}function Dc(t,s){return t.map(s).join("")}function on(t,s){return t.filter(function(r){return!et(r,s)})}var Pr=1,gs=1,wi=0,Oe=0,le=0,Ns="";function Rr(t,s,r,a,n,i,o,c){return{value:t,root:s,parent:r,type:a,props:n,children:i,line:Pr,column:gs,length:o,return:"",siblings:c}}function ut(t,s){return ea(Rr("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},s)}function Wt(t){for(;t.root;)t=ut(t.root,{children:[t]});_s(t,t.siblings)}function Bc(){return le}function qc(){return le=Oe>0?fe(Ns,--Oe):0,gs--,le===10&&(gs=1,Pr--),le}function $e(){return le=Oe<wi?fe(Ns,Oe++):0,gs++,le===10&&(gs=1,Pr++),le}function Bt(){return fe(Ns,Oe)}function ur(){return Oe}function Ir(t,s){return fs(Ns,t,s)}function ta(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Gc(t){return Pr=gs=1,wi=Ue(Ns=t),Oe=0,[]}function Vc(t){return Ns="",t}function qr(t){return ji(Ir(Oe-1,sa(t===91?t+2:t===40?t+1:t)))}function Hc(t){for(;(le=Bt())&&le<33;)$e();return ta(t)>2||ta(le)>3?"":" "}function Uc(t,s){for(;--s&&$e()&&!(le<48||le>102||le>57&&le<65||le>70&&le<97););return Ir(t,ur()+(s<6&&Bt()==32&&$e()==32))}function sa(t){for(;$e();)switch(le){case t:return Oe;case 34:case 39:t!==34&&t!==39&&sa(le);break;case 40:t===41&&sa(t);break;case 92:$e();break}return Oe}function Qc(t,s){for(;$e()&&t+le!==57;)if(t+le===84&&Bt()===47)break;return"/*"+Ir(s,Oe-1)+"*"+_a(t===47?t:$e())}function Kc(t){for(;!ta(Bt());)$e();return Ir(t,Oe)}function Wc(t){return Vc(hr("",null,null,null,[""],t=Gc(t),0,[0],t))}function hr(t,s,r,a,n,i,o,c,d){for(var m=0,x=0,p=o,y=0,l=0,b=0,u=1,h=1,v=1,N=0,j="",C=n,k=i,P=a,w=j;h;)switch(b=N,N=$e()){case 40:if(b!=108&&fe(w,p-1)==58){dr(w+=G(qr(N),"&","&\f"),"&\f",vi(m?c[m-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:w+=qr(N);break;case 9:case 10:case 13:case 32:w+=Hc(b);break;case 92:w+=Uc(ur()-1,7);continue;case 47:switch(Bt()){case 42:case 47:_s(Yc(Qc($e(),ur()),s,r,d),d);break;default:w+="/"}break;case 123*u:c[m++]=Ue(w)*v;case 125*u:case 59:case 0:switch(N){case 0:case 125:h=0;case 59+x:v==-1&&(w=G(w,/\f/g,"")),l>0&&Ue(w)-p&&_s(l>32?ln(w+";",a,r,p-1,d):ln(G(w," ","")+";",a,r,p-2,d),d);break;case 59:w+=";";default:if(_s(P=cn(w,s,r,m,x,n,c,j,C=[],k=[],p,i),i),N===123)if(x===0)hr(w,s,P,P,C,i,p,c,k);else switch(y===99&&fe(w,3)===110?100:y){case 100:case 108:case 109:case 115:hr(t,P,P,a&&_s(cn(t,P,P,0,0,n,c,j,n,C=[],p,k),k),n,k,p,c,a?C:k);break;default:hr(w,P,P,P,[""],k,0,c,k)}}m=x=l=0,u=v=1,j=w="",p=o;break;case 58:p=1+Ue(w),l=b;default:if(u<1){if(N==123)--u;else if(N==125&&u++==0&&qc()==125)continue}switch(w+=_a(N),N*u){case 38:v=x>0?1:(w+="\f",-1);break;case 44:c[m++]=(Ue(w)-1)*v,v=1;break;case 64:Bt()===45&&(w+=qr($e())),y=Bt(),x=p=Ue(j=w+=Kc(ur())),N++;break;case 45:b===45&&Ue(w)==2&&(u=0)}}return i}function cn(t,s,r,a,n,i,o,c,d,m,x,p){for(var y=n-1,l=n===0?i:[""],b=Ni(l),u=0,h=0,v=0;u<a;++u)for(var N=0,j=fs(t,y+1,y=vi(h=o[u])),C=t;N<b;++N)(C=ji(h>0?l[N]+" "+j:G(j,/&\f/g,l[N])))&&(d[v++]=C);return Rr(t,s,r,n===0?Er:c,d,m,x,p)}function Yc(t,s,r,a){return Rr(t,s,r,bi,_a(Bc()),fs(t,2,-2),0,a)}function ln(t,s,r,a,n){return Rr(t,s,r,Aa,fs(t,0,a),fs(t,a+1,-1),a,n)}function Ci(t,s,r){switch($c(t,s)){case 5103:return Z+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+t+t;case 4789:return Ds+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+t+Ds+t+ae+t+t;case 5936:switch(fe(t,s+11)){case 114:return Z+t+ae+G(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Z+t+ae+G(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Z+t+ae+G(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return Z+t+ae+t+t;case 6165:return Z+t+ae+"flex-"+t+t;case 5187:return Z+t+G(t,/(\w+).+(:[^]+)/,Z+"box-$1$2"+ae+"flex-$1$2")+t;case 5443:return Z+t+ae+"flex-item-"+G(t,/flex-|-self/g,"")+(et(t,/flex-|baseline/)?"":ae+"grid-row-"+G(t,/flex-|-self/g,""))+t;case 4675:return Z+t+ae+"flex-line-pack"+G(t,/align-content|flex-|-self/g,"")+t;case 5548:return Z+t+ae+G(t,"shrink","negative")+t;case 5292:return Z+t+ae+G(t,"basis","preferred-size")+t;case 6060:return Z+"box-"+G(t,"-grow","")+Z+t+ae+G(t,"grow","positive")+t;case 4554:return Z+G(t,/([^-])(transform)/g,"$1"+Z+"$2")+t;case 6187:return G(G(G(t,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),t,"")+t;case 5495:case 3959:return G(t,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return G(G(t,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+ae+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+t+t;case 4200:if(!et(t,/flex-|baseline/))return ae+"grid-column-align"+fs(t,s)+t;break;case 2592:case 3360:return ae+G(t,"template-","")+t;case 4384:case 3616:return r&&r.some(function(a,n){return s=n,et(a.props,/grid-\w+-end/)})?~dr(t+(r=r[s].value),"span",0)?t:ae+G(t,"-start","")+t+ae+"grid-row-span:"+(~dr(r,"span",0)?et(r,/\d+/):+et(r,/\d+/)-+et(t,/\d+/))+";":ae+G(t,"-start","")+t;case 4896:case 4128:return r&&r.some(function(a){return et(a.props,/grid-\w+-start/)})?t:ae+G(G(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return G(t,/(.+)-inline(.+)/,Z+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ue(t)-1-s>6)switch(fe(t,s+1)){case 109:if(fe(t,s+4)!==45)break;case 102:return G(t,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+Ds+(fe(t,s+3)==108?"$3":"$2-$3"))+t;case 115:return~dr(t,"stretch",0)?Ci(G(t,"stretch","fill-available"),s,r)+t:t}break;case 5152:case 5920:return G(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,n,i,o,c,d,m){return ae+n+":"+i+m+(o?ae+n+"-span:"+(c?d:+d-+i)+m:"")+t});case 4949:if(fe(t,s+6)===121)return G(t,":",":"+Z)+t;break;case 6444:switch(fe(t,fe(t,14)===45?18:11)){case 120:return G(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Z+(fe(t,14)===45?"inline-":"")+"box$3$1"+Z+"$2$3$1"+ae+"$2box$3")+t;case 100:return G(t,":",":"+ae)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return G(t,"scroll-","scroll-snap-")+t}return t}function yr(t,s){for(var r="",a=0;a<t.length;a++)r+=s(t[a],a,t,s)||"";return r}function Xc(t,s,r,a){switch(t.type){case Fc:if(t.children.length)break;case zc:case Aa:return t.return=t.return||t.value;case bi:return"";case yi:return t.return=t.value+"{"+yr(t.children,a)+"}";case Er:if(!Ue(t.value=t.props.join(",")))return""}return Ue(r=yr(t.children,a))?t.return=t.value+"{"+r+"}":""}function Zc(t){var s=Ni(t);return function(r,a,n,i){for(var o="",c=0;c<s;c++)o+=t[c](r,a,n,i)||"";return o}}function Jc(t){return function(s){s.root||(s=s.return)&&t(s)}}function el(t,s,r,a){if(t.length>-1&&!t.return)switch(t.type){case Aa:t.return=Ci(t.value,t.length,r);return;case yi:return yr([ut(t,{value:G(t.value,"@","@"+Z)})],a);case Er:if(t.length)return Dc(r=t.props,function(n){switch(et(n,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Wt(ut(t,{props:[G(n,/:(read-\w+)/,":"+Ds+"$1")]})),Wt(ut(t,{props:[n]})),ea(t,{props:on(r,a)});break;case"::placeholder":Wt(ut(t,{props:[G(n,/:(plac\w+)/,":"+Z+"input-$1")]})),Wt(ut(t,{props:[G(n,/:(plac\w+)/,":"+Ds+"$1")]})),Wt(ut(t,{props:[G(n,/:(plac\w+)/,ae+"input-$1")]})),Wt(ut(t,{props:[n]})),ea(t,{props:on(r,a)});break}return""})}}var tl={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Pe={},xs=typeof process<"u"&&Pe!==void 0&&(Pe.REACT_APP_SC_ATTR||Pe.SC_ATTR)||"data-styled",Si="active",ki="data-styled-version",Ar="6.1.19",Ma=`/*!sc*/
`,vr=typeof window<"u"&&typeof document<"u",sl=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Pe!==void 0&&Pe.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Pe.REACT_APP_SC_DISABLE_SPEEDY!==""?Pe.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Pe.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Pe!==void 0&&Pe.SC_DISABLE_SPEEDY!==void 0&&Pe.SC_DISABLE_SPEEDY!==""&&Pe.SC_DISABLE_SPEEDY!=="false"&&Pe.SC_DISABLE_SPEEDY),_r=Object.freeze([]),bs=Object.freeze({});function rl(t,s,r){return r===void 0&&(r=bs),t.theme!==r.theme&&t.theme||s||r.theme}var Ei=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),al=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,nl=/(^-|-$)/g;function dn(t){return t.replace(al,"-").replace(nl,"")}var il=/(a)(d)/gi,ir=52,un=function(t){return String.fromCharCode(t+(t>25?39:97))};function ra(t){var s,r="";for(s=Math.abs(t);s>ir;s=s/ir|0)r=un(s%ir)+r;return(un(s%ir)+r).replace(il,"$1-$2")}var Gr,Pi=5381,Zt=function(t,s){for(var r=s.length;r;)t=33*t^s.charCodeAt(--r);return t},Ri=function(t){return Zt(Pi,t)};function ol(t){return ra(Ri(t)>>>0)}function cl(t){return t.displayName||t.name||"Component"}function Vr(t){return typeof t=="string"&&!0}var Ii=typeof Symbol=="function"&&Symbol.for,Ai=Ii?Symbol.for("react.memo"):60115,ll=Ii?Symbol.for("react.forward_ref"):60112,dl={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},ul={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hl=((Gr={})[ll]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gr[Ai]=_i,Gr);function hn(t){return("type"in(s=t)&&s.type.$$typeof)===Ai?_i:"$$typeof"in t?hl[t.$$typeof]:dl;var s}var ml=Object.defineProperty,pl=Object.getOwnPropertyNames,mn=Object.getOwnPropertySymbols,fl=Object.getOwnPropertyDescriptor,gl=Object.getPrototypeOf,pn=Object.prototype;function Mi(t,s,r){if(typeof s!="string"){if(pn){var a=gl(s);a&&a!==pn&&Mi(t,a,r)}var n=pl(s);mn&&(n=n.concat(mn(s)));for(var i=hn(t),o=hn(s),c=0;c<n.length;++c){var d=n[c];if(!(d in ul||r&&r[d]||o&&d in o||i&&d in i)){var m=fl(s,d);try{ml(t,d,m)}catch{}}}}return t}function ys(t){return typeof t=="function"}function Ta(t){return typeof t=="object"&&"styledComponentId"in t}function It(t,s){return t&&s?"".concat(t," ").concat(s):t||s||""}function fn(t,s){if(t.length===0)return"";for(var r=t[0],a=1;a<t.length;a++)r+=t[a];return r}function Bs(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function aa(t,s,r){if(r===void 0&&(r=!1),!r&&!Bs(t)&&!Array.isArray(t))return s;if(Array.isArray(s))for(var a=0;a<s.length;a++)t[a]=aa(t[a],s[a]);else if(Bs(s))for(var a in s)t[a]=aa(t[a],s[a]);return t}function Oa(t,s){Object.defineProperty(t,"toString",{value:s})}function Ws(t){for(var s=[],r=1;r<arguments.length;r++)s[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(s.length>0?" Args: ".concat(s.join(", ")):""))}var xl=function(){function t(s){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=s}return t.prototype.indexOfGroup=function(s){for(var r=0,a=0;a<s;a++)r+=this.groupSizes[a];return r},t.prototype.insertRules=function(s,r){if(s>=this.groupSizes.length){for(var a=this.groupSizes,n=a.length,i=n;s>=i;)if((i<<=1)<0)throw Ws(16,"".concat(s));this.groupSizes=new Uint32Array(i),this.groupSizes.set(a),this.length=i;for(var o=n;o<i;o++)this.groupSizes[o]=0}for(var c=this.indexOfGroup(s+1),d=(o=0,r.length);o<d;o++)this.tag.insertRule(c,r[o])&&(this.groupSizes[s]++,c++)},t.prototype.clearGroup=function(s){if(s<this.length){var r=this.groupSizes[s],a=this.indexOfGroup(s),n=a+r;this.groupSizes[s]=0;for(var i=a;i<n;i++)this.tag.deleteRule(a)}},t.prototype.getGroup=function(s){var r="";if(s>=this.length||this.groupSizes[s]===0)return r;for(var a=this.groupSizes[s],n=this.indexOfGroup(s),i=n+a,o=n;o<i;o++)r+="".concat(this.tag.getRule(o)).concat(Ma);return r},t}(),mr=new Map,jr=new Map,pr=1,or=function(t){if(mr.has(t))return mr.get(t);for(;jr.has(pr);)pr++;var s=pr++;return mr.set(t,s),jr.set(s,t),s},bl=function(t,s){pr=s+1,mr.set(t,s),jr.set(s,t)},yl="style[".concat(xs,"][").concat(ki,'="').concat(Ar,'"]'),vl=new RegExp("^".concat(xs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),jl=function(t,s,r){for(var a,n=r.split(","),i=0,o=n.length;i<o;i++)(a=n[i])&&t.registerName(s,a)},Nl=function(t,s){for(var r,a=((r=s.textContent)!==null&&r!==void 0?r:"").split(Ma),n=[],i=0,o=a.length;i<o;i++){var c=a[i].trim();if(c){var d=c.match(vl);if(d){var m=0|parseInt(d[1],10),x=d[2];m!==0&&(bl(x,m),jl(t,x,d[3]),t.getTag().insertRules(m,n)),n.length=0}else n.push(c)}}},gn=function(t){for(var s=document.querySelectorAll(yl),r=0,a=s.length;r<a;r++){var n=s[r];n&&n.getAttribute(xs)!==Si&&(Nl(t,n),n.parentNode&&n.parentNode.removeChild(n))}};function wl(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Ti=function(t){var s=document.head,r=t||s,a=document.createElement("style"),n=function(c){var d=Array.from(c.querySelectorAll("style[".concat(xs,"]")));return d[d.length-1]}(r),i=n!==void 0?n.nextSibling:null;a.setAttribute(xs,Si),a.setAttribute(ki,Ar);var o=wl();return o&&a.setAttribute("nonce",o),r.insertBefore(a,i),a},Cl=function(){function t(s){this.element=Ti(s),this.element.appendChild(document.createTextNode("")),this.sheet=function(r){if(r.sheet)return r.sheet;for(var a=document.styleSheets,n=0,i=a.length;n<i;n++){var o=a[n];if(o.ownerNode===r)return o}throw Ws(17)}(this.element),this.length=0}return t.prototype.insertRule=function(s,r){try{return this.sheet.insertRule(r,s),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(s){this.sheet.deleteRule(s),this.length--},t.prototype.getRule=function(s){var r=this.sheet.cssRules[s];return r&&r.cssText?r.cssText:""},t}(),Sl=function(){function t(s){this.element=Ti(s),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(s,r){if(s<=this.length&&s>=0){var a=document.createTextNode(r);return this.element.insertBefore(a,this.nodes[s]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(s){this.element.removeChild(this.nodes[s]),this.length--},t.prototype.getRule=function(s){return s<this.length?this.nodes[s].textContent:""},t}(),kl=function(){function t(s){this.rules=[],this.length=0}return t.prototype.insertRule=function(s,r){return s<=this.length&&(this.rules.splice(s,0,r),this.length++,!0)},t.prototype.deleteRule=function(s){this.rules.splice(s,1),this.length--},t.prototype.getRule=function(s){return s<this.length?this.rules[s]:""},t}(),xn=vr,El={isServer:!vr,useCSSOMInjection:!sl},Oi=function(){function t(s,r,a){s===void 0&&(s=bs),r===void 0&&(r={});var n=this;this.options=Se(Se({},El),s),this.gs=r,this.names=new Map(a),this.server=!!s.isServer,!this.server&&vr&&xn&&(xn=!1,gn(this)),Oa(this,function(){return function(i){for(var o=i.getTag(),c=o.length,d="",m=function(p){var y=function(v){return jr.get(v)}(p);if(y===void 0)return"continue";var l=i.names.get(y),b=o.getGroup(p);if(l===void 0||!l.size||b.length===0)return"continue";var u="".concat(xs,".g").concat(p,'[id="').concat(y,'"]'),h="";l!==void 0&&l.forEach(function(v){v.length>0&&(h+="".concat(v,","))}),d+="".concat(b).concat(u,'{content:"').concat(h,'"}').concat(Ma)},x=0;x<c;x++)m(x);return d}(n)})}return t.registerId=function(s){return or(s)},t.prototype.rehydrate=function(){!this.server&&vr&&gn(this)},t.prototype.reconstructWithOptions=function(s,r){return r===void 0&&(r=!0),new t(Se(Se({},this.options),s),this.gs,r&&this.names||void 0)},t.prototype.allocateGSInstance=function(s){return this.gs[s]=(this.gs[s]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(s=function(r){var a=r.useCSSOMInjection,n=r.target;return r.isServer?new kl(n):a?new Cl(n):new Sl(n)}(this.options),new xl(s)));var s},t.prototype.hasNameForId=function(s,r){return this.names.has(s)&&this.names.get(s).has(r)},t.prototype.registerName=function(s,r){if(or(s),this.names.has(s))this.names.get(s).add(r);else{var a=new Set;a.add(r),this.names.set(s,a)}},t.prototype.insertRules=function(s,r,a){this.registerName(s,r),this.getTag().insertRules(or(s),a)},t.prototype.clearNames=function(s){this.names.has(s)&&this.names.get(s).clear()},t.prototype.clearRules=function(s){this.getTag().clearGroup(or(s)),this.clearNames(s)},t.prototype.clearTag=function(){this.tag=void 0},t}(),Pl=/&/g,Rl=/^\s*\/\/.*$/gm;function Li(t,s){return t.map(function(r){return r.type==="rule"&&(r.value="".concat(s," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(s," ")),r.props=r.props.map(function(a){return"".concat(s," ").concat(a)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=Li(r.children,s)),r})}function Il(t){var s,r,a,n=bs,i=n.options,o=i===void 0?bs:i,c=n.plugins,d=c===void 0?_r:c,m=function(y,l,b){return b.startsWith(r)&&b.endsWith(r)&&b.replaceAll(r,"").length>0?".".concat(s):y},x=d.slice();x.push(function(y){y.type===Er&&y.value.includes("&")&&(y.props[0]=y.props[0].replace(Pl,r).replace(a,m))}),o.prefix&&x.push(el),x.push(Xc);var p=function(y,l,b,u){l===void 0&&(l=""),b===void 0&&(b=""),u===void 0&&(u="&"),s=u,r=l,a=new RegExp("\\".concat(r,"\\b"),"g");var h=y.replace(Rl,""),v=Wc(b||l?"".concat(b," ").concat(l," { ").concat(h," }"):h);o.namespace&&(v=Li(v,o.namespace));var N=[];return yr(v,Zc(x.concat(Jc(function(j){return N.push(j)})))),N};return p.hash=d.length?d.reduce(function(y,l){return l.name||Ws(15),Zt(y,l.name)},Pi).toString():"",p}var Al=new Oi,na=Il(),zi=V.createContext({shouldForwardProp:void 0,styleSheet:Al,stylis:na});zi.Consumer;V.createContext(void 0);function bn(){return g.useContext(zi)}var _l=function(){function t(s,r){var a=this;this.inject=function(n,i){i===void 0&&(i=na);var o=a.name+i.hash;n.hasNameForId(a.id,o)||n.insertRules(a.id,o,i(a.rules,o,"@keyframes"))},this.name=s,this.id="sc-keyframes-".concat(s),this.rules=r,Oa(this,function(){throw Ws(12,String(a.name))})}return t.prototype.getName=function(s){return s===void 0&&(s=na),this.name+s.hash},t}(),Ml=function(t){return t>="A"&&t<="Z"};function yn(t){for(var s="",r=0;r<t.length;r++){var a=t[r];if(r===1&&a==="-"&&t[0]==="-")return t;Ml(a)?s+="-"+a.toLowerCase():s+=a}return s.startsWith("ms-")?"-"+s:s}var Fi=function(t){return t==null||t===!1||t===""},$i=function(t){var s,r,a=[];for(var n in t){var i=t[n];t.hasOwnProperty(n)&&!Fi(i)&&(Array.isArray(i)&&i.isCss||ys(i)?a.push("".concat(yn(n),":"),i,";"):Bs(i)?a.push.apply(a,br(br(["".concat(n," {")],$i(i),!1),["}"],!1)):a.push("".concat(yn(n),": ").concat((s=n,(r=i)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||s in tl||s.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return a};function qt(t,s,r,a){if(Fi(t))return[];if(Ta(t))return[".".concat(t.styledComponentId)];if(ys(t)){if(!ys(i=t)||i.prototype&&i.prototype.isReactComponent||!s)return[t];var n=t(s);return qt(n,s,r,a)}var i;return t instanceof _l?r?(t.inject(r,a),[t.getName(a)]):[t]:Bs(t)?$i(t):Array.isArray(t)?Array.prototype.concat.apply(_r,t.map(function(o){return qt(o,s,r,a)})):[t.toString()]}function Tl(t){for(var s=0;s<t.length;s+=1){var r=t[s];if(ys(r)&&!Ta(r))return!1}return!0}var Ol=Ri(Ar),Ll=function(){function t(s,r,a){this.rules=s,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&Tl(s),this.componentId=r,this.baseHash=Zt(Ol,r),this.baseStyle=a,Oi.registerId(r)}return t.prototype.generateAndInjectStyles=function(s,r,a){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(s,r,a):"";if(this.isStatic&&!a.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))n=It(n,this.staticRulesId);else{var i=fn(qt(this.rules,s,r,a)),o=ra(Zt(this.baseHash,i)>>>0);if(!r.hasNameForId(this.componentId,o)){var c=a(i,".".concat(o),void 0,this.componentId);r.insertRules(this.componentId,o,c)}n=It(n,o),this.staticRulesId=o}else{for(var d=Zt(this.baseHash,a.hash),m="",x=0;x<this.rules.length;x++){var p=this.rules[x];if(typeof p=="string")m+=p;else if(p){var y=fn(qt(p,s,r,a));d=Zt(d,y+x),m+=y}}if(m){var l=ra(d>>>0);r.hasNameForId(this.componentId,l)||r.insertRules(this.componentId,l,a(m,".".concat(l),void 0,this.componentId)),n=It(n,l)}}return n},t}(),Di=V.createContext(void 0);Di.Consumer;var Hr={};function zl(t,s,r){var a=Ta(t),n=t,i=!Vr(t),o=s.attrs,c=o===void 0?_r:o,d=s.componentId,m=d===void 0?function(C,k){var P=typeof C!="string"?"sc":dn(C);Hr[P]=(Hr[P]||0)+1;var w="".concat(P,"-").concat(ol(Ar+P+Hr[P]));return k?"".concat(k,"-").concat(w):w}(s.displayName,s.parentComponentId):d,x=s.displayName,p=x===void 0?function(C){return Vr(C)?"styled.".concat(C):"Styled(".concat(cl(C),")")}(t):x,y=s.displayName&&s.componentId?"".concat(dn(s.displayName),"-").concat(s.componentId):s.componentId||m,l=a&&n.attrs?n.attrs.concat(c).filter(Boolean):c,b=s.shouldForwardProp;if(a&&n.shouldForwardProp){var u=n.shouldForwardProp;if(s.shouldForwardProp){var h=s.shouldForwardProp;b=function(C,k){return u(C,k)&&h(C,k)}}else b=u}var v=new Ll(r,y,a?n.componentStyle:void 0);function N(C,k){return function(P,w,E){var z=P.attrs,se=P.componentStyle,X=P.defaultProps,R=P.foldedComponentIds,H=P.styledComponentId,U=P.target,L=V.useContext(Di),$=bn(),D=P.shouldForwardProp||$.shouldForwardProp,me=rl(w,L,X)||bs,oe=function(Ys,ks,Xs){for(var Es,kt=Se(Se({},ks),{className:void 0,theme:Xs}),Or=0;Or<Ys.length;Or+=1){var Zs=ys(Es=Ys[Or])?Es(kt):Es;for(var ct in Zs)kt[ct]=ct==="className"?It(kt[ct],Zs[ct]):ct==="style"?Se(Se({},kt[ct]),Zs[ct]):Zs[ct]}return ks.className&&(kt.className=It(kt.className,ks.className)),kt}(z,w,me),qe=oe.as||U,ge={};for(var Ye in oe)oe[Ye]===void 0||Ye[0]==="$"||Ye==="as"||Ye==="theme"&&oe.theme===me||(Ye==="forwardedAs"?ge.as=oe.forwardedAs:D&&!D(Ye,qe)||(ge[Ye]=oe[Ye]));var Xe=function(Ys,ks){var Xs=bn(),Es=Ys.generateAndInjectStyles(ks,Xs.styleSheet,Xs.stylis);return Es}(se,oe),Tr=It(R,H);return Xe&&(Tr+=" "+Xe),oe.className&&(Tr+=" "+oe.className),ge[Vr(qe)&&!Ei.has(qe)?"class":"className"]=Tr,E&&(ge.ref=E),g.createElement(qe,ge)}(j,C,k)}N.displayName=p;var j=V.forwardRef(N);return j.attrs=l,j.componentStyle=v,j.displayName=p,j.shouldForwardProp=b,j.foldedComponentIds=a?It(n.foldedComponentIds,n.styledComponentId):"",j.styledComponentId=y,j.target=a?n.target:t,Object.defineProperty(j,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(C){this._foldedDefaultProps=a?function(k){for(var P=[],w=1;w<arguments.length;w++)P[w-1]=arguments[w];for(var E=0,z=P;E<z.length;E++)aa(k,z[E],!0);return k}({},n.defaultProps,C):C}}),Oa(j,function(){return".".concat(j.styledComponentId)}),i&&Mi(j,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),j}function vn(t,s){for(var r=[t[0]],a=0,n=s.length;a<n;a+=1)r.push(s[a],t[a+1]);return r}var jn=function(t){return Object.assign(t,{isCss:!0})};function Fl(t){for(var s=[],r=1;r<arguments.length;r++)s[r-1]=arguments[r];if(ys(t)||Bs(t))return jn(qt(vn(_r,br([t],s,!0))));var a=t;return s.length===0&&a.length===1&&typeof a[0]=="string"?qt(a):jn(qt(vn(a,s)))}function ia(t,s,r){if(r===void 0&&(r=bs),!s)throw Ws(1,s);var a=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return t(s,r,Fl.apply(void 0,br([n],i,!1)))};return a.attrs=function(n){return ia(t,s,Se(Se({},r),{attrs:Array.prototype.concat(r.attrs,n).filter(Boolean)}))},a.withConfig=function(n){return ia(t,s,Se(Se({},r),n))},a}var Bi=function(t){return ia(zl,t)},ws=Bi;Ei.forEach(function(t){ws[t]=Bi(t)});const $l=ws.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
`,Dl=ws.div`
  display: flex;
  gap: 0.5rem;
  justify-content: center;
`,Bl=ws.input`
  width: 50px;
  height: 50px;
  text-align: center;
  font-size: 1.5rem;
  font-weight: bold;
  border: 2px solid var(--color-gray-600);
  border-radius: 8px;
  background-color: var(--color-gray-800);
  color: var(--color-secondary);
  
  &:focus {
    outline: none;
    border-color: var(--color-accent-gold);
    box-shadow: 0 0 0 0.2rem rgba(212, 175, 55, 0.25);
  }
  
  &.error {
    border-color: var(--color-danger);
  }
  
  &.success {
    border-color: var(--color-success);
  }
`,ql=ws.div`
  color: var(--color-accent-silver);
  font-size: 0.9rem;
`,Gl=ws(M)`
  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }
`,Vl=({telefono:t,email:s,tipo:r="verificacion",metodo:a="sms",onSuccess:n,onError:i,autoSend:o=!1,length:c=6,manualVerify:d=!1})=>{const[m,x]=g.useState(new Array(c).fill("")),[p,y]=g.useState(""),[l,b]=g.useState(!1),u=g.useRef([]),{loading:h,timeLeft:v,canResend:N,sendOTP:j,verifyOTP:C,resendOTP:k,formatTimeLeft:P}=Lc(),w=g.useCallback(async()=>{y("");const L=await j(t,s,r,a);L.success||(y(L.error),i&&i(L.error))},[s,a,i,j,t,r]);g.useEffect(()=>{u.current[0]&&u.current[0].focus()},[]);const E=g.useCallback(async L=>{y("");const $=await C(t,L,r);$.success?(b(!0),n&&n($.data)):(y($.error),x(new Array(c).fill("")),u.current[0]&&u.current[0].focus(),i&&i($.error))},[c,i,n,t,r,C]),z=g.useRef(null);g.useEffect(()=>{if(!o||!t||!s)return;const L=`${t}|${s}|${r}|${a}`;z.current!==L&&(z.current=L,w())},[o,t,s,r,a,w]),g.useEffect(()=>{const L=m.join("");L.length===c&&!h&&(d?n&&n({codigo:L}):E(L))},[m,c,h,d,n,E]);const se=async()=>{y(""),x(new Array(c).fill(""));const L=await k(t,s,r,a);L.success||(y(L.error),i&&i(L.error))},X=(L,$)=>{if(isNaN(L.value))return;const D=[...m];D[$]=L.value,x(D),L.value&&$<c-1&&u.current[$+1].focus()},R=(L,$)=>{L.key==="Backspace"&&!m[$]&&$>0&&u.current[$-1].focus(),L.key==="Enter"&&E()},H=L=>{L.preventDefault();const D=L.clipboardData.getData("text").replace(/\D/g,"").slice(0,c);if(D.length===c){const me=D.split("");x(me),u.current[c-1].focus()}},U=()=>l?"success":p?"error":"";return e.jsxs($l,{children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h5",{className:"text-yega-gold",children:"Verificación de Código"}),e.jsxs("p",{className:"text-muted",children:["Ingresa el código de ",c," dígitos enviado a tu ",a==="email"?"email":"teléfono"]})]}),p&&e.jsx(ne,{variant:"danger",className:"w-100 text-center",children:p}),l&&e.jsx(ne,{variant:"success",className:"w-100 text-center",children:"✅ Código verificado exitosamente"}),e.jsx(Dl,{children:m.map((L,$)=>e.jsx(Bl,{type:"text",maxLength:1,value:L,onChange:D=>X(D.target,$),onKeyDown:D=>R(D,$),onPaste:H,ref:D=>u.current[$]=D,className:U(),disabled:h||l},$))}),v>0&&e.jsxs(ql,{children:["Código expira en: ",e.jsx("strong",{children:P()})]}),e.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[e.jsx(Gl,{variant:"outline-secondary",size:"sm",onClick:se,disabled:!N||h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(ke,{size:"sm",className:"me-1"}),"Enviando..."]}):"Reenviar Código"}),!o&&e.jsx(M,{variant:"outline-primary",size:"sm",onClick:w,disabled:h,children:"Enviar Código"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("small",{className:"text-muted",children:["¿No recibiste el código? Verifica tu ",a==="email"?"bandeja de entrada y spam":"mensajes de texto"]})})]})},Hl=()=>{const[t,s]=g.useState(""),r=De(),a=Ks(),{verifyOTP:n,resendOTP:i}=ue(),{email:o,telefono:c,tipo:d="registro"}=a.state||{};g.useEffect(()=>{(!o||!c)&&(o&&!c?i(o).catch(()=>{}):r("/register",{replace:!0}))},[o,c,r,i]);const m=async p=>{try{const y=await n(o,p.codigo,c);if(y.success){const l=y.user?.rol||y.user?.usuario?.rol||y?.rol;l==="tienda"?r("/tienda/direccion",{replace:!0}):l==="repartidor"?r("/repartidor/vehiculo",{replace:!0}):r("/dashboard",{replace:!0})}else s(y.error||"Error verificando cuenta")}catch{s("Error inesperado verificando cuenta")}},x=p=>{s(p)};return o?e.jsx(ie,{className:"py-5",children:e.jsx(ee,{className:"justify-content-center",children:e.jsxs(_,{md:6,lg:5,children:[e.jsxs(I,{className:"card-yega",children:[e.jsx(I.Header,{className:"text-center",children:e.jsx("h3",{className:"mb-0",children:"Verificar Cuenta"})}),e.jsxs(I.Body,{className:"p-4",children:[t&&e.jsx(ne,{variant:"danger",className:"alert-yega-danger",children:t}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("p",{className:"text-muted",children:"Hemos enviado un código de verificación a:"}),c&&e.jsx("div",{className:"mb-2",children:e.jsxs("strong",{className:"text-yega-gold",children:["📱 ",c]})}),e.jsx("div",{children:e.jsxs("strong",{className:"text-yega-silver",children:["📧 ",o]})})]}),e.jsx(Vl,{telefono:c,email:o,tipo:d,metodo:"sms",onSuccess:m,onError:x,autoSend:!0,length:6,manualVerify:!0}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"mb-0 text-muted",children:["¿Problemas con la verificación?"," ",e.jsx("a",{href:"/contact",className:"text-decoration-none",children:"Contacta soporte"})]})})]})]}),e.jsx(I,{className:"card-yega mt-4",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx("h6",{className:"text-yega-gold mb-3",children:"Consejos de Verificación"}),e.jsxs("div",{className:"text-sm text-muted",children:[e.jsx("div",{className:"mb-2",children:"✓ El código expira en 10 minutos"}),e.jsx("div",{className:"mb-2",children:"✓ Verifica tu bandeja de spam si elegiste email"}),e.jsx("div",{className:"mb-2",children:"✓ Asegúrate de tener señal si elegiste SMS"}),e.jsx("div",{children:"✓ Puedes reenviar el código si no lo recibes"})]})]})})]})})}):null},Nn=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,wn=Zn,La=(t,s)=>r=>{var a;if(s?.variants==null)return wn(t,r?.class,r?.className);const{variants:n,defaultVariants:i}=s,o=Object.keys(n).map(m=>{const x=r?.[m],p=i?.[m];if(x===null)return null;const y=Nn(x)||Nn(p);return n[m][y]}),c=r&&Object.entries(r).reduce((m,x)=>{let[p,y]=x;return y===void 0||(m[p]=y),m},{}),d=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((m,x)=>{let{class:p,className:y,...l}=x;return Object.entries(l).every(b=>{let[u,h]=b;return Array.isArray(h)?h.includes({...i,...c}[u]):{...i,...c}[u]===h})?[...m,p,y]:m},[]);return wn(t,o,d,r?.class,r?.className)},za="-",Ul=t=>{const s=Kl(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:o=>{const c=o.split(za);return c[0]===""&&c.length!==1&&c.shift(),qi(c,s)||Ql(o)},getConflictingClassGroupIds:(o,c)=>{const d=r[o]||[];return c&&a[o]?[...d,...a[o]]:d}}},qi=(t,s)=>{if(t.length===0)return s.classGroupId;const r=t[0],a=s.nextPart.get(r),n=a?qi(t.slice(1),a):void 0;if(n)return n;if(s.validators.length===0)return;const i=t.join(za);return s.validators.find(({validator:o})=>o(i))?.classGroupId},Cn=/^\[(.+)\]$/,Ql=t=>{if(Cn.test(t)){const s=Cn.exec(t)[1],r=s?.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},Kl=t=>{const{theme:s,prefix:r}=t,a={nextPart:new Map,validators:[]};return Yl(Object.entries(t.classGroups),r).forEach(([i,o])=>{oa(o,a,i,s)}),a},oa=(t,s,r,a)=>{t.forEach(n=>{if(typeof n=="string"){const i=n===""?s:Sn(s,n);i.classGroupId=r;return}if(typeof n=="function"){if(Wl(n)){oa(n(a),s,r,a);return}s.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([i,o])=>{oa(o,Sn(s,i),r,a)})})},Sn=(t,s)=>{let r=t;return s.split(za).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},Wl=t=>t.isThemeGetter,Yl=(t,s)=>s?t.map(([r,a])=>{const n=a.map(i=>typeof i=="string"?s+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,c])=>[s+o,c])):i);return[r,n]}):t,Xl=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,a=new Map;const n=(i,o)=>{r.set(i,o),s++,s>t&&(s=0,a=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=a.get(i))!==void 0)return n(i,o),o},set(i,o){r.has(i)?r.set(i,o):n(i,o)}}},Gi="!",Zl=t=>{const{separator:s,experimentalParseClassName:r}=t,a=s.length===1,n=s[0],i=s.length,o=c=>{const d=[];let m=0,x=0,p;for(let h=0;h<c.length;h++){let v=c[h];if(m===0){if(v===n&&(a||c.slice(h,h+i)===s)){d.push(c.slice(x,h)),x=h+i;continue}if(v==="/"){p=h;continue}}v==="["?m++:v==="]"&&m--}const y=d.length===0?c:c.substring(x),l=y.startsWith(Gi),b=l?y.substring(1):y,u=p&&p>x?p-x:void 0;return{modifiers:d,hasImportantModifier:l,baseClassName:b,maybePostfixModifierPosition:u}};return r?c=>r({className:c,parseClassName:o}):o},Jl=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(a=>{a[0]==="["?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s},ed=t=>({cache:Xl(t.cacheSize),parseClassName:Zl(t),...Ul(t)}),td=/\s+/,sd=(t,s)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=s,i=[],o=t.trim().split(td);let c="";for(let d=o.length-1;d>=0;d-=1){const m=o[d],{modifiers:x,hasImportantModifier:p,baseClassName:y,maybePostfixModifierPosition:l}=r(m);let b=!!l,u=a(b?y.substring(0,l):y);if(!u){if(!b){c=m+(c.length>0?" "+c:c);continue}if(u=a(y),!u){c=m+(c.length>0?" "+c:c);continue}b=!1}const h=Jl(x).join(":"),v=p?h+Gi:h,N=v+u;if(i.includes(N))continue;i.push(N);const j=n(u,b);for(let C=0;C<j.length;++C){const k=j[C];i.push(v+k)}c=m+(c.length>0?" "+c:c)}return c};function rd(){let t=0,s,r,a="";for(;t<arguments.length;)(s=arguments[t++])&&(r=Vi(s))&&(a&&(a+=" "),a+=r);return a}const Vi=t=>{if(typeof t=="string")return t;let s,r="";for(let a=0;a<t.length;a++)t[a]&&(s=Vi(t[a]))&&(r&&(r+=" "),r+=s);return r};function ad(t,...s){let r,a,n,i=o;function o(d){const m=s.reduce((x,p)=>p(x),t());return r=ed(m),a=r.cache.get,n=r.cache.set,i=c,c(d)}function c(d){const m=a(d);if(m)return m;const x=sd(d,r);return n(d,x),x}return function(){return i(rd.apply(null,arguments))}}const re=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},Hi=/^\[(?:([a-z-]+):)?(.+)\]$/i,nd=/^\d+\/\d+$/,id=new Set(["px","full","screen"]),od=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cd=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ld=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dd=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ud=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ze=t=>ts(t)||id.has(t)||nd.test(t),lt=t=>Cs(t,"length",yd),ts=t=>!!t&&!Number.isNaN(Number(t)),Ur=t=>Cs(t,"number",ts),Rs=t=>!!t&&Number.isInteger(Number(t)),hd=t=>t.endsWith("%")&&ts(t.slice(0,-1)),B=t=>Hi.test(t),dt=t=>od.test(t),md=new Set(["length","size","percentage"]),pd=t=>Cs(t,md,Ui),fd=t=>Cs(t,"position",Ui),gd=new Set(["image","url"]),xd=t=>Cs(t,gd,jd),bd=t=>Cs(t,"",vd),Is=()=>!0,Cs=(t,s,r)=>{const a=Hi.exec(t);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):r(a[2]):!1},yd=t=>cd.test(t)&&!ld.test(t),Ui=()=>!1,vd=t=>dd.test(t),jd=t=>ud.test(t),Nd=()=>{const t=re("colors"),s=re("spacing"),r=re("blur"),a=re("brightness"),n=re("borderColor"),i=re("borderRadius"),o=re("borderSpacing"),c=re("borderWidth"),d=re("contrast"),m=re("grayscale"),x=re("hueRotate"),p=re("invert"),y=re("gap"),l=re("gradientColorStops"),b=re("gradientColorStopPositions"),u=re("inset"),h=re("margin"),v=re("opacity"),N=re("padding"),j=re("saturate"),C=re("scale"),k=re("sepia"),P=re("skew"),w=re("space"),E=re("translate"),z=()=>["auto","contain","none"],se=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto",B,s],R=()=>[B,s],H=()=>["",Ze,lt],U=()=>["auto",ts,B],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],D=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],me=()=>["start","end","center","between","around","evenly","stretch"],oe=()=>["","0",B],qe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ge=()=>[ts,B];return{cacheSize:500,separator:":",theme:{colors:[Is],spacing:[Ze,lt],blur:["none","",dt,B],brightness:ge(),borderColor:[t],borderRadius:["none","","full",dt,B],borderSpacing:R(),borderWidth:H(),contrast:ge(),grayscale:oe(),hueRotate:ge(),invert:oe(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[hd,lt],inset:X(),margin:X(),opacity:ge(),padding:R(),saturate:ge(),scale:ge(),sepia:oe(),skew:ge(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",B]}],container:["container"],columns:[{columns:[dt]}],"break-after":[{"break-after":qe()}],"break-before":[{"break-before":qe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),B]}],overflow:[{overflow:se()}],"overflow-x":[{"overflow-x":se()}],"overflow-y":[{"overflow-y":se()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[u]}],"inset-x":[{"inset-x":[u]}],"inset-y":[{"inset-y":[u]}],start:[{start:[u]}],end:[{end:[u]}],top:[{top:[u]}],right:[{right:[u]}],bottom:[{bottom:[u]}],left:[{left:[u]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rs,B]}],basis:[{basis:X()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",B]}],grow:[{grow:oe()}],shrink:[{shrink:oe()}],order:[{order:["first","last","none",Rs,B]}],"grid-cols":[{"grid-cols":[Is]}],"col-start-end":[{col:["auto",{span:["full",Rs,B]},B]}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":[Is]}],"row-start-end":[{row:["auto",{span:[Rs,B]},B]}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",B]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",B]}],gap:[{gap:[y]}],"gap-x":[{"gap-x":[y]}],"gap-y":[{"gap-y":[y]}],"justify-content":[{justify:["normal",...me()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...me(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...me(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[h]}],mx:[{mx:[h]}],my:[{my:[h]}],ms:[{ms:[h]}],me:[{me:[h]}],mt:[{mt:[h]}],mr:[{mr:[h]}],mb:[{mb:[h]}],ml:[{ml:[h]}],"space-x":[{"space-x":[w]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[w]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",B,s]}],"min-w":[{"min-w":[B,s,"min","max","fit"]}],"max-w":[{"max-w":[B,s,"none","full","min","max","fit","prose",{screen:[dt]},dt]}],h:[{h:[B,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[B,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[B,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[B,s,"auto","min","max","fit"]}],"font-size":[{text:["base",dt,lt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ur]}],"font-family":[{font:[Is]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",B]}],"line-clamp":[{"line-clamp":["none",ts,Ur]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ze,B]}],"list-image":[{"list-image":["none",B]}],"list-style-type":[{list:["none","disc","decimal",B]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ze,lt]}],"underline-offset":[{"underline-offset":["auto",Ze,B]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",B]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",B]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),fd]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pd]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},xd]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[l]}],"gradient-via":[{via:[l]}],"gradient-to":[{to:[l]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:$()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[Ze,B]}],"outline-w":[{outline:[Ze,lt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ze,lt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",dt,bd]}],"shadow-color":[{shadow:[Is]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...D(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":D()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",dt,B]}],grayscale:[{grayscale:[m]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[p]}],saturate:[{saturate:[j]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[m]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",B]}],duration:[{duration:ge()}],ease:[{ease:["linear","in","out","in-out",B]}],delay:[{delay:ge()}],animate:[{animate:["none","spin","ping","pulse","bounce",B]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Rs,B]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",B]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",B]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",B]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ze,lt,Ur]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},wd=ad(Nd);function Be(...t){return wd(Zn(t))}const Cd=La("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Re({className:t,variant:s,size:r,asChild:a=!1,...n}){const i=a?Wn:"button";return e.jsx(i,{"data-slot":"button",className:Be(Cd({variant:s,size:r,className:t})),...n})}function Qe({className:t,...s}){return e.jsx("div",{"data-slot":"card",className:Be("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function Ke({className:t,...s}){return e.jsx("div",{"data-slot":"card-content",className:Be("px-6",t),...s})}const Sd=()=>{const[t,s]=g.useState(0),r=De(),a=[{title:"Bienvenido a YEGA",subtitle:"Tu aplicación de delivery favorita",description:"Descubre miles de restaurantes y tiendas cerca de ti. Comida deliciosa a solo un toque de distancia.",image:"/42.png"},{title:"Entrega rápida",subtitle:"En tiempo récord",description:"Recibe tus pedidos en tiempo record. Seguimiento en tiempo real de tu orden hasta tu puerta.",image:"/Running Orders.png"},{title:"Variedad infinita",subtitle:"Miles de opciones",description:"Explora una amplia variedad de restaurantes, desde comida casera hasta alta cocina internacional.",image:"/Food - Burgers.png"},{title:"¡Empecemos!",subtitle:"Todo listo para ordenar",description:"Regístrate o inicia sesión para comenzar a disfrutar de la mejor experiencia de delivery.",image:"/Home V.1.png"}],n=a[t],i=()=>{t<a.length-1?s(t+1):r("/register")},o=()=>{r("/login")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yega-dark via-yega-dark to-black flex flex-col",children:[e.jsx("div",{className:"flex justify-end p-4",children:e.jsx(Re,{variant:"ghost",className:"text-white/70",onClick:o,children:"Omitir"})}),e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center px-6",children:e.jsxs("div",{className:"w-full max-w-md text-center",children:[e.jsx("div",{className:"mb-8",children:e.jsx("img",{src:n.image,alt:n.title,className:"w-64 h-64 mx-auto object-contain",onError:c=>{c.target.src="/42.png"}})}),e.jsx(Qe,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:e.jsxs(Ke,{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-yega-gold mb-2",children:n.title}),e.jsx("h2",{className:"text-lg text-yega-silver mb-4",children:n.subtitle}),e.jsx("p",{className:"text-white/70 leading-relaxed",children:n.description})]})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-center mb-6 gap-2",children:a.map((c,d)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${d===t?"bg-yega-gold":"bg-white/30"}`},d))}),e.jsxs("div",{className:"flex gap-3",children:[t>0&&e.jsx(Re,{variant:"outline",className:"flex-1 btn-yega-secondary",onClick:()=>s(t-1),children:"Anterior"}),e.jsx(Re,{className:"flex-1 btn-yega-primary",onClick:i,children:t===a.length-1?"Comenzar":"Siguiente"})]})]})]})};function Ms({className:t,type:s,...r}){return e.jsx("input",{type:s,"data-slot":"input",className:Be("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}var kd="Label",Qi=g.forwardRef((t,s)=>e.jsx(Qs.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Qi.displayName=kd;var Ed=Qi;function Xt({className:t,...s}){return e.jsx(Ed,{"data-slot":"label",className:Be("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}const Pd=La("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function ca({className:t,variant:s,...r}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:Be(Pd({variant:s}),t),...r})}function Rd({className:t,...s}){return e.jsx("div",{"data-slot":"alert-title",className:Be("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function la({className:t,...s}){return e.jsx("div",{"data-slot":"alert-description",className:Be("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}const Id=({children:t,onClick:s,className:r=""})=>e.jsx("button",{type:"button",onClick:s,className:`inline-flex items-center justify-center w-9 h-9 rounded-full bg-white/10 hover:bg-white/15 border border-white/10 shadow-sm backdrop-blur ${r}`,children:t}),Fa=({title:t,left:s,right:r,children:a})=>e.jsxs("div",{className:"px-4 pt-3 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s||e.jsx("span",{className:"w-9"}),t&&e.jsx("h2",{className:"text-base font-semibold text-white/90",children:t})]}),e.jsx("div",{className:"flex items-center gap-2",children:r})]}),a?e.jsx("div",{className:"mt-2 text-center",children:a}):null]});Fa.IconButton=Id;const Ad=()=>{const[t,s]=g.useState(""),[r,a]=g.useState(!1),[n,i]=g.useState(""),[o,c]=g.useState(""),d=De(),m=async x=>{if(x.preventDefault(),!t){c("Por favor ingresa tu email");return}a(!0),c(""),i("");try{await O.post("/auth/forgot-password",{email:t}),i("Se ha enviado un enlace de recuperación a tu email")}catch(p){c(p.response?.data?.message||"Error al enviar el email de recuperación")}finally{a(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yega-dark via-yega-dark to-black",children:[e.jsx(Fa,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(Re,{variant:"ghost",onClick:()=>d("/login"),className:"text-white/70",children:"← Volver"}),e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Recuperar Contraseña"}),e.jsx("div",{className:"w-16"})]})}),e.jsx("div",{className:"px-6 py-8",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-yega-gold/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"🔒"})}),e.jsx("h2",{className:"text-2xl font-bold text-yega-gold mb-2",children:"¿Olvidaste tu contraseña?"}),e.jsx("p",{className:"text-white/70",children:"No te preocupes, te enviaremos un enlace para restablecerla"})]}),e.jsx(Qe,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:e.jsxs(Ke,{className:"p-6",children:[e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Xt,{htmlFor:"email",className:"form-label-yega",children:"Email"}),e.jsx(Ms,{id:"email",type:"email",value:t,onChange:x=>s(x.target.value),placeholder:"ejemplo@correo.com",className:"form-control-yega",disabled:r})]}),o&&e.jsx(ca,{variant:"destructive",children:e.jsx(la,{children:o})}),n&&e.jsx(ca,{className:"border-green-500/50 bg-green-500/10",children:e.jsx(la,{className:"text-green-400",children:n})}),e.jsx(Re,{type:"submit",className:"w-full btn-yega-primary",disabled:r,children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Enviando..."]}):"Enviar enlace de recuperación"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-white/10 text-center",children:e.jsxs("p",{className:"text-white/70 text-sm",children:["¿Recordaste tu contraseña?"," ",e.jsx(Re,{variant:"link",className:"text-yega-gold p-0",onClick:()=>d("/login"),children:"Iniciar sesión"})]})})]})})]})})]})},_d=()=>{const{user:t}=ue();return e.jsxs(ie,{className:"py-4",children:[e.jsx(ee,{className:"mb-4",children:e.jsxs(_,{children:[e.jsxs("h2",{className:"text-yega-gold",children:["¡Bienvenido, ",t?.nombre,"!"]}),e.jsx("p",{className:"text-muted",children:"Tienda - Panel de Control"})]})}),e.jsxs(ee,{children:[e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx(gc,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Gestionar Productos"}),e.jsx(I.Text,{children:"Agrega, edita o elimina productos de tu catálogo."}),e.jsx(ve.LinkContainer,{to:"/tienda/productos",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Productos"})})]})})}),e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx(jc,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Pedidos Recibidos"}),e.jsx(I.Text,{children:"Revisa y gestiona los pedidos de tus clientes."}),e.jsx(ve.LinkContainer,{to:"/tienda/pedidos",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Pedidos"})})]})})}),e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx(js,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Inventario"}),e.jsx(I.Text,{children:"Controla el stock de tus productos disponibles."}),e.jsx(ve.LinkContainer,{to:"/tienda/inventario",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Inventario"})})]})})}),e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx(ci,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Estadísticas"}),e.jsx(I.Text,{children:"Analiza tus ventas y rendimiento."}),e.jsx(ve.LinkContainer,{to:"/tienda/estadisticas",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Reportes"})})]})})})]}),e.jsx(ee,{children:e.jsx(_,{children:e.jsxs(I,{className:"card-yega",children:[e.jsx(I.Header,{children:e.jsx("h5",{className:"mb-0",children:"Información de la Tienda"})}),e.jsx(I.Body,{children:e.jsxs(ee,{children:[e.jsxs(_,{md:6,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",t?.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t?.email]})]}),e.jsxs(_,{md:6,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",t?.telefono]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rol:"})," Tienda"]})]})]})})]})})})]})},Ki=g.createContext(null),Wi=()=>g.useContext(Ki),Md=({children:t,minIntervalMs:s=3e3,minDeltaMeters:r=3})=>{const{user:a}=ue(),[n,i]=g.useState(!1),[o,c]=g.useState(null),[d,m]=g.useState(null),[x,p]=g.useState(!1),y=g.useRef(0),l=g.useRef(null),b=g.useRef(null);g.useEffect(()=>{if(!a||a.rol!=="repartidor"){console.log("BackgroundLocation: No es repartidor o no hay usuario autenticado"),p(!1);return}const v=async()=>{try{console.log("BackgroundLocation: Verificando pedidos activos...");const C=(await Y.orders.getAll({limit:10}))?.data?.pedidos||[],k=C.map(E=>E.estado);console.log(`BackgroundLocation: Estados de pedidos: ${JSON.stringify(k)}`);const P=C.filter(E=>E.repartidorId?._id===a.id||E.repartidorId===a.id);console.log(`BackgroundLocation: Pedidos asignados: ${P.length} de ${C.length}`);const w=P.some(E=>{const z=E.estado!=="entregado"&&E.estado!=="cancelado";return console.log(`Pedido ${E.numero_pedido||E._id}: estado=${E.estado}, activo=${z}`),z});console.log(`BackgroundLocation: Tiene pedidos activos: ${w}, pedidos asignados: ${P.length}`),p(w)}catch(j){console.error("BackgroundLocation: Error checking active orders:",j)}};v();const N=setInterval(v,3e4);return()=>clearInterval(N)},[a]),g.useEffect(()=>{if(!a||a.rol!=="repartidor"||!x){console.log(`BackgroundLocation: No se activa tracking. Usuario: ${!!a}, Rol: ${a?.rol}, Pedidos activos: ${x}`),u(),i(!1);return}if(console.log("BackgroundLocation: Iniciando rastreo de ubicación"),!("geolocation"in navigator)){c("Geolocation no soportada"),i(!1);return}let v=!1;c(null),navigator.permissions&&navigator.permissions.query&&navigator.permissions.query({name:"geolocation"}).then(j=>{j.state==="denied"&&c("Permiso de ubicación denegado")}).catch(()=>{});const N=async j=>{const C=Date.now(),k=C-y.current,P=j.latitude,w=j.longitude,E=l.current,z=!E||Td(E.lat,E.lng,P,w)>=r,se=k>s*5;if(!((k<s||!z)&&!se))try{console.log(`BackgroundLocation: Enviando ubicación: [${P.toFixed(6)}, ${w.toFixed(6)}]`),await Y.location.update({latitud:P,longitud:w}),console.log("BackgroundLocation: Ubicación enviada correctamente"),y.current=C,l.current={lat:P,lng:w}}catch(X){console.error("BackgroundLocation: Error al enviar ubicación:",X.message),c(X.response?.data?.message||X.message)}};try{const j=navigator.geolocation.watchPosition(C=>{i(!0),m({latitud:C.coords.latitude,longitud:C.coords.longitude,timestamp:Date.now()}),N(C.coords)},C=>{v||(c(C.message),i(!1))},{enableHighAccuracy:!0,maximumAge:2e3,timeout:1e4});b.current=j}catch(j){c(j.message),i(!1)}return()=>{v=!0,u()}},[a?.rol,x]);const u=()=>{if(b.current!==null&&navigator.geolocation&&navigator.geolocation.clearWatch)try{navigator.geolocation.clearWatch(b.current)}catch{}b.current=null},h={enabled:n,error:o,currentPosition:d,hasActiveDelivery:x};return e.jsx(Ki.Provider,{value:h,children:t})};function Td(t,s,r,a){const i=x=>x*Math.PI/180,o=i(r-t),c=i(a-s),d=Math.sin(o/2)**2+Math.cos(i(t))*Math.cos(i(r))*Math.sin(c/2)**2;return 6371e3*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}const Od=({className:t=""})=>{const{locationPermission:s,requestLocationPermission:r,isLocationDenied:a,isLocationSupported:n}=kr();return s==="granted"||!n?null:a?e.jsxs(ne,{variant:"danger",className:`d-flex align-items-center ${t}`,children:[e.jsx(yc,{className:"me-2"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("strong",{children:"Ubicación denegada"}),e.jsxs("div",{className:"small",children:["Para trabajar como repartidor es necesario compartir tu ubicación. Por favor, habilita la ubicación en la configuración del navegador.",window.location.pathname!=="/repartidor/ubicacion"&&e.jsx("div",{className:"mt-1",children:e.jsx("a",{href:"/repartidor/ubicacion",className:"alert-link",children:"Mientras tanto, usa la actualización manual"})})]})]})]}):s===null?e.jsxs(ne,{variant:"info",className:`d-flex align-items-center ${t}`,children:[e.jsx(Jr,{className:"me-2"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("strong",{children:"Mejora tu experiencia"}),e.jsx("div",{className:"small",children:"Permítenos acceder a tu ubicación para mostrarte las mejores opciones cercanas."})]}),e.jsx(M,{size:"sm",variant:"outline-primary",onClick:r,className:"ms-2",children:"Permitir"})]}):null};delete Rt.Icon.Default.prototype._getIconUrl;Rt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const $a=(t,s)=>Rt.divIcon({className:"custom-marker",html:`
      <div style="
        background-color: ${t};
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        display: flex;
        align-items: center;
        justify-content: center;
      ">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          ${s}
        </svg>
      </div>
    `,iconSize:[36,36],iconAnchor:[18,18],popupAnchor:[0,-18]}),Ld='<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',zd='<path d="M3 9l2-4h14l2 4"></path><path d="M3 9v12h18V9"></path><path d="M3 13h18"></path><path d="M8 21V13"></path><path d="M16 21V13"></path>',Fd='<path d="M17 18.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"></path><path d="M5 18.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"></path><path d="M15 5h2a1 1 0 0 1 1 1v3.5h-4V10"></path><path d="M5 10h3.5L9 12.5h5M11.5 5h-7l-1 3h5.5"></path><path d="M12 17.5V15l-3-1.5v-2M3 18.5v-7"></path><path d="M19 18.5v-7L12.5 9"></path>',$d=$a("#28a745",Ld),Dd=$a("#ffc107",zd),Bd=$a("#007bff",Fd),qd=({order:t,deliveryLocation:s=null,height:r="400px",className:a=""})=>{if(!t)return null;const n=t.tiendaId?.ubicacion,i=t.direccion_envio,c=s?[s.latitud,s.longitud]:n?[n.latitud,n.longitud]:i?.latitud?[i.latitud,i.longitud]:[19.4326,-99.1332],d=g.useMemo(()=>(()=>{switch(t.estado){case"pendiente":case"confirmado":case"preparando":return{color:"#6c757d",dashArray:"6 6",weight:3};case"listo":return{color:"#0d6efd",dashArray:"6 6",weight:3};case"camino_tienda":return{color:"#17a2b8",weight:4};case"recolectado":return{color:"#6f42c1",weight:4};case"en_camino":return{color:"#ffc107",weight:4};case"entregado":return{color:"#28a745",weight:4};case"cancelado":return{color:"#dc3545",dashArray:"4 8",weight:3};default:return{color:"#6c757d",weight:3}}})(),[t.estado]);return e.jsx("div",{className:a,children:e.jsxs(ka,{center:c,zoom:14,style:{height:r,width:"100%"},scrollWheelZoom:!1,children:[e.jsx(Ea,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n&&e.jsx(es,{position:[n.latitud,n.longitud],icon:Dd,children:e.jsx(zr,{className:"map-tooltip",children:e.jsxs("div",{children:[e.jsx("strong",{children:t.tiendaId?.nombre||"Tienda"}),e.jsx("br",{}),e.jsx("small",{children:"Origen del pedido"}),e.jsx("br",{}),e.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${n.latitud},${n.longitud}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary mt-1",children:"Ir con Google Maps"})]})})}),i?.latitud&&i?.longitud&&e.jsx(es,{position:[i.latitud,i.longitud],icon:$d,children:e.jsx(zr,{className:"map-tooltip",children:e.jsxs("div",{children:[e.jsx("strong",{children:t.clienteId?.nombre||"Cliente"}),e.jsx("br",{}),e.jsx("small",{children:"Dirección de entrega"}),e.jsx("br",{}),e.jsxs("div",{className:"small",children:[i.calle," ",i.numero]}),e.jsx("div",{className:"small",children:i.ciudad}),e.jsx("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${i.latitud},${i.longitud}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-success mt-1",children:"Ir con Google Maps"})]})})}),s&&e.jsx(es,{position:[s.latitud,s.longitud],icon:Bd,children:e.jsx(zr,{className:"map-tooltip",children:e.jsxs("div",{children:[e.jsx("strong",{children:t.repartidorId?.nombre||"Repartidor"}),e.jsx("br",{}),e.jsx("small",{children:"Ubicación actual"}),e.jsx("br",{}),e.jsx("small",{children:"Actualizado hace unos momentos"})]})})}),n&&i?.latitud&&i?.longitud&&e.jsx(Os,{positions:[[n.latitud,n.longitud],[i.latitud,i.longitud]],pathOptions:d}),s&&i?.latitud&&i?.longitud&&["recolectado","en_camino"].includes(t.estado)&&e.jsx(Os,{positions:[[s.latitud,s.longitud],[i.latitud,i.longitud]],pathOptions:{...d,dashArray:t.estado==="recolectado"?"5 5":null}}),s&&n&&t.estado==="camino_tienda"&&e.jsx(Os,{positions:[[s.latitud,s.longitud],[n.latitud,n.longitud]],pathOptions:d})]})})};var Ss=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vt=typeof window>"u"||"Deno"in globalThis;function ye(){}function Gd(t,s){return typeof t=="function"?t(s):t}function da(t){return typeof t=="number"&&t>=0&&t!==1/0}function Yi(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Ct(t,s){return typeof t=="function"?t(s):t}function Me(t,s){return typeof t=="function"?t(s):t}function kn(t,s){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:c}=t;if(o){if(a){if(s.queryHash!==Da(o,s.options))return!1}else if(!qs(s.queryKey,o))return!1}if(r!=="all"){const d=s.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||n&&n!==s.state.fetchStatus||i&&!i(s))}function En(t,s){const{exact:r,status:a,predicate:n,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(Ht(s.options.mutationKey)!==Ht(i))return!1}else if(!qs(s.options.mutationKey,i))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function Da(t,s){return(s?.queryKeyHashFn||Ht)(t)}function Ht(t){return JSON.stringify(t,(s,r)=>ua(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function qs(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>qs(t[r],s[r])):!1}function Xi(t,s){if(t===s)return t;const r=Pn(t)&&Pn(s);if(r||ua(t)&&ua(s)){const a=r?t:Object.keys(t),n=a.length,i=r?s:Object.keys(s),o=i.length,c=r?[]:{},d=new Set(a);let m=0;for(let x=0;x<o;x++){const p=r?x:i[x];(!r&&d.has(p)||r)&&t[p]===void 0&&s[p]===void 0?(c[p]=void 0,m++):(c[p]=Xi(t[p],s[p]),c[p]===t[p]&&t[p]!==void 0&&m++)}return n===o&&m===n?t:c}return s}function Nr(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Pn(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ua(t){if(!Rn(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!Rn(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Rn(t){return Object.prototype.toString.call(t)==="[object Object]"}function Vd(t){return new Promise(s=>{setTimeout(s,t)})}function ha(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?Xi(t,s):s}function Hd(t,s,r=0){const a=[...t,s];return r&&a.length>r?a.slice(1):a}function Ud(t,s,r=0){const a=[s,...t];return r&&a.length>r?a.slice(0,-1):a}var Ba=Symbol();function Zi(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===Ba?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Ji(t,s){return typeof t=="function"?t(...s):!!t}var At,mt,ss,$n,Qd=($n=class extends Ss{constructor(){super();T(this,At);T(this,mt);T(this,ss);A(this,ss,s=>{if(!Vt&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){f(this,mt)||this.setEventListener(f(this,ss))}onUnsubscribe(){var s;this.hasListeners()||((s=f(this,mt))==null||s.call(this),A(this,mt,void 0))}setEventListener(s){var r;A(this,ss,s),(r=f(this,mt))==null||r.call(this),A(this,mt,s(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(s){f(this,At)!==s&&(A(this,At,s),this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){return typeof f(this,At)=="boolean"?f(this,At):globalThis.document?.visibilityState!=="hidden"}},At=new WeakMap,mt=new WeakMap,ss=new WeakMap,$n),qa=new Qd,rs,pt,as,Dn,Kd=(Dn=class extends Ss{constructor(){super();T(this,rs,!0);T(this,pt);T(this,as);A(this,as,s=>{if(!Vt&&window.addEventListener){const r=()=>s(!0),a=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",a)}}})}onSubscribe(){f(this,pt)||this.setEventListener(f(this,as))}onUnsubscribe(){var s;this.hasListeners()||((s=f(this,pt))==null||s.call(this),A(this,pt,void 0))}setEventListener(s){var r;A(this,as,s),(r=f(this,pt))==null||r.call(this),A(this,pt,s(this.setOnline.bind(this)))}setOnline(s){f(this,rs)!==s&&(A(this,rs,s),this.listeners.forEach(a=>{a(s)}))}isOnline(){return f(this,rs)}},rs=new WeakMap,pt=new WeakMap,as=new WeakMap,Dn),wr=new Kd;function ma(){let t,s;const r=new Promise((n,i)=>{t=n,s=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}function Wd(t){return Math.min(1e3*2**t,3e4)}function eo(t){return(t??"online")==="online"?wr.isOnline():!0}var pa=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function to(t){let s=!1,r=0,a;const n=ma(),i=()=>n.status!=="pending",o=u=>{if(!i()){const h=new pa(u);y(h),t.onCancel?.(h)}},c=()=>{s=!0},d=()=>{s=!1},m=()=>qa.isFocused()&&(t.networkMode==="always"||wr.isOnline())&&t.canRun(),x=()=>eo(t.networkMode)&&t.canRun(),p=u=>{i()||(a?.(),n.resolve(u))},y=u=>{i()||(a?.(),n.reject(u))},l=()=>new Promise(u=>{a=h=>{(i()||m())&&u(h)},t.onPause?.()}).then(()=>{a=void 0,i()||t.onContinue?.()}),b=()=>{if(i())return;let u;const h=r===0?t.initialPromise:void 0;try{u=h??t.fn()}catch(v){u=Promise.reject(v)}Promise.resolve(u).then(p).catch(v=>{if(i())return;const N=t.retry??(Vt?0:3),j=t.retryDelay??Wd,C=typeof j=="function"?j(r,v):j,k=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,v);if(s||!k){y(v);return}r++,t.onFail?.(r,v),Vd(C).then(()=>m()?void 0:l()).then(()=>{s?y(v):b()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(a?.(),n),cancelRetry:c,continueRetry:d,canStart:x,start:()=>(x()?b():l().then(b),n)}}var Yd=t=>setTimeout(t,0);function Xd(){let t=[],s=0,r=c=>{c()},a=c=>{c()},n=Yd;const i=c=>{s?t.push(c):n(()=>{r(c)})},o=()=>{const c=t;t=[],c.length&&n(()=>{a(()=>{c.forEach(d=>{r(d)})})})};return{batch:c=>{let d;s++;try{d=c()}finally{s--,s||o()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{a=c},setScheduler:c=>{n=c}}}var he=Xd(),_t,Bn,so=(Bn=class{constructor(){T(this,_t)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),da(this.gcTime)&&A(this,_t,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Vt?1/0:5*60*1e3))}clearGcTimeout(){f(this,_t)&&(clearTimeout(f(this,_t)),A(this,_t,void 0))}},_t=new WeakMap,Bn),ns,is,Ie,Mt,pe,Gs,Tt,Le,Je,qn,Zd=(qn=class extends so{constructor(s){super();T(this,Le);T(this,ns);T(this,is);T(this,Ie);T(this,Mt);T(this,pe);T(this,Gs);T(this,Tt);A(this,Tt,!1),A(this,Gs,s.defaultOptions),this.setOptions(s.options),this.observers=[],A(this,Mt,s.client),A(this,Ie,f(this,Mt).getQueryCache()),this.queryKey=s.queryKey,this.queryHash=s.queryHash,A(this,ns,Jd(this.options)),this.state=s.state??f(this,ns),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return f(this,pe)?.promise}setOptions(s){this.options={...f(this,Gs),...s},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&f(this,Ie).remove(this)}setData(s,r){const a=ha(this.state.data,s,this.options);return q(this,Le,Je).call(this,{data:a,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),a}setState(s,r){q(this,Le,Je).call(this,{type:"setState",state:s,setStateOptions:r})}cancel(s){const r=f(this,pe)?.promise;return f(this,pe)?.cancel(s),r?r.then(ye).catch(ye):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(f(this,ns))}isActive(){return this.observers.some(s=>Me(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ba||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Ct(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!Yi(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),f(this,pe)?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),f(this,pe)?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),f(this,Ie).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(f(this,pe)&&(f(this,Tt)?f(this,pe).cancel({revert:!0}):f(this,pe).cancelRetry()),this.scheduleGc()),f(this,Ie).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||q(this,Le,Je).call(this,{type:"invalidate"})}async fetch(s,r){if(this.state.fetchStatus!=="idle"&&f(this,pe)?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(f(this,pe))return f(this,pe).continueRetry(),f(this,pe).promise}if(s&&this.setOptions(s),!this.options.queryFn){const d=this.observers.find(m=>m.options.queryFn);d&&this.setOptions(d.options)}const a=new AbortController,n=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(A(this,Tt,!0),a.signal)})},i=()=>{const d=Zi(this.options,r),x=(()=>{const p={client:f(this,Mt),queryKey:this.queryKey,meta:this.meta};return n(p),p})();return A(this,Tt,!1),this.options.persister?this.options.persister(d,x,this):d(x)},c=(()=>{const d={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:f(this,Mt),state:this.state,fetchFn:i};return n(d),d})();this.options.behavior?.onFetch(c,this),A(this,is,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&q(this,Le,Je).call(this,{type:"fetch",meta:c.fetchOptions?.meta}),A(this,pe,to({initialPromise:r?.initialPromise,fn:c.fetchFn,onCancel:d=>{d instanceof pa&&d.revert&&this.setState({...f(this,is),fetchStatus:"idle"}),a.abort()},onFail:(d,m)=>{q(this,Le,Je).call(this,{type:"failed",failureCount:d,error:m})},onPause:()=>{q(this,Le,Je).call(this,{type:"pause"})},onContinue:()=>{q(this,Le,Je).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0}));try{const d=await f(this,pe).start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),f(this,Ie).config.onSuccess?.(d,this),f(this,Ie).config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof pa){if(d.silent)return f(this,pe).promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw q(this,Le,Je).call(this,{type:"error",error:d}),f(this,Ie).config.onError?.(d,this),f(this,Ie).config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}},ns=new WeakMap,is=new WeakMap,Ie=new WeakMap,Mt=new WeakMap,pe=new WeakMap,Gs=new WeakMap,Tt=new WeakMap,Le=new WeakSet,Je=function(s){const r=a=>{switch(s.type){case"failed":return{...a,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...ro(a.data,this.options),fetchMeta:s.meta??null};case"success":const n={...a,data:s.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return A(this,is,s.manual?n:void 0),n;case"error":const i=s.error;return{...a,error:i,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...s.state}}};this.state=r(this.state),he.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),f(this,Ie).notify({query:this,type:"updated",action:s})})},qn);function ro(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:eo(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Jd(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ge,Gn,eu=(Gn=class extends Ss{constructor(s={}){super();T(this,Ge);this.config=s,A(this,Ge,new Map)}build(s,r,a){const n=r.queryKey,i=r.queryHash??Da(n,r);let o=this.get(i);return o||(o=new Zd({client:s,queryKey:n,queryHash:i,options:s.defaultQueryOptions(r),state:a,defaultOptions:s.getQueryDefaults(n)}),this.add(o)),o}add(s){f(this,Ge).has(s.queryHash)||(f(this,Ge).set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=f(this,Ge).get(s.queryHash);r&&(s.destroy(),r===s&&f(this,Ge).delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){he.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return f(this,Ge).get(s)}getAll(){return[...f(this,Ge).values()]}find(s){const r={exact:!0,...s};return this.getAll().find(a=>kn(r,a))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(a=>kn(s,a)):r}notify(s){he.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){he.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){he.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},Ge=new WeakMap,Gn),Ve,xe,Ot,He,ht,Vn,tu=(Vn=class extends so{constructor(s){super();T(this,He);T(this,Ve);T(this,xe);T(this,Ot);this.mutationId=s.mutationId,A(this,xe,s.mutationCache),A(this,Ve,[]),this.state=s.state||ao(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){f(this,Ve).includes(s)||(f(this,Ve).push(s),this.clearGcTimeout(),f(this,xe).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){A(this,Ve,f(this,Ve).filter(r=>r!==s)),this.scheduleGc(),f(this,xe).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){f(this,Ve).length||(this.state.status==="pending"?this.scheduleGc():f(this,xe).remove(this))}continue(){return f(this,Ot)?.continue()??this.execute(this.state.variables)}async execute(s){const r=()=>{q(this,He,ht).call(this,{type:"continue"})};A(this,Ot,to({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{q(this,He,ht).call(this,{type:"failed",failureCount:i,error:o})},onPause:()=>{q(this,He,ht).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>f(this,xe).canRun(this)}));const a=this.state.status==="pending",n=!f(this,Ot).canStart();try{if(a)r();else{q(this,He,ht).call(this,{type:"pending",variables:s,isPaused:n}),await f(this,xe).config.onMutate?.(s,this);const o=await this.options.onMutate?.(s);o!==this.state.context&&q(this,He,ht).call(this,{type:"pending",context:o,variables:s,isPaused:n})}const i=await f(this,Ot).start();return await f(this,xe).config.onSuccess?.(i,s,this.state.context,this),await this.options.onSuccess?.(i,s,this.state.context),await f(this,xe).config.onSettled?.(i,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(i,null,s,this.state.context),q(this,He,ht).call(this,{type:"success",data:i}),i}catch(i){try{throw await f(this,xe).config.onError?.(i,s,this.state.context,this),await this.options.onError?.(i,s,this.state.context),await f(this,xe).config.onSettled?.(void 0,i,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,i,s,this.state.context),i}finally{q(this,He,ht).call(this,{type:"error",error:i})}}finally{f(this,xe).runNext(this)}}},Ve=new WeakMap,xe=new WeakMap,Ot=new WeakMap,He=new WeakSet,ht=function(s){const r=a=>{switch(s.type){case"failed":return{...a,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...a,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:s.error,failureCount:a.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),he.batch(()=>{f(this,Ve).forEach(a=>{a.onMutationUpdate(s)}),f(this,xe).notify({mutation:this,type:"updated",action:s})})},Vn);function ao(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var st,ze,Vs,Hn,su=(Hn=class extends Ss{constructor(s={}){super();T(this,st);T(this,ze);T(this,Vs);this.config=s,A(this,st,new Set),A(this,ze,new Map),A(this,Vs,0)}build(s,r,a){const n=new tu({mutationCache:this,mutationId:++Js(this,Vs)._,options:s.defaultMutationOptions(r),state:a});return this.add(n),n}add(s){f(this,st).add(s);const r=cr(s);if(typeof r=="string"){const a=f(this,ze).get(r);a?a.push(s):f(this,ze).set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(f(this,st).delete(s)){const r=cr(s);if(typeof r=="string"){const a=f(this,ze).get(r);if(a)if(a.length>1){const n=a.indexOf(s);n!==-1&&a.splice(n,1)}else a[0]===s&&f(this,ze).delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=cr(s);if(typeof r=="string"){const n=f(this,ze).get(r)?.find(i=>i.state.status==="pending");return!n||n===s}else return!0}runNext(s){const r=cr(s);return typeof r=="string"?f(this,ze).get(r)?.find(n=>n!==s&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){he.batch(()=>{f(this,st).forEach(s=>{this.notify({type:"removed",mutation:s})}),f(this,st).clear(),f(this,ze).clear()})}getAll(){return Array.from(f(this,st))}find(s){const r={exact:!0,...s};return this.getAll().find(a=>En(r,a))}findAll(s={}){return this.getAll().filter(r=>En(s,r))}notify(s){he.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return he.batch(()=>Promise.all(s.map(r=>r.continue().catch(ye))))}},st=new WeakMap,ze=new WeakMap,Vs=new WeakMap,Hn);function cr(t){return t.options.scope?.id}function In(t){return{onFetch:(s,r)=>{const a=s.options,n=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],o=s.state.data?.pageParams||[];let c={pages:[],pageParams:[]},d=0;const m=async()=>{let x=!1;const p=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(s.signal.aborted?x=!0:s.signal.addEventListener("abort",()=>{x=!0}),s.signal)})},y=Zi(s.options,s.fetchOptions),l=async(b,u,h)=>{if(x)return Promise.reject();if(u==null&&b.pages.length)return Promise.resolve(b);const N=(()=>{const P={client:s.client,queryKey:s.queryKey,pageParam:u,direction:h?"backward":"forward",meta:s.options.meta};return p(P),P})(),j=await y(N),{maxPages:C}=s.options,k=h?Ud:Hd;return{pages:k(b.pages,j,C),pageParams:k(b.pageParams,u,C)}};if(n&&i.length){const b=n==="backward",u=b?ru:An,h={pages:i,pageParams:o},v=u(a,h);c=await l(h,v,b)}else{const b=t??i.length;do{const u=d===0?o[0]??a.initialPageParam:An(a,c);if(d>0&&u==null)break;c=await l(c,u),d++}while(d<b)}return c};s.options.persister?s.fetchFn=()=>s.options.persister?.(m,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=m}}}function An(t,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,r[a],r):void 0}function ru(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var ce,ft,gt,os,cs,xt,ls,ds,Un,au=(Un=class{constructor(t={}){T(this,ce);T(this,ft);T(this,gt);T(this,os);T(this,cs);T(this,xt);T(this,ls);T(this,ds);A(this,ce,t.queryCache||new eu),A(this,ft,t.mutationCache||new su),A(this,gt,t.defaultOptions||{}),A(this,os,new Map),A(this,cs,new Map),A(this,xt,0)}mount(){Js(this,xt)._++,f(this,xt)===1&&(A(this,ls,qa.subscribe(async t=>{t&&(await this.resumePausedMutations(),f(this,ce).onFocus())})),A(this,ds,wr.subscribe(async t=>{t&&(await this.resumePausedMutations(),f(this,ce).onOnline())})))}unmount(){var t,s;Js(this,xt)._--,f(this,xt)===0&&((t=f(this,ls))==null||t.call(this),A(this,ls,void 0),(s=f(this,ds))==null||s.call(this),A(this,ds,void 0))}isFetching(t){return f(this,ce).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return f(this,ft).findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return f(this,ce).get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=f(this,ce).build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(Ct(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(t){return f(this,ce).findAll(t).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(t,s,r){const a=this.defaultQueryOptions({queryKey:t}),i=f(this,ce).get(a.queryHash)?.state.data,o=Gd(s,i);if(o!==void 0)return f(this,ce).build(this,a).setData(o,{...r,manual:!0})}setQueriesData(t,s,r){return he.batch(()=>f(this,ce).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return f(this,ce).get(s.queryHash)?.state}removeQueries(t){const s=f(this,ce);he.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=f(this,ce);return he.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},a=he.batch(()=>f(this,ce).findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then(ye).catch(ye)}invalidateQueries(t,s={}){return he.batch(()=>(f(this,ce).findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=he.batch(()=>f(this,ce).findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(ye)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(ye)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=f(this,ce).build(this,s);return r.isStaleByTime(Ct(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ye).catch(ye)}fetchInfiniteQuery(t){return t.behavior=In(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ye).catch(ye)}ensureInfiniteQueryData(t){return t.behavior=In(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return wr.isOnline()?f(this,ft).resumePausedMutations():Promise.resolve()}getQueryCache(){return f(this,ce)}getMutationCache(){return f(this,ft)}getDefaultOptions(){return f(this,gt)}setDefaultOptions(t){A(this,gt,t)}setQueryDefaults(t,s){f(this,os).set(Ht(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...f(this,os).values()],r={};return s.forEach(a=>{qs(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,s){f(this,cs).set(Ht(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...f(this,cs).values()],r={};return s.forEach(a=>{qs(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...f(this,gt).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=Da(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===Ba&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...f(this,gt).mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){f(this,ce).clear(),f(this,ft).clear()}},ce=new WeakMap,ft=new WeakMap,gt=new WeakMap,os=new WeakMap,cs=new WeakMap,xt=new WeakMap,ls=new WeakMap,ds=new WeakMap,Un),je,K,Hs,be,Lt,us,rt,bt,Us,hs,ms,zt,Ft,yt,ps,J,Ts,fa,ga,xa,ba,ya,va,ja,no,Qn,nu=(Qn=class extends Ss{constructor(s,r){super();T(this,J);T(this,je);T(this,K);T(this,Hs);T(this,be);T(this,Lt);T(this,us);T(this,rt);T(this,bt);T(this,Us);T(this,hs);T(this,ms);T(this,zt);T(this,Ft);T(this,yt);T(this,ps,new Set);this.options=r,A(this,je,s),A(this,bt,null),A(this,rt,ma()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(f(this,K).addObserver(this),_n(f(this,K),this.options)?q(this,J,Ts).call(this):this.updateResult(),q(this,J,ba).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Na(f(this,K),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Na(f(this,K),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,q(this,J,ya).call(this),q(this,J,va).call(this),f(this,K).removeObserver(this)}setOptions(s){const r=this.options,a=f(this,K);if(this.options=f(this,je).defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Me(this.options.enabled,f(this,K))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");q(this,J,ja).call(this),f(this,K).setOptions(this.options),r._defaulted&&!Nr(this.options,r)&&f(this,je).getQueryCache().notify({type:"observerOptionsUpdated",query:f(this,K),observer:this});const n=this.hasListeners();n&&Mn(f(this,K),a,this.options,r)&&q(this,J,Ts).call(this),this.updateResult(),n&&(f(this,K)!==a||Me(this.options.enabled,f(this,K))!==Me(r.enabled,f(this,K))||Ct(this.options.staleTime,f(this,K))!==Ct(r.staleTime,f(this,K)))&&q(this,J,fa).call(this);const i=q(this,J,ga).call(this);n&&(f(this,K)!==a||Me(this.options.enabled,f(this,K))!==Me(r.enabled,f(this,K))||i!==f(this,yt))&&q(this,J,xa).call(this,i)}getOptimisticResult(s){const r=f(this,je).getQueryCache().build(f(this,je),s),a=this.createResult(r,s);return ou(this,a)&&(A(this,be,a),A(this,us,this.options),A(this,Lt,f(this,K).state)),a}getCurrentResult(){return f(this,be)}trackResult(s,r){return new Proxy(s,{get:(a,n)=>(this.trackProp(n),r?.(n),n==="promise"&&!this.options.experimental_prefetchInRender&&f(this,rt).status==="pending"&&f(this,rt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(a,n))})}trackProp(s){f(this,ps).add(s)}getCurrentQuery(){return f(this,K)}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=f(this,je).defaultQueryOptions(s),a=f(this,je).getQueryCache().build(f(this,je),r);return a.fetch().then(()=>this.createResult(a,r))}fetch(s){return q(this,J,Ts).call(this,{...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),f(this,be)))}createResult(s,r){const a=f(this,K),n=this.options,i=f(this,be),o=f(this,Lt),c=f(this,us),m=s!==a?s.state:f(this,Hs),{state:x}=s;let p={...x},y=!1,l;if(r._optimisticResults){const z=this.hasListeners(),se=!z&&_n(s,r),X=z&&Mn(s,a,r,n);(se||X)&&(p={...p,...ro(x.data,s.options)}),r._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:b,errorUpdatedAt:u,status:h}=p;l=p.data;let v=!1;if(r.placeholderData!==void 0&&l===void 0&&h==="pending"){let z;i?.isPlaceholderData&&r.placeholderData===c?.placeholderData?(z=i.data,v=!0):z=typeof r.placeholderData=="function"?r.placeholderData(f(this,ms)?.state.data,f(this,ms)):r.placeholderData,z!==void 0&&(h="success",l=ha(i?.data,z,r),y=!0)}if(r.select&&l!==void 0&&!v)if(i&&l===o?.data&&r.select===f(this,Us))l=f(this,hs);else try{A(this,Us,r.select),l=r.select(l),l=ha(i?.data,l,r),A(this,hs,l),A(this,bt,null)}catch(z){A(this,bt,z)}f(this,bt)&&(b=f(this,bt),l=f(this,hs),u=Date.now(),h="error");const N=p.fetchStatus==="fetching",j=h==="pending",C=h==="error",k=j&&N,P=l!==void 0,E={status:h,fetchStatus:p.fetchStatus,isPending:j,isSuccess:h==="success",isError:C,isInitialLoading:k,isLoading:k,data:l,dataUpdatedAt:p.dataUpdatedAt,error:b,errorUpdatedAt:u,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>m.dataUpdateCount||p.errorUpdateCount>m.errorUpdateCount,isFetching:N,isRefetching:N&&!j,isLoadingError:C&&!P,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&P,isStale:Ga(s,r),refetch:this.refetch,promise:f(this,rt),isEnabled:Me(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const z=R=>{E.status==="error"?R.reject(E.error):E.data!==void 0&&R.resolve(E.data)},se=()=>{const R=A(this,rt,E.promise=ma());z(R)},X=f(this,rt);switch(X.status){case"pending":s.queryHash===a.queryHash&&z(X);break;case"fulfilled":(E.status==="error"||E.data!==X.value)&&se();break;case"rejected":(E.status!=="error"||E.error!==X.reason)&&se();break}}return E}updateResult(){const s=f(this,be),r=this.createResult(f(this,K),this.options);if(A(this,Lt,f(this,K).state),A(this,us,this.options),f(this,Lt).data!==void 0&&A(this,ms,f(this,K)),Nr(r,s))return;A(this,be,r);const a=()=>{if(!s)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!f(this,ps).size)return!0;const o=new Set(i??f(this,ps));return this.options.throwOnError&&o.add("error"),Object.keys(f(this,be)).some(c=>{const d=c;return f(this,be)[d]!==s[d]&&o.has(d)})};q(this,J,no).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&q(this,J,ba).call(this)}},je=new WeakMap,K=new WeakMap,Hs=new WeakMap,be=new WeakMap,Lt=new WeakMap,us=new WeakMap,rt=new WeakMap,bt=new WeakMap,Us=new WeakMap,hs=new WeakMap,ms=new WeakMap,zt=new WeakMap,Ft=new WeakMap,yt=new WeakMap,ps=new WeakMap,J=new WeakSet,Ts=function(s){q(this,J,ja).call(this);let r=f(this,K).fetch(this.options,s);return s?.throwOnError||(r=r.catch(ye)),r},fa=function(){q(this,J,ya).call(this);const s=Ct(this.options.staleTime,f(this,K));if(Vt||f(this,be).isStale||!da(s))return;const a=Yi(f(this,be).dataUpdatedAt,s)+1;A(this,zt,setTimeout(()=>{f(this,be).isStale||this.updateResult()},a))},ga=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(f(this,K)):this.options.refetchInterval)??!1},xa=function(s){q(this,J,va).call(this),A(this,yt,s),!(Vt||Me(this.options.enabled,f(this,K))===!1||!da(f(this,yt))||f(this,yt)===0)&&A(this,Ft,setInterval(()=>{(this.options.refetchIntervalInBackground||qa.isFocused())&&q(this,J,Ts).call(this)},f(this,yt)))},ba=function(){q(this,J,fa).call(this),q(this,J,xa).call(this,q(this,J,ga).call(this))},ya=function(){f(this,zt)&&(clearTimeout(f(this,zt)),A(this,zt,void 0))},va=function(){f(this,Ft)&&(clearInterval(f(this,Ft)),A(this,Ft,void 0))},ja=function(){const s=f(this,je).getQueryCache().build(f(this,je),this.options);if(s===f(this,K))return;const r=f(this,K);A(this,K,s),A(this,Hs,s.state),this.hasListeners()&&(r?.removeObserver(this),s.addObserver(this))},no=function(s){he.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(f(this,be))}),f(this,je).getQueryCache().notify({query:f(this,K),type:"observerResultsUpdated"})})},Qn);function iu(t,s){return Me(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function _n(t,s){return iu(t,s)||t.state.data!==void 0&&Na(t,s,s.refetchOnMount)}function Na(t,s,r){if(Me(s.enabled,t)!==!1&&Ct(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&Ga(t,s)}return!1}function Mn(t,s,r,a){return(t!==s||Me(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&Ga(t,r)}function Ga(t,s){return Me(s.enabled,t)!==!1&&t.isStaleByTime(Ct(s.staleTime,t))}function ou(t,s){return!Nr(t.getCurrentResult(),s)}var vt,jt,Ne,at,it,fr,wa,Kn,cu=(Kn=class extends Ss{constructor(r,a){super();T(this,it);T(this,vt);T(this,jt);T(this,Ne);T(this,at);A(this,vt,r),this.setOptions(a),this.bindMethods(),q(this,it,fr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){const a=this.options;this.options=f(this,vt).defaultMutationOptions(r),Nr(this.options,a)||f(this,vt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:f(this,Ne),observer:this}),a?.mutationKey&&this.options.mutationKey&&Ht(a.mutationKey)!==Ht(this.options.mutationKey)?this.reset():f(this,Ne)?.state.status==="pending"&&f(this,Ne).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||f(this,Ne)?.removeObserver(this)}onMutationUpdate(r){q(this,it,fr).call(this),q(this,it,wa).call(this,r)}getCurrentResult(){return f(this,jt)}reset(){f(this,Ne)?.removeObserver(this),A(this,Ne,void 0),q(this,it,fr).call(this),q(this,it,wa).call(this)}mutate(r,a){return A(this,at,a),f(this,Ne)?.removeObserver(this),A(this,Ne,f(this,vt).getMutationCache().build(f(this,vt),this.options)),f(this,Ne).addObserver(this),f(this,Ne).execute(r)}},vt=new WeakMap,jt=new WeakMap,Ne=new WeakMap,at=new WeakMap,it=new WeakSet,fr=function(){const r=f(this,Ne)?.state??ao();A(this,jt,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},wa=function(r){he.batch(()=>{if(f(this,at)&&this.hasListeners()){const a=f(this,jt).variables,n=f(this,jt).context;r?.type==="success"?(f(this,at).onSuccess?.(r.data,a,n),f(this,at).onSettled?.(r.data,null,a,n)):r?.type==="error"&&(f(this,at).onError?.(r.error,a,n),f(this,at).onSettled?.(void 0,r.error,a,n))}this.listeners.forEach(a=>{a(f(this,jt))})})},Kn),io=g.createContext(void 0),Va=t=>{const s=g.useContext(io);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},lu=({client:t,children:s})=>(g.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(io.Provider,{value:t,children:s})),oo=g.createContext(!1),du=()=>g.useContext(oo);oo.Provider;function uu(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var hu=g.createContext(uu()),mu=()=>g.useContext(hu),pu=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},fu=t=>{g.useEffect(()=>{t.clearReset()},[t])},gu=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||Ji(r,[t.error,a])),xu=t=>{if(t.suspense){const s=a=>a==="static"?a:Math.max(a??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...a)=>s(r(...a)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},bu=(t,s)=>t.isLoading&&t.isFetching&&!s,yu=(t,s)=>t?.suspense&&s.isPending,Tn=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function vu(t,s,r){const a=du(),n=mu(),i=Va(),o=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=a?"isRestoring":"optimistic",xu(o),pu(o,n),fu(n);const c=!i.getQueryCache().get(o.queryHash),[d]=g.useState(()=>new s(i,o)),m=d.getOptimisticResult(o),x=!a&&t.subscribed!==!1;if(g.useSyncExternalStore(g.useCallback(p=>{const y=x?d.subscribe(he.batchCalls(p)):ye;return d.updateResult(),y},[d,x]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),g.useEffect(()=>{d.setOptions(o)},[o,d]),yu(o,m))throw Tn(o,d,n);if(gu({result:m,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,m),o.experimental_prefetchInRender&&!Vt&&bu(m,a)&&(c?Tn(o,d,n):i.getQueryCache().get(o.queryHash)?.promise)?.catch(ye).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?m:d.trackResult(m)}function Ee(t,s){return vu(t,nu)}function St(t,s){const r=Va(),[a]=g.useState(()=>new cu(r,t));g.useEffect(()=>{a.setOptions(t)},[a,t]);const n=g.useSyncExternalStore(g.useCallback(o=>a.subscribe(he.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=g.useCallback((o,c)=>{a.mutate(o,c).catch(ye)},[a]);if(n.error&&Ji(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}const Ut=t=>({pendiente:"Pendiente",confirmado:"Confirmado",preparando:"Preparando",listo:"Listo para envío",camino_tienda:"En camino a la tienda",recolectado:"Recolectado",en_camino:"En camino al cliente",entregado:"Entregado",cancelado:"Cancelado"})[t]||t,nt=t=>({pendiente:"secondary",confirmado:"info",preparando:"warning",listo:"primary",camino_tienda:"info",recolectado:"dark",en_camino:"warning",entregado:"success",cancelado:"danger"})[t]||"secondary",vs=t=>({pendiente:"⏱️",confirmado:"✅",preparando:"👨‍🍳",listo:"📦",camino_tienda:"🛵➡️🏪",recolectado:"📋",en_camino:"🛵➡️🏠",entregado:"🎉",cancelado:"❌"})[t]||"📋",ju=()=>{const{user:t}=ue(),s=Wi(),[r,a]=g.useState(null),n=Va();kr(),g.useEffect(()=>{if(s?.currentPosition){const l=setTimeout(()=>{n.invalidateQueries({queryKey:["orders-available-dashboard"]}),n.invalidateQueries({queryKey:["orders-assigned-dashboard"]})},1e3);return()=>clearTimeout(l)}},[s?.currentPosition,n]);const i=Ee({queryKey:["orders-available-dashboard"],queryFn:async()=>(await Y.orders.getAvailable({limit:50})).data,refetchInterval:5e3}),o=Ee({queryKey:["orders-assigned-dashboard"],queryFn:async()=>(await Y.orders.getAll({limit:50})).data,refetchInterval:5e3}),c=St({mutationFn:async({id:l,estado:b})=>Y.orders.updateStatus(l,b),onSuccess:()=>{o.refetch(),n.invalidateQueries({queryKey:["orders-assigned-dashboard"]})}}),d=St({mutationFn:async l=>Y.orders.claim(l),onSuccess:()=>{i.refetch(),o.refetch()}}),m=l=>{const b=["pendiente","confirmado","preparando","listo","camino_tienda","recolectado","en_camino","entregado"],u=b.indexOf(l);return u===-1?0:Math.round(u/(b.length-1)*100)},x=l=>{switch(l){case"listo":return"camino_tienda";case"camino_tienda":return"recolectado";case"recolectado":return"en_camino";case"en_camino":return"entregado";default:return null}},p=i.data?.pedidos||[],y=o.data?.pedidos||[];return e.jsxs(ie,{className:"py-4 text-center",children:[e.jsx("h2",{className:"text-yega-gold mb-1",children:"Pedidos"}),e.jsxs("div",{className:"small text-white-50 mb-3",children:[s?.enabled?e.jsx(de,{bg:"success",className:"me-2",children:"Ubicación en segundo plano activa"}):e.jsx(de,{bg:"secondary",className:"me-2",children:"Ubicación en segundo plano inactiva"}),s?.hasActiveDelivery?e.jsx(de,{bg:"info",className:"me-2",children:"Pedidos activos detectados"}):e.jsx(de,{bg:"warning",className:"me-2",children:"No hay pedidos activos"}),s?.error?e.jsx("span",{className:"text-danger ms-2",children:s.error}):null]}),e.jsx(Od,{className:"mb-3"}),!s?.enabled&&s?.hasActiveDelivery&&e.jsxs(ne,{variant:"warning",className:"mb-3",children:["La ubicación automática no está funcionando a pesar de tener pedidos activos. ",e.jsx("a",{href:"/repartidor/ubicacion",className:"alert-link",children:"Ir a la pantalla de ubicación manual"})]}),s?.enabled&&!s?.hasActiveDelivery&&e.jsx(ne,{variant:"info",className:"mb-3",children:"Ubicación en pausa - se activará automáticamente cuando tomes un nuevo pedido."}),(i.isError||o.isError)&&e.jsx(ne,{variant:"danger",className:"text-center",children:"No se pudieron cargar los pedidos."}),e.jsx("div",{className:"mb-2 text-white-50 text-start",children:e.jsx("h4",{className:"text-yega-gold",children:"Disponibles para tomar"})}),i.isLoading?e.jsx("div",{className:"text-center py-3",children:e.jsx(ke,{animation:"border"})}):e.jsxs(ee,{className:"g-3 justify-content-center",children:[p.map(l=>e.jsx(_,{md:6,lg:4,children:e.jsx(I,{className:"card-yega h-100 text-start",children:e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:l.tiendaId?.nombre??"—"}),e.jsxs("div",{className:"text-muted small",children:["Pedido ",l.numero_pedido]})]}),e.jsxs("div",{className:"text-end fw-bold",children:["$",l.total?.toFixed?.(2)??l.total]})]}),e.jsxs("div",{className:"mt-3 d-flex gap-2 justify-content-end",children:[e.jsx(M,{size:"sm",className:"btn-yega-primary",disabled:d.isPending,onClick:()=>d.mutate(l._id),children:"Tomar pedido"}),l.tiendaId?.ubicacion&&l.estado!=="entregado"&&e.jsx(M,{as:"a",target:"_blank",rel:"noopener",size:"sm",className:"btn-yega-outline",href:`https://www.google.com/maps/dir/?api=1&destination=${l.tiendaId.ubicacion.latitud},${l.tiendaId.ubicacion.longitud}`,children:"Ir a Tienda"})]})]})})},l._id)),p.length===0&&e.jsx(_,{xs:12,children:e.jsx("div",{className:"text-center text-muted py-3",children:"No hay pedidos disponibles"})})]}),e.jsx("div",{className:"mt-4 mb-2 text-white-50 text-start",children:e.jsx("h4",{className:"text-yega-gold",children:"Mis pedidos asignados"})}),o.isLoading?e.jsx("div",{className:"text-center py-3",children:e.jsx(ke,{animation:"border"})}):e.jsxs(ee,{className:"g-3 justify-content-center",children:[y.map(l=>e.jsx(_,{md:6,lg:4,children:e.jsxs(I,{className:"card-yega h-100 text-start",children:[e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:l.clienteId?.nombre??"—"}),e.jsxs("div",{className:"text-muted small",children:[l.tiendaId?.nombre??"—"," • Pedido ",l.numero_pedido]})]}),e.jsxs(de,{bg:nt(l.estado),className:"estado-badge",children:[vs(l.estado)," ",Ut(l.estado)]})]}),e.jsxs("div",{className:"mt-2 fw-bold",children:["$",l.total?.toFixed?.(2)??l.total]}),e.jsx("div",{className:"mt-2",children:e.jsx($o,{variant:nt(l.estado),now:m(l.estado),className:"progress-estado",style:{height:"8px"}})}),e.jsxs("div",{className:"mt-3 d-flex flex-wrap gap-2 justify-content-end",children:[x(l.estado)&&e.jsxs(M,{size:"sm",variant:nt(x(l.estado)),className:`btn-estado-${x(l.estado)}`,disabled:c.isPending,onClick:()=>c.mutate({id:l._id,estado:x(l.estado)}),children:[e.jsx("span",{className:x(l.estado).includes("camino")?"icon-repartidor-movimiento":"",children:vs(x(l.estado))})," Marcar ",Ut(x(l.estado))]}),l.tiendaId?.ubicacion&&l.estado!=="entregado"&&e.jsx(M,{as:"a",target:"_blank",rel:"noopener",size:"sm",className:"btn-yega-outline",href:`https://www.google.com/maps/dir/?api=1&destination=${l.tiendaId.ubicacion.latitud},${l.tiendaId.ubicacion.longitud}`,children:"Ir a Tienda"}),l.direccion_envio?.latitud&&l.direccion_envio?.longitud&&l.estado!=="entregado"&&e.jsx(M,{as:"a",target:"_blank",rel:"noopener",size:"sm",className:"btn-yega-outline",href:`https://www.google.com/maps/dir/?api=1&destination=${l.direccion_envio.latitud},${l.direccion_envio.longitud}`,children:"Ir a Cliente"}),(l.tiendaId?.ubicacion||l.direccion_envio?.latitud&&l.direccion_envio?.longitud)&&l.estado!=="entregado"&&e.jsx(M,{size:"sm",variant:"info",onClick:()=>a(r===l._id?null:l._id),children:r===l._id?"Ocultar Mapa":"Ver Mapa"})]})]}),r===l._id&&e.jsx("div",{className:"p-3 border-top",children:e.jsx(qd,{order:l,deliveryLocation:s?.currentPosition,height:"300px"})})]})},l._id)),y.length===0&&e.jsx(_,{xs:12,children:e.jsx("div",{className:"text-center text-muted py-3",children:"No tienes pedidos asignados"})})]})]})},Nu=()=>{const{user:t}=ue();return e.jsxs(ie,{className:"py-4",children:[e.jsx(ee,{className:"mb-4",children:e.jsxs(_,{children:[e.jsxs("h2",{className:"text-yega-gold",children:["¡Bienvenido, ",t?.nombre,"!"]}),e.jsx("p",{className:"text-muted",children:"Administrador - Panel de Control"})]})}),e.jsxs(ee,{children:[e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx(Ec,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Gestionar Usuarios"}),e.jsx(I.Text,{children:"Administra clientes, tiendas y repartidores registrados."}),e.jsx(ve.LinkContainer,{to:"/admin/usuarios",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Usuarios"})})]})})}),e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx($s,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Gestionar Tiendas"}),e.jsx(I.Text,{children:"Aprueba o rechaza solicitudes de nuevas tiendas."}),e.jsx(ve.LinkContainer,{to:"/admin/tiendas",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Tiendas"})})]})})}),e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx(hi,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Gestionar Repartidores"}),e.jsx(I.Text,{children:"Gestiona el registro y estatus de los repartidores."}),e.jsx(ve.LinkContainer,{to:"/admin/repartidores",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Repartidores"})})]})})}),e.jsx(_,{md:6,lg:3,className:"mb-4",children:e.jsx(I,{className:"card-yega h-100",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx(ci,{size:48,className:"text-yega-gold mb-3"}),e.jsx(I.Title,{children:"Estadísticas Generales"}),e.jsx(I.Text,{children:"Monitorea el rendimiento general de la plataforma."}),e.jsx(ve.LinkContainer,{to:"/admin/reportes",children:e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",children:"Ver Reportes"})})]})})})]}),e.jsx(ee,{children:e.jsx(_,{children:e.jsxs(I,{className:"card-yega",children:[e.jsx(I.Header,{children:e.jsx("h5",{className:"mb-0",children:"Información del Administrador"})}),e.jsx(I.Body,{children:e.jsxs(ee,{children:[e.jsxs(_,{md:6,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nombre:"})," ",t?.nombre]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",t?.email]})]}),e.jsxs(_,{md:6,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Teléfono:"})," ",t?.telefono]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Rol:"})," Administrador"]})]})]})})]})})})]})},wu=({product:t,onAddToCart:s,className:r=""})=>{const[a,n]=g.useState(1),[i,o]=g.useState(!1),[c,d]=g.useState(!1),m=()=>{s({product:t,quantity:a}),n(1),d(!0),setTimeout(()=>d(!1),1500),console.log("Product added to cart:",t._id,t.nombre);try{const l=JSON.parse(localStorage.getItem("yega_cart")||"[]");console.log("Current cart:",l)}catch(l){console.error("Error reading cart from localStorage:",l)}},x=()=>n(l=>l+1),p=()=>n(l=>Math.max(1,l-1)),y=l=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(l);return e.jsx(we.div,{className:r,whileHover:{y:-5},transition:{duration:.3},onHoverStart:()=>o(!0),onHoverEnd:()=>o(!1),children:e.jsx(Ae,{className:"h-full bg-gradient-to-br from-gray-900/90 to-black/90 backdrop-blur-sm border border-gray-700/50 hover:border-yellow-400/50 transition-all duration-300 group rounded-xl overflow-hidden",children:e.jsxs(Fe,{className:"p-0",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-t-lg",children:[e.jsx(Bo,{src:t.imagen||"/api/placeholder/300/200",alt:t.nombre,className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500",fallbackSrc:"/api/placeholder/300/200"}),e.jsx(we.div,{initial:{opacity:0},animate:{opacity:i?1:0},className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:e.jsx(Te,{isIconOnly:!0,className:"bg-white text-black",size:"lg",onClick:m,children:e.jsx(js,{})})}),t.stock<=5&&t.stock>0&&e.jsxs($t,{color:"warning",variant:"flat",size:"sm",className:"absolute top-2 left-2",children:["¡Últimos ",t.stock,"!"]}),t.stock===0&&e.jsx($t,{color:"danger",variant:"flat",size:"sm",className:"absolute top-2 left-2",children:"Agotado"}),t.rating&&e.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 bg-black/70 backdrop-blur-sm rounded-full px-2 py-1",children:[e.jsx(fi,{className:"text-white text-xs"}),e.jsx("span",{className:"text-white text-xs font-medium",children:t.rating})]})]}),e.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2 line-clamp-2 group-hover:text-gray-300 transition-colors",children:t.nombre}),t.descripcion&&e.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:t.descripcion}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:y(t.precio)}),t.precioOriginal&&t.precioOriginal>t.precio&&e.jsx("span",{className:"text-gray-500 text-sm line-through ml-2",children:y(t.precioOriginal)})]}),t.categoria&&e.jsx($t,{variant:"flat",size:"sm",className:"bg-gray-700/50 text-gray-300",children:t.categoria})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-gray-800/50 rounded-lg p-1",children:[e.jsx(Te,{isIconOnly:!0,size:"sm",variant:"light",className:"text-gray-400 hover:text-white",onClick:p,isDisabled:a<=1,children:e.jsx(Nc,{className:"text-xs"})}),e.jsx("span",{className:"text-white font-medium px-2 min-w-[2rem] text-center",children:a}),e.jsx(Te,{isIconOnly:!0,size:"sm",variant:"light",className:"text-gray-400 hover:text-white",onClick:x,isDisabled:t.stock===0,children:e.jsx(wc,{className:"text-xs"})})]}),e.jsx(Te,{className:`flex-1 ${c?"bg-gradient-to-r from-green-500 to-green-600 text-white":"bg-gradient-to-r from-gray-200 to-white text-black"} font-semibold transition-all duration-300`,size:"sm",onClick:m,isDisabled:t.stock===0,children:c?"¡Agregado!":"Agregar"})]})]})]})})})};function On(t,s){return t>=19.39&&t<=19.45&&s>=-99.18&&s<=-99.1?t>=19.4&&s>=-99.16?"Roma Norte, Ciudad de México":t>=19.41&&s<=-99.14?"Condesa, Ciudad de México":t<=19.42&&s>=-99.15?"Centro Histórico, CDMX":"Ciudad de México, CDMX":`${t.toFixed(4)}, ${s.toFixed(4)}`}async function co(t,s){try{const r=await Y.get(`/geocoding/reverse?lat=${t}&lng=${s}`);return r.data?.success&&r.data?.address?r.data.address:On(t,s)}catch(r){return console.warn("API de geocoding no disponible, usando fallback:",r.message),On(t,s)}}async function lo(t){if(!t||t.length<3)return[];try{const s=await Y.get(`/geocoding/search?query=${encodeURIComponent(t)}`);return s.data?.success&&Array.isArray(s.data.results)?s.data.results.map(r=>({text:r.text,value:r.text,center:r.center,components:r.components||{}})):[]}catch(s){return console.warn("API de búsqueda de direcciones no disponible:",s.message),[{text:`${t}, Ciudad de México`,value:`${t}, Ciudad de México`,center:[-99.1332,19.4326],components:{street:t,place:"Ciudad de México",region:"CDMX",country:"México"}}]}}async function Cu(t){if(!t)return null;try{const s=await lo(t);if(s&&s.length>0&&s[0].center){const[r,a]=s[0].center;return{latitud:a,longitud:r}}return null}catch(s){return console.warn("Error al geocodificar dirección:",s.message),null}}const Su=()=>{const[t,s]=g.useState(null),[r,a]=g.useState(""),[n,i]=g.useState(null),[o,c]=g.useState(""),[d,m]=g.useState("all"),[x,p]=g.useState(!1),{addItem:y,refreshCart:l,items:b}=Ia();kr(),g.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(async w=>{const E={lat:w.coords.latitude,lng:w.coords.longitude};s(E);try{const z=await co(E.lat,E.lng);a(z),localStorage.setItem("yega_addr",z)}catch(z){console.error("Error getting address:",z),a(`${E.lat.toFixed(4)}, ${E.lng.toFixed(4)}`)}},w=>{console.error("Error getting location:",w),s({lat:19.4326,lng:-99.1332}),a("Ciudad de México")},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},[]);const u=Ee({queryKey:["stores",t],queryFn:async()=>{if(!t)return[];try{return(await O.get(`/stores?lat=${t.lat}&lng=${t.lng}&limit=50`)).data?.tiendas||[]}catch(w){return console.warn("Error al cargar tiendas:",w.message),[]}},enabled:!!t}),h=Ee({queryKey:["store-products",n],queryFn:async()=>{if(!n)return[];try{return(await O.get(`/products?tiendaId=${n}`)).data?.productos||[]}catch(w){return console.warn("Error al cargar productos:",w.message),[]}},enabled:!!n}),v=g.useMemo(()=>{if(!h.data||!Array.isArray(h.data))return[];let w=h.data;return o&&(w=w.filter(E=>E.nombre.toLowerCase().includes(o.toLowerCase())||E.descripcion?.toLowerCase().includes(o.toLowerCase()))),d!=="all"&&(w=w.filter(E=>E.categoria===d)),w},[h.data,o,d]),N=g.useMemo(()=>!h.data||!Array.isArray(h.data)?[]:[...new Set(h.data.map(E=>E.categoria).filter(Boolean))],[h.data]),j=({product:w,quantity:E})=>{y(w,E)},C=w=>{i(w._id||w.id),p(!0),c(""),m("all"),l()},k=()=>{p(!1),i(null)},P=g.useMemo(()=>r?r.split(",")[0]?.trim()||r:"",[r]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(we.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"w-10"})," ",e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Tiendas Cercanas"}),e.jsxs(Pt,{to:"/cliente/mycart",className:"relative text-white bg-yellow-600 hover:bg-yellow-700 p-2 rounded-full",children:[e.jsx(js,{size:20}),b.length>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:b.length})]})]}),r&&e.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-300",children:[e.jsx(Dt,{className:"text-gray-400"}),e.jsx("span",{children:P})]})]}),u.isLoading&&e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(Yr,{size:"lg",color:"warning"})}),u.data&&e.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.data.map((w,E)=>e.jsx(we.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.1},children:e.jsx(Ae,{className:"h-full yega-glass hover:bg-white/10 transition-all duration-300 group",children:e.jsxs(Fe,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-semibold text-white group-hover:text-gray-300 transition-colors",children:w.nombre}),e.jsx("p",{className:"text-gray-400 text-sm",children:w.telefono||"Sin teléfono"})]}),typeof w.distancia=="number"&&e.jsxs($t,{variant:"flat",size:"sm",className:"bg-white/20 text-white",children:[w.distancia.toFixed(1)," km"]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(Dt,{className:"text-gray-400"}),e.jsx("span",{className:"truncate",children:w.ubicacion?.direccion||(w.ubicacion?`${w.ubicacion.latitud.toFixed(3)}, ${w.ubicacion.longitud.toFixed(3)}`:"Sin ubicación")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(xc,{className:"text-green-400"}),e.jsx("span",{children:"Abierto"})]}),w.rating&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-sm",children:[e.jsx(fi,{className:"text-white"}),e.jsxs("span",{children:[w.rating,"/5"]})]})]}),e.jsx(Te,{className:"w-full bg-gradient-to-r from-gray-200 to-white text-black font-semibold hover:from-white hover:to-gray-100 transition-all duration-200",size:"lg",onClick:()=>C(w),children:"Ver Productos"})]})})},w._id||w.id||`store-${E}`))}),u.data&&u.data.length===0&&e.jsx(we.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:e.jsxs("div",{className:"text-gray-400 mb-4",children:[e.jsx(Dt,{className:"text-6xl mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-xl mb-2",children:"No hay tiendas cercanas"}),e.jsx("p",{children:"Intenta cambiar tu ubicación o revisa más tarde"})]})})]}),e.jsx(qo,{isOpen:x,onClose:k,size:"3xl",backdrop:"blur",placement:"center",className:"bg-black/95 hero-modal",classNames:{backdrop:"bg-black/80 backdrop-blur-md",base:"bg-gray-900/95 backdrop-blur-md border border-gray-800 rounded-2xl shadow-2xl max-w-4xl mx-auto",body:"p-6 max-h-[80vh] overflow-y-auto",closeButton:"text-white hover:bg-white/20"},children:e.jsxs(Go,{children:[e.jsx(Vo,{className:"border-b border-gray-700 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Productos"}),e.jsx(Te,{variant:"light",onClick:k,className:"text-gray-400 hover:text-white",children:"✕"})]})}),e.jsxs(Ho,{className:"p-6 rounded-b-2xl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsx(Wr,{placeholder:"Buscar productos...",value:o,onValueChange:c,startContent:e.jsx(pi,{className:"text-gray-400"}),className:"flex-1",classNames:{input:"text-white",inputWrapper:"border-gray-600 data-[hover=true]:border-gray-400 group-data-[focus=true]:border-white"}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Te,{variant:d==="all"?"solid":"bordered",className:d==="all"?"bg-white text-black":"border-gray-600 text-gray-300",onClick:()=>m("all"),children:"Todos"}),N.map(w=>e.jsx(Te,{variant:d===w?"solid":"bordered",className:d===w?"bg-white text-black":"border-gray-600 text-gray-300",onClick:()=>m(w),children:w},w))]})]}),h.isLoading&&e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(Yr,{size:"lg",color:"warning"})}),v.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.jsx(Uo,{children:v.map((w,E)=>e.jsx(we.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:E*.05},children:e.jsx(wu,{product:w,onAddToCart:j})},w._id||`product-${E}`))})}),h.data&&Array.isArray(h.data)&&v.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx("h3",{className:"text-xl mb-2",children:"No se encontraron productos"}),e.jsx("p",{children:"Intenta cambiar los filtros o buscar algo diferente"})]})})]})]})})]})},ku=()=>e.jsx(Su,{}),Eu=()=>{const t=De(),{data:s,isLoading:r,isError:a}=Ee({queryKey:["orders-client"],queryFn:async()=>(await O.get("/orders",{params:{limit:50}})).data}),n=s?.pedidos||[];return e.jsxs(ie,{className:"py-4 text-center",children:[e.jsx("h2",{className:"text-yega-gold mb-3",children:"Mis Pedidos"}),r&&e.jsx("div",{className:"text-center py-5",children:e.jsx(ke,{animation:"border"})}),a&&e.jsx(ne,{variant:"danger",children:"No se pudieron cargar tus pedidos."}),!r&&!a&&e.jsxs(ee,{className:"g-3 justify-content-center",children:[n.map(i=>e.jsx(_,{md:6,lg:4,children:e.jsx(I,{className:"card-yega h-100",role:"button",onClick:()=>t(`/cliente/seguimiento?id=${i._id}`),children:e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:i.tiendaId?.nombre??"—"}),e.jsxs("div",{className:"text-muted small",children:["Pedido ",i.numero_pedido]})]}),e.jsxs(de,{bg:nt(i.estado),className:"estado-badge",children:[e.jsx("span",{className:i.estado.includes("camino")?"icon-repartidor-movimiento":"",children:vs(i.estado)}),Ut(i.estado)]})]}),e.jsx("div",{className:"mt-2 small text-white-50",children:new Date(i.createdAt).toLocaleString()}),e.jsxs("div",{className:"mt-2 fw-bold",children:["$",i.total?.toFixed?.(2)??i.total]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"progress progress-estado",style:{height:"6px"},children:e.jsx("div",{className:`progress-bar bg-${nt(i.estado)}`,role:"progressbar",style:{width:`${(()=>{const o=["pendiente","confirmado","preparando","listo","camino_tienda","recolectado","en_camino","entregado"],c=o.indexOf(i.estado);return c===-1?0:Math.round(c/(o.length-1)*100)})()}%`},"aria-valuenow":(()=>{const o=["pendiente","confirmado","preparando","listo","camino_tienda","recolectado","en_camino","entregado"],c=o.indexOf(i.estado);return c===-1?0:Math.round(c/(o.length-1)*100)})(),"aria-valuemin":"0","aria-valuemax":"100"})})})]})})},i._id)),n.length===0&&e.jsx(_,{xs:12,children:e.jsx("div",{className:"text-center text-muted py-4",children:"Aún no tienes pedidos"})})]})]})};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ru=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,a)=>a?a.toUpperCase():r.toLowerCase()),Ln=t=>{const s=Ru(t);return s.charAt(0).toUpperCase()+s.slice(1)},uo=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim(),Iu=t=>{for(const s in t)if(s.startsWith("aria-")||s==="role"||s==="title")return!0};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Au={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=g.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:o,...c},d)=>g.createElement("svg",{ref:d,...Au,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:uo("lucide",n),...!i&&!Iu(c)&&{"aria-hidden":"true"},...c},[...o.map(([m,x])=>g.createElement(m,x)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(t,s)=>{const r=g.forwardRef(({className:a,...n},i)=>g.createElement(_u,{ref:i,iconNode:s,className:uo(`lucide-${Pu(Ln(t))}`,`lucide-${t}`,a),...n}));return r.displayName=Ln(t),r};/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],Tu=ot("chef-hat",Mu);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zn=ot("circle-check",Ou);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zu=ot("circle",Lu);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Qr=ot("clock",Fu);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],Du=ot("flag",$u);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Fn=ot("map-pin",Bu);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Gu=ot("shopping-bag",qu);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Hu=ot("store",Vu);/**
 * @license lucide-react v0.509.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],gr=ot("truck",Uu),Qu=({points:t})=>{const s=Jn();return V.useEffect(()=>{if(!t||t.length===0)return;const r=t.map(a=>[a.lat,a.lng]);r.length===1?s.setView(r[0],14):s.fitBounds(r,{padding:[30,30]})},[t,s]),null},Ku=({estado:t})=>{const s=()=>{const a=["pendiente","confirmado","preparando","listo","camino_tienda","recolectado","en_camino","entregado"],n=a.indexOf(t);return n===-1?0:Math.round(n/(a.length-1)*100)},r=a=>{const n=["pendiente","confirmado","preparando","listo","camino_tienda","recolectado","en_camino","entregado"],i=n.indexOf(t),o=n.indexOf(a);return i<0||o<0?"pending":i>o?"complete":i===o?"current":"pending"};return e.jsxs("div",{className:"my-4",children:[e.jsx(Jo,{value:s(),className:"mb-3",size:"lg",color:nt(t)}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:`text-center ${r("confirmado")!=="pending"?"text-primary-500":"text-gray-400"}`,children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(zn,{size:20,className:r("confirmado")!=="pending"?"text-primary-500":"text-gray-400"})}),e.jsx("span",{className:"text-xs",children:"Confirmado"})]}),e.jsxs("div",{className:`text-center ${r("preparando")!=="pending"?"text-primary-500":"text-gray-400"}`,children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(Tu,{size:20,className:r("preparando")!=="pending"?"text-warning-500":"text-gray-400"})}),e.jsx("span",{className:"text-xs",children:"Preparando"})]}),e.jsxs("div",{className:`text-center ${r("recolectado")!=="pending"?"text-primary-500":"text-gray-400"}`,children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(Gu,{size:20,className:r("recolectado")!=="pending"?"text-violet-500":"text-gray-400"})}),e.jsx("span",{className:"text-xs",children:"Recogido"})]}),e.jsxs("div",{className:`text-center ${r("en_camino")!=="pending"?"text-primary-500":"text-gray-400"}`,children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(gr,{size:20,className:r("en_camino")!=="pending"?"text-warning-500":"text-gray-400"})}),e.jsx("span",{className:"text-xs",children:"En camino"})]}),e.jsxs("div",{className:`text-center ${r("entregado")!=="pending"?"text-primary-500":"text-gray-400"}`,children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(zn,{size:20,className:r("entregado")!=="pending"?"text-success-500":"text-gray-400"})}),e.jsx("span",{className:"text-xs",children:"Entregado"})]})]})]})},Wu=()=>{const[t]=To(),s=t.get("id"),{data:r,isLoading:a,isError:n}=Ee({enabled:!!s,queryKey:["order-track",s],queryFn:async()=>(await Y.orders.getById(s)).data,refetchInterval:5e3}),i=r?.pedido,o=i?.estado,c=g.useMemo(()=>{const u=i?.tiendaId?.ubicacion;return u?.latitud&&u?.longitud?{lat:u.latitud,lng:u.longitud}:null},[i]),d=g.useMemo(()=>{const u=i?.direccion_envio;return u?.latitud&&u?.longitud?{lat:u.latitud,lng:u.longitud}:null},[i]),m=g.useMemo(()=>{const u=i?.repartidorId?.ubicacion;return u?.latitud&&u?.longitud?{lat:u.latitud,lng:u.longitud}:null},[i]),x=[c,d,m].filter(Boolean),p=g.useMemo(()=>Rt.divIcon({className:"yega-store-icon",html:`
      <div style="background:#0d6efd;color:white;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.3)">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
      </div>
    `,iconSize:[36,36],iconAnchor:[18,18]}),[]),y=g.useMemo(()=>Rt.divIcon({className:"yega-flag-icon",html:`
      <div style="background:#28a745;color:white;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.3)">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 9l-7 4-7-4V5l7 4 7-4v4z"></path>
          <path d="M19 5v14H5V5"></path>
        </svg>
      </div>
    `,iconSize:[36,36],iconAnchor:[18,18]}),[]),l=g.useMemo(()=>Rt.divIcon({className:"yega-rider-icon",html:`
      <div class="${i?.estado==="en_camino"?"repartidor-icon-pulse":""}" style="background:#ffc107;color:white;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.3)">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M17 18.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"></path>
          <path d="M5 18.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"></path>
          <path d="M15 5h2a1 1 0 0 1 1 1v3.5h-4V10"></path>
          <path d="M5 10h3.5L9 12.5h5M11.5 5h-7l-1 3h5.5"></path>
          <path d="M12 17.5V15l-3-1.5v-2M3 18.5v-7"></path>
          <path d="M19 18.5v-7L12.5 9"></path>
        </svg>
      </div>
    `,iconSize:[36,36],iconAnchor:[18,18]}),[i?.estado]);g.useMemo(()=>Rt.divIcon({className:"yega-order-icon",html:`
      <div style="background:#6f42c1;color:white;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.3)">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
          <polyline points="3.29 7 12 12 20.71 7"></polyline>
          <line x1="12" y1="22" x2="12" y2="12"></line>
        </svg>
      </div>
    `,iconSize:[36,36],iconAnchor:[18,18]}),[]);const b=u=>{switch(u){case"pendiente":case"confirmado":case"preparando":return{color:"#6c757d",dashArray:"6 6",weight:3};case"listo":return{color:"#0d6efd",dashArray:"6 6",weight:3};case"camino_tienda":return{color:"#17a2b8",weight:4};case"recolectado":return{color:"#6f42c1",weight:4};case"en_camino":return{color:"#ffc107",weight:4};case"entregado":return{color:"#28a745",weight:4};case"cancelado":return{color:"#dc3545",dashArray:"4 8",weight:3};default:return{color:"#6c757d",weight:3}}};return e.jsxs("div",{className:"container mx-auto py-4 px-4",children:[e.jsxs("h2",{className:"text-yega-gold text-2xl font-semibold mb-4 flex items-center gap-2",children:[e.jsx(gr,{className:"h-6 w-6"}),"Seguimiento de Pedido"]}),!s&&e.jsx(Ae,{className:"mt-3 border-warning",children:e.jsx(Fe,{children:e.jsx("p",{className:"text-warning",children:"No se proporcionó ID de pedido"})})}),a&&e.jsx("div",{className:"text-center py-5",children:e.jsx(Yr,{size:"lg"})}),n&&e.jsx(Ae,{className:"border-danger",children:e.jsx(Fe,{children:e.jsx("p",{className:"text-danger",children:"No se pudo obtener el pedido"})})}),i&&e.jsxs("div",{className:"mt-3",children:[e.jsxs(Ae,{className:"mb-4",children:[e.jsxs(Qo,{className:"flex items-center justify-between bg-background",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Pedido:"})," ",i.numero_pedido]}),e.jsx("div",{children:e.jsx($t,{color:nt(i.estado),variant:"flat",startContent:e.jsx("span",{children:vs(i.estado)}),className:"text-sm font-medium",children:Ut(i.estado)})}),e.jsxs("div",{children:[e.jsx("strong",{children:"Total:"})," $",i.total?.toFixed?.(2)??i.total]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground flex gap-2 items-center",children:[e.jsx(Qr,{size:16}),"ETA aprox: ",i.tiempo_estimado??30," min"]})]}),e.jsx(Fe,{children:e.jsx(Ku,{estado:i.estado})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h6",{className:"text-lg font-semibold",children:"Productos"}),e.jsxs($t,{color:"primary",variant:"dot",size:"sm",children:[i.productos?.length||0," productos"]})]}),e.jsx(Ae,{className:"mb-4",children:e.jsxs(Ko,{"aria-label":"Productos en pedido",removeWrapper:!0,children:[e.jsxs(Wo,{children:[e.jsx(tr,{children:"Producto"}),e.jsx(tr,{children:"Cant."}),e.jsx(tr,{children:"Precio"}),e.jsx(tr,{children:"Subtotal"})]}),e.jsx(Yo,{children:i.productos?.map((u,h)=>e.jsxs(Xo,{children:[e.jsx(sr,{children:u.producto?.nombre??"Producto"}),e.jsx(sr,{children:u.cantidad}),e.jsxs(sr,{children:["$",u.precio_unitario?.toFixed?.(2)??u.precio_unitario]}),e.jsxs(sr,{children:["$",u.subtotal?.toFixed?.(2)??u.subtotal]})]},h))})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h6",{className:"text-lg font-semibold",children:"Repartidor"}),i.estado!=="entregado"&&i.estado!=="cancelado"&&e.jsx($t,{color:"primary",variant:"flat",size:"sm",children:"En tiempo real"})]}),i.repartidorId?e.jsx(Ae,{className:"mb-4",children:e.jsxs(Fe,{className:"flex items-center gap-4",children:[e.jsx(Zo,{name:i.repartidorId?.nombre??"Repartidor",color:"warning",fallback:e.jsx(gr,{size:18}),className:"h-12 w-12"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i.repartidorId?.nombre??"—"}),i.repartidorId?.ubicacion?.latitud?e.jsx("div",{className:"text-sm text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Fn,{size:14,className:i.estado==="en_camino"?"animate-bounce":""}),e.jsxs("span",{children:["Ubicación actualizada hace ",Math.floor(Math.random()*5)+1," min"]})]})}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"Ubicación no disponible"})]})]})}):e.jsx(Ae,{className:"mb-4 border-dashed border-muted",children:e.jsx(Fe,{children:e.jsxs("div",{className:"text-center text-muted-foreground py-2",children:[e.jsx(Qr,{className:"mx-auto mb-2 h-8 w-8 text-muted-foreground/50"}),e.jsx("p",{children:"Esperando asignación de repartidor..."})]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"text-lg font-semibold mb-3",children:"Ubicación en tiempo real"}),x.length>0?e.jsx(Ae,{className:"overflow-hidden",children:e.jsx(Fe,{className:"p-0",children:e.jsxs("div",{className:"relative h-80",children:[e.jsxs(ka,{style:{height:"100%",width:"100%"},center:x[0]||{lat:0,lng:0},zoom:13,scrollWheelZoom:!1,children:[e.jsx(Ea,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Qu,{points:x}),c&&e.jsx(es,{position:c,icon:p,children:e.jsxs(Ls,{children:["Tienda: ",i?.tiendaId?.nombre||"—"]})}),d&&e.jsx(es,{position:d,icon:y,children:e.jsx(Ls,{permanent:!0,children:"Tu ubicación"})}),m&&e.jsx(es,{position:m,icon:l,children:e.jsxs(Ls,{permanent:!0,direction:"top",children:["Repartidor: ",i?.repartidorId?.nombre||"—"]})}),m&&d?e.jsx(Os,{positions:[[m.lat,m.lng],[d.lat,d.lng]],pathOptions:b(o)}):c&&d?e.jsx(Os,{positions:[[c.lat,c.lng],[d.lat,d.lng]],pathOptions:b(o==="entregado"?"entregado":"confirmado")}):null]}),e.jsxs("div",{style:{position:"absolute",right:10,bottom:10},className:"bg-black/80 text-white rounded-lg px-4 py-3 text-xs shadow-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Leyenda del mapa"}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx(Hu,{size:10,color:"white"})}),e.jsxs("span",{children:["Tienda: ",i?.tiendaId?.nombre||"—"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Du,{size:10,color:"white"})}),e.jsx("span",{children:"Tu ubicación"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center",children:e.jsx(gr,{size:10,color:"white"})}),e.jsx("span",{children:"Repartidor"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-gray-300 border-t border-gray-600 pt-2",children:[e.jsx(Qr,{size:12}),e.jsxs("span",{children:["Actualizado hace ",Math.floor(Math.random()*2)+1," min"]})]})]})]})})}):e.jsx(Ae,{className:"border-dashed border-muted",children:e.jsx(Fe,{children:e.jsxs("div",{className:"text-center text-muted-foreground py-6",children:[e.jsx(Fn,{className:"mx-auto mb-2 h-10 w-10 text-muted-foreground/30"}),e.jsx("p",{children:"Ubicación no disponible"}),e.jsx("p",{className:"text-sm",children:"Aparecerá cuando el repartidor esté en camino"})]})})})]})]})]})},Yu=()=>{const t=De(),{data:s,isLoading:r,isError:a}=Ee({queryKey:["orders-client-history"],queryFn:async()=>(await O.get("/orders",{params:{limit:100}})).data}),n=(s?.pedidos||[]).filter(i=>["entregado","cancelado"].includes(i.estado));return e.jsxs(ie,{className:"py-4 text-center",children:[e.jsx("h2",{className:"text-yega-gold mb-3",children:"Historial"}),r&&e.jsx("div",{className:"text-center py-5",children:e.jsx(ke,{animation:"border"})}),a&&e.jsx(ne,{variant:"danger",children:"No se pudieron cargar tus pedidos."}),!r&&!a&&e.jsxs(ee,{className:"g-3 justify-content-center",children:[n.map(i=>e.jsx(_,{md:6,lg:4,children:e.jsx(I,{className:"card-yega h-100",role:"button",onClick:()=>t(`/cliente/seguimiento?id=${i._id}`),children:e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:i.tiendaId?.nombre??"—"}),e.jsxs("div",{className:"text-muted small",children:["Pedido ",i.numero_pedido]})]}),e.jsx(de,{bg:i.estado==="entregado"?"success":"secondary",children:i.estado})]}),e.jsx("div",{className:"mt-2 small text-white-50",children:new Date(i.createdAt).toLocaleString()}),e.jsxs("div",{className:"mt-2 fw-bold",children:["$",i.total?.toFixed?.(2)??i.total]})]})})},i._id)),n.length===0&&e.jsx(_,{xs:12,children:e.jsx("div",{className:"text-center text-muted py-4",children:"Sin pedidos en historial"})})]})]})},Xu=()=>{const t=De(),{items:s,removeItem:r,updateQuantity:a,subtotal:n,clearCart:i,refreshCart:o}=Ia(),[c,d]=g.useState(""),[m,x]=g.useState(0);V.useEffect(()=>{o()},[o]);const p=150,y=n*.05,l=n+p+y-m,b=(h,v)=>{v<=0?r(h):a(h,v)},u=()=>{const h={DESCUENTO10:n*.1,NUEVO20:n*.2,ENVIO50:50};h[c]&&x(h[c])};return s.length===0?e.jsx("div",{className:"min-vh-100 bg-dark",children:e.jsxs("div",{className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[e.jsx(M,{variant:"outline-secondary",onClick:()=>t(-1),className:"glass-btn",children:"← Volver"}),e.jsx("h1",{className:"fs-4 text-white m-0",children:"Mi Carrito"}),e.jsx("div",{style:{width:"80px"}})]}),e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"mx-auto mb-4 rounded-circle glass-card d-flex align-items-center justify-content-center",style:{width:"120px",height:"120px"},children:e.jsx("span",{className:"fs-1",children:"🛒"})}),e.jsx("h2",{className:"fs-3 text-white mb-2",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-white-50 mb-4",children:"Agrega algunos productos deliciosos para empezar"}),e.jsx(M,{className:"glass-btn px-4 py-2",onClick:()=>t("/cliente/tiendas"),children:"Explorar tiendas"})]})]})}):e.jsx("div",{className:"min-vh-100 bg-dark",children:e.jsxs("div",{className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-4",children:[e.jsx(M,{variant:"outline-secondary",onClick:()=>t(-1),className:"glass-btn",children:"← Volver"}),e.jsx("h1",{className:"fs-4 text-white m-0",children:"Mi Carrito"}),e.jsx(M,{variant:"outline-danger",onClick:i,size:"sm",className:"glass-btn",children:"Limpiar"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:s.map(h=>e.jsx(I,{className:"glass-card mb-3",children:e.jsx(I.Body,{className:"p-3",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsx("div",{className:"glass-card d-flex align-items-center justify-content-center",style:{width:"60px",height:"60px",borderRadius:"14px"},children:e.jsx("span",{className:"fs-3",children:"🍽️"})}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h5",{className:"mb-1",children:h.product.nombre}),e.jsx("p",{className:"small text-white-50 mb-2",children:h.product.descripcion}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("span",{className:"text-warning fw-bold",children:["$",(h.product.precio*h.quantity).toFixed(2)]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx(M,{size:"sm",className:"glass-btn",onClick:()=>b(h.product._id,h.quantity-1),children:"-"}),e.jsx("span",{className:"mx-2",children:h.quantity}),e.jsx(M,{size:"sm",className:"glass-btn",onClick:()=>b(h.product._id,h.quantity+1),children:"+"})]})]})]})]})})},h.product._id))}),e.jsx(I,{className:"glass-card mb-3",children:e.jsxs(I.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Código promocional",value:c,onChange:h=>d(h.target.value.toUpperCase()),className:"form-control glass-input flex-grow-1"}),e.jsx(M,{className:"glass-btn",onClick:u,children:"Aplicar"})]}),m>0&&e.jsx("div",{className:"mt-2",children:e.jsxs(de,{className:"glass-badge bg-success",children:["Descuento aplicado: -$",m.toFixed(2)]})})]})}),e.jsx(I,{className:"glass-card mb-4",children:e.jsxs(I.Body,{className:"p-3",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2 text-white-50",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",n.toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2 text-white-50",children:[e.jsx("span",{children:"Envío"}),e.jsxs("span",{children:["$",p.toFixed(2)]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-2 text-white-50",children:[e.jsx("span",{children:"Servicio (5%)"}),e.jsxs("span",{children:["$",y.toFixed(2)]})]}),m>0&&e.jsxs("div",{className:"d-flex justify-content-between mb-2 text-success",children:[e.jsx("span",{children:"Descuento"}),e.jsxs("span",{children:["-$",m.toFixed(2)]})]}),e.jsx("hr",{className:"border-secondary"}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold",children:[e.jsx("span",{className:"text-white",children:"Total"}),e.jsxs("span",{className:"text-warning",children:["$",l.toFixed(2)]})]})]})}),e.jsx(M,{variant:"warning",className:"btn-yega-primary w-100 py-2",style:{borderRadius:"12px"},onClick:()=>t("/cliente/payment-method"),children:"Proceder al pago"})]})]})})};var Ha="Radio",[Zu,ho]=Xn(Ha),[Ju,eh]=Zu(Ha),mo=g.forwardRef((t,s)=>{const{__scopeRadio:r,name:a,checked:n=!1,required:i,disabled:o,value:c="on",onCheck:d,form:m,...x}=t,[p,y]=g.useState(null),l=Ca(s,h=>y(h)),b=g.useRef(!1),u=p?m||!!p.closest("form"):!0;return e.jsxs(Ju,{scope:r,checked:n,disabled:o,children:[e.jsx(Qs.button,{type:"button",role:"radio","aria-checked":n,"data-state":xo(n),"data-disabled":o?"":void 0,disabled:o,value:c,...x,ref:l,onClick:Kr(t.onClick,h=>{n||d?.(),u&&(b.current=h.isPropagationStopped(),b.current||h.stopPropagation())})}),u&&e.jsx(go,{control:p,bubbles:!b.current,name:a,value:c,checked:n,required:i,disabled:o,form:m,style:{transform:"translateX(-100%)"}})]})});mo.displayName=Ha;var po="RadioIndicator",fo=g.forwardRef((t,s)=>{const{__scopeRadio:r,forceMount:a,...n}=t,i=eh(po,r);return e.jsx(Po,{present:a||i.checked,children:e.jsx(Qs.span,{"data-state":xo(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:s})})});fo.displayName=po;var th="RadioBubbleInput",go=g.forwardRef(({__scopeRadio:t,control:s,checked:r,bubbles:a=!0,...n},i)=>{const o=g.useRef(null),c=Ca(o,i),d=Ro(r),m=Io(s);return g.useEffect(()=>{const x=o.current;if(!x)return;const p=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(p,"checked").set;if(d!==r&&l){const b=new Event("click",{bubbles:a});l.call(x,r),x.dispatchEvent(b)}},[d,r,a]),e.jsx(Qs.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:c,style:{...n.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});go.displayName=th;function xo(t){return t?"checked":"unchecked"}var sh=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Mr="RadioGroup",[rh,Kh]=Xn(Mr,[Yn,ho]),bo=Yn(),yo=ho(),[ah,nh]=rh(Mr),vo=g.forwardRef((t,s)=>{const{__scopeRadioGroup:r,name:a,defaultValue:n,value:i,required:o=!1,disabled:c=!1,orientation:d,dir:m,loop:x=!0,onValueChange:p,...y}=t,l=bo(r),b=Co(m),[u,h]=So({prop:i,defaultProp:n??null,onChange:p,caller:Mr});return e.jsx(ah,{scope:r,name:a,required:o,disabled:c,value:u,onValueChange:h,children:e.jsx(ko,{asChild:!0,...l,orientation:d,dir:b,loop:x,children:e.jsx(Qs.div,{role:"radiogroup","aria-required":o,"aria-orientation":d,"data-disabled":c?"":void 0,dir:b,...y,ref:s})})})});vo.displayName=Mr;var jo="RadioGroupItem",No=g.forwardRef((t,s)=>{const{__scopeRadioGroup:r,disabled:a,...n}=t,i=nh(jo,r),o=i.disabled||a,c=bo(r),d=yo(r),m=g.useRef(null),x=Ca(s,m),p=i.value===n.value,y=g.useRef(!1);return g.useEffect(()=>{const l=u=>{sh.includes(u.key)&&(y.current=!0)},b=()=>y.current=!1;return document.addEventListener("keydown",l),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",l),document.removeEventListener("keyup",b)}},[]),e.jsx(Eo,{asChild:!0,...c,focusable:!o,active:p,children:e.jsx(mo,{disabled:o,required:i.required,checked:p,...d,...n,name:i.name,ref:x,onCheck:()=>i.onValueChange(n.value),onKeyDown:Kr(l=>{l.key==="Enter"&&l.preventDefault()}),onFocus:Kr(n.onFocus,()=>{y.current&&m.current?.click()})})})});No.displayName=jo;var ih="RadioGroupIndicator",wo=g.forwardRef((t,s)=>{const{__scopeRadioGroup:r,...a}=t,n=yo(r);return e.jsx(fo,{...n,...a,ref:s})});wo.displayName=ih;var oh=vo,ch=No,lh=wo;function dh({className:t,...s}){return e.jsx(oh,{"data-slot":"radio-group",className:Be("grid gap-3",t),...s})}function uh({className:t,...s}){return e.jsx(ch,{"data-slot":"radio-group-item",className:Be("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(lh,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(zu,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}const hh=({onConfirm:t,className:s=""})=>{const[r,a]=g.useState(!1),[n,i]=g.useState(!1),[o,c]=g.useState(null),[d,m]=g.useState(""),[x,p]=g.useState(""),[y,l]=g.useState([]),[b,u]=g.useState(!1),[h,v]=g.useState(null),[N,j]=g.useState(!1),[C,k]=g.useState(null),P=g.useRef(null),w=g.useRef(null),E=async()=>{if(a(!0),k(null),!navigator.geolocation){k("Tu navegador no soporta geolocalización"),a(!1);return}try{const R=await new Promise((U,L)=>{navigator.geolocation.getCurrentPosition(U,L,{enableHighAccuracy:!0,timeout:15e3,maximumAge:6e4})}),H={latitud:R.coords.latitude,longitud:R.coords.longitude};c(H);try{const U=await co(H.latitud,H.longitud);m(U)}catch(U){console.error("Error geocoding:",U),m(`${H.latitud.toFixed(6)}, ${H.longitud.toFixed(6)}`)}}catch(R){console.error("Error getting location:",R),k("No se pudo obtener tu ubicación. Por favor ingresa tu dirección manualmente.")}finally{a(!1)}},z=async R=>{if(p(R),P.current&&clearTimeout(P.current),!R||R.length<3){l([]),u(!1);return}P.current=setTimeout(async()=>{i(!0);try{const H=await lo(R);l(H),u(H.length>0)}catch(H){console.error("Error buscando direcciones:",H)}finally{i(!1)}},300)},se=async R=>{if(v(R),p(R.text),u(!1),R.center&&R.center.length===2){const[H,U]=R.center;c({latitud:U,longitud:H})}},X=async()=>{if(N&&!x.trim()){k("Por favor ingresa tu dirección");return}if(!N&&!o){k("Por favor obtén tu ubicación primero");return}let R=N?x.trim():d,H=N?null:o;if(N&&!H&&x.trim()){a(!0);try{const D=await Cu(x.trim());D&&(H=D)}catch(D){console.error("Error geocodificando dirección manual:",D)}finally{a(!1)}}let U=R,L="Ciudad de México",$="00000";if(h?.components){const D=h.components;U=D.street||R,L=D.place||D.locality||"Ciudad de México",$=D.postcode||"00000"}t({direccion_envio:{calle:U,numero:"S/N",ciudad:L,codigo_postal:$,referencias:"",...H&&{latitud:H.latitud,longitud:H.longitud}}})};return e.jsx("div",{className:s,children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h5",{className:"mb-3",children:"📍 Confirma tu dirección de entrega"}),C&&e.jsx(ne,{variant:"danger",className:"mb-3",children:C}),e.jsxs("div",{className:"d-flex gap-2 mb-3",children:[e.jsxs(M,{variant:N?"outline-primary":"primary",onClick:()=>j(!1),size:"sm",children:[e.jsx(Jr,{className:"me-1"}),"Usar mi ubicación"]}),e.jsxs(M,{variant:N?"primary":"outline-primary",onClick:()=>j(!0),size:"sm",children:[e.jsx(Dt,{className:"me-1"}),"Escribir dirección"]})]}),N?e.jsxs("div",{className:"position-relative",children:[e.jsxs(S.Group,{children:[e.jsx(S.Label,{children:"Ingresa tu dirección completa:"}),e.jsxs("div",{className:"input-group",children:[e.jsx(S.Control,{type:"text",value:x,onChange:R=>z(R.target.value),onFocus:()=>{y.length>0&&u(!0)},onBlur:()=>{setTimeout(()=>u(!1),200)},placeholder:"Ej: Av. Insurgentes Sur 123, Col. Roma",className:"form-control-yega"}),n?e.jsx("span",{className:"input-group-text",children:e.jsx(ke,{animation:"border",size:"sm"})}):x?e.jsx(M,{variant:"outline-secondary",onClick:()=>{p(""),l([]),v(null)},children:e.jsx(Sc,{})}):e.jsx("span",{className:"input-group-text",children:e.jsx(pi,{})})]})]}),b&&e.jsx(Qa,{className:"position-absolute w-100 shadow-sm z-10",style:{maxHeight:"200px",overflowY:"auto"},ref:w,children:y.map((R,H)=>e.jsx(Qa.Item,{action:!0,onClick:()=>se(R),className:"py-2",children:e.jsxs("div",{className:"d-flex align-items-start",children:[e.jsx(Dt,{className:"me-2 mt-1 text-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:R.text}),R.components?.place&&e.jsxs("small",{className:"text-muted",children:[R.components.place,R.components.region?`, ${R.components.region}`:""]})]})]})},H))}),h&&!b&&e.jsx("div",{className:"mt-2 p-2 border border-success rounded",children:e.jsxs("div",{className:"d-flex",children:[e.jsx(Dt,{className:"text-success me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-medium",children:h.text}),h.center&&e.jsxs("div",{className:"small text-muted",children:["Coordenadas: ",h.center[1].toFixed(6),", ",h.center[0].toFixed(6)]})]})]})})]}):e.jsx("div",{children:o?e.jsxs(ne,{variant:"success",className:"d-flex align-items-center",children:[e.jsx(rn,{className:"me-2 text-success"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:"Ubicación detectada:"}),e.jsx("div",{className:"small",children:d}),e.jsxs("div",{className:"small text-muted",children:["Coordenadas: ",o.latitud.toFixed(6),", ",o.longitud.toFixed(6)]})]})]}):e.jsx("div",{className:"text-center py-3",children:e.jsx(M,{onClick:E,disabled:r,variant:"success",size:"lg",children:r?e.jsxs(e.Fragment,{children:[e.jsx(ke,{size:"sm",className:"me-2"}),"Obteniendo ubicación..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jr,{className:"me-2"}),"Obtener mi ubicación"]})})})}),e.jsx("div",{className:"mt-3 d-grid",children:e.jsxs(M,{onClick:X,disabled:!N&&!o||N&&!x.trim(),size:"lg",children:[e.jsx(rn,{className:"me-2"}),"Confirmar dirección"]})})]})})},mh=()=>{const t=De(),{items:s,clearCart:r}=Ia(),[a,n]=g.useState("card"),[i,o]=g.useState(!1),[c,d]=g.useState(!1),[m,x]=g.useState(null),[p,y]=g.useState({number:"",expiry:"",cvv:"",name:""}),l=[{id:"card",name:"Tarjeta de crédito/débito",icon:"💳",description:"Visa, Mastercard, American Express"},{id:"cash",name:"Efectivo",icon:"💵",description:"Pago contra entrega"},{id:"transfer",name:"Transferencia bancaria",icon:"🏦",description:"SPEI, Oxxo, Mercado Pago"}],b=(v,N)=>{v==="number"&&(N=N.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim(),N.length>19)||v==="expiry"&&(N=N.replace(/\D/g,"").replace(/(\d{2})(\d{2})/,"$1/$2"),N.length>5)||v==="cvv"&&(N=N.replace(/\D/g,""),N.length>4)||y(j=>({...j,[v]:N}))},u=v=>{x(v.direccion_envio),d(!0)},h=async()=>{if(!c||!m){alert("Por favor confirma tu dirección de entrega");return}if(a==="card"&&(!p.number||!p.expiry||!p.cvv||!p.name)){alert("Por favor completa todos los campos de la tarjeta");return}if(!s||s.length===0){alert("No tienes productos en el carrito");return}o(!0);try{const v=s.map(P=>(console.log("Preparing product for order:",P.product),{producto:P.product._id,cantidad:P.quantity,precio_unitario:P.product.precio})),j={card:"tarjeta",cash:"efectivo",transfer:"transferencia"}[a]||"efectivo";console.log("selectedMethod:",a,"→ mapeado a:",j),console.log("direccion_envio con coordenadas:",m);const C={productos:v,direccion_envio:m,metodo_pago:j,notas:a==="card"?`Tarjeta terminada en ${p.number.replace(/\s/g,"").slice(-4)}`:""};console.log("Datos del pedido a enviar:",C),console.log("API URL configured as:",O.defaults.baseURL);const k=await O.post("/orders",C);k.data&&(r(),t("/cliente/payment-success",{state:{paymentMethod:a,cardLast4:a==="card"?p.number.replace(/\s/g,"").slice(-4):null,orderId:k.data.pedido?._id||k.data._id,orderNumber:k.data.pedido?.numero_pedido||k.data.numero_pedido}}))}catch(v){console.error("Error creating order:",v),console.error("Error response data:",v.response?.data),console.error("Error response status:",v.response?.status),alert(v.response?.data?.message||"Error al procesar el pedido. Inténtalo de nuevo.")}finally{o(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yega-dark via-yega-dark to-black",children:[e.jsx(Fa,{children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx(Re,{variant:"ghost",onClick:()=>t(-1),className:"text-white/70",children:"← Volver"}),e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Método de Pago"}),e.jsx("div",{className:"w-16"})]})}),e.jsxs("div",{className:"px-6 py-4 space-y-6",children:[!c&&e.jsx(Qe,{className:"bg-white/5 border-white/10",children:e.jsx(Ke,{className:"p-6",children:e.jsx(hh,{onConfirm:u})})}),c&&e.jsx(Qe,{className:"bg-green-500/10 border-green-500/30",children:e.jsxs(Ke,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-green-400",children:"✓"}),e.jsx("span",{className:"font-medium text-green-300",children:"Dirección confirmada"})]}),e.jsx("div",{className:"text-sm text-white/70",children:m?.calle}),m?.latitud&&e.jsx("div",{className:"text-xs text-white/50 mt-1",children:"📍 Ubicación GPS disponible"}),e.jsx(Re,{variant:"ghost",size:"sm",onClick:()=>d(!1),className:"text-white/70 mt-2 p-0",children:"Cambiar dirección"})]})}),c&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-yega-gold mb-4",children:"Selecciona tu método de pago"}),e.jsx(dh,{value:a,onValueChange:n,className:"space-y-3",children:l.map(v=>e.jsx(Qe,{className:`cursor-pointer transition-colors ${a===v.id?"bg-yega-gold/10 border-yega-gold/50":"bg-white/5 border-white/10"}`,children:e.jsx(Ke,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(uh,{value:v.id,id:v.id}),e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:v.icon}),e.jsxs("div",{children:[e.jsx(Xt,{htmlFor:v.id,className:"font-medium text-white cursor-pointer",children:v.name}),e.jsx("p",{className:"text-sm text-white/70",children:v.description})]})]})]})})},v.id))}),a==="card"&&e.jsx(Qe,{className:"bg-white/5 border-white/10",children:e.jsxs(Ke,{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-yega-silver mb-4",children:"Detalles de la tarjeta"}),e.jsxs("div",{children:[e.jsx(Xt,{htmlFor:"cardNumber",className:"form-label-yega",children:"Número de tarjeta"}),e.jsx(Ms,{id:"cardNumber",placeholder:"1234 5678 9012 3456",value:p.number,onChange:v=>b("number",v.target.value),className:"form-control-yega"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Xt,{htmlFor:"expiry",className:"form-label-yega",children:"Vencimiento"}),e.jsx(Ms,{id:"expiry",placeholder:"MM/AA",value:p.expiry,onChange:v=>b("expiry",v.target.value),className:"form-control-yega"})]}),e.jsxs("div",{children:[e.jsx(Xt,{htmlFor:"cvv",className:"form-label-yega",children:"CVV"}),e.jsx(Ms,{id:"cvv",placeholder:"123",value:p.cvv,onChange:v=>b("cvv",v.target.value),className:"form-control-yega"})]})]}),e.jsxs("div",{children:[e.jsx(Xt,{htmlFor:"cardName",className:"form-label-yega",children:"Nombre del titular"}),e.jsx(Ms,{id:"cardName",placeholder:"Juan Pérez López",value:p.name,onChange:v=>b("name",v.target.value),className:"form-control-yega"})]})]})}),a==="cash"&&e.jsx(Qe,{className:"bg-white/5 border-white/10",children:e.jsx(Ke,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"💵"}),e.jsx("h3",{className:"text-lg font-semibold text-yega-silver mb-2",children:"Pago en efectivo"}),e.jsx("p",{className:"text-white/70",children:"Prepara el dinero exacto. El repartidor podría no tener cambio disponible."})]})})}),a==="transfer"&&e.jsx(Qe,{className:"bg-white/5 border-white/10",children:e.jsx(Ke,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-4xl mb-4 block",children:"🏦"}),e.jsx("h3",{className:"text-lg font-semibold text-yega-silver mb-2",children:"Transferencia bancaria"}),e.jsx("p",{className:"text-white/70 mb-4",children:"Podrás pagar por SPEI, Oxxo, o transferencia desde tu banco."}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3 text-left text-sm",children:[e.jsx("p",{className:"text-white/90",children:"CLABE: 646180157000000004"}),e.jsx("p",{className:"text-white/90",children:"Beneficiario: YEGA DELIVERY S.A. DE C.V."}),e.jsx("p",{className:"text-white/90",children:"RFC: YEG240101ABC"})]})]})})})]}),e.jsx(Re,{className:"w-full btn-yega-primary py-3",onClick:h,disabled:i,children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Procesando pedido..."]}):"Continuar con el pago"})]})]})},ph=()=>{const t=De(),s=Ks(),[r,a]=g.useState(3),n=s.state?.paymentMethod||"card",i=s.state?.cardLast4,o=s.state?.orderId,c=s.state?.orderNumber,d=()=>{switch(n){case"card":return i?`Tarjeta terminada en ${i}`:"Tarjeta de crédito/débito";case"cash":return"Efectivo";case"transfer":return"Transferencia bancaria";default:return"Método de pago"}};return g.useEffect(()=>{const m=setInterval(()=>{a(x=>x<=1?(clearInterval(m),t("/cliente/dashboard"),0):x-1)},1e3);return()=>clearInterval(m)},[t]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-yega-dark via-yega-dark to-black flex items-center justify-center px-6",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(Qe,{className:"bg-white/5 border-white/10 backdrop-blur-sm",children:e.jsxs(Ke,{className:"p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-green-500/20 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl",children:"✓"})})}),e.jsx("h1",{className:"text-2xl font-bold text-yega-gold mb-2",children:"¡Pago exitoso!"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Tu pedido ha sido confirmado y está siendo preparado"}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 mb-6 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-white/70",children:"Método de pago:"}),e.jsx("span",{className:"text-white",children:d()})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-white/70",children:"Estado:"}),e.jsx("span",{className:"text-green-400",children:"Confirmado"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white/70",children:"Número de pedido:"}),e.jsx("span",{className:"text-white font-mono",children:c||`#YG${Date.now().toString().slice(-6)}`})]})]}),e.jsxs("div",{className:"bg-yega-gold/10 border border-yega-gold/30 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-yega-gold rounded-full animate-pulse"}),e.jsx("span",{className:"text-yega-gold font-semibold",children:"En preparación"})]}),e.jsx("p",{className:"text-white/70 text-sm",children:"Tiempo estimado de entrega: 25-30 minutos"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Re,{className:"w-full btn-yega-primary",onClick:()=>t(o?`/cliente/seguimiento?id=${o}`:"/cliente/seguimiento"),children:"Seguir mi pedido"}),e.jsx(Re,{variant:"outline",className:"w-full btn-yega-secondary",onClick:()=>t("/cliente/dashboard"),children:"Ir al inicio"})]}),e.jsxs("p",{className:"text-white/50 text-sm mt-4",children:["Redirigiendo automáticamente en ",r," segundos..."]})]})})})})},fh=()=>{const[t,s]=g.useState(!1),[r,a]=g.useState(null),[n,i]=g.useState(null),[o,c]=g.useState({nombre:"",descripcion:"",precio:"",stock:"",categoria:"comida",disponible:!0}),{data:d,isLoading:m,isError:x,refetch:p}=Ee({queryKey:["productos"],queryFn:async()=>{try{return(await Y.products.getAll({limit:50})).data}catch(j){throw console.error("Error fetching products:",j),j}}}),y=d?.productos||[],l=St({mutationFn:async()=>{const j={...o,precio:parseFloat(o.precio),stock:parseInt(o.stock||"0",10)};await Y.products.create(j)},onSuccess:async()=>{s(!1),h(),await p()},onError:async j=>{console.error("Error al crear producto:",j),alert("Error al crear el producto, intenta de nuevo")}}),b=St({mutationFn:async()=>{const j={...o,precio:parseFloat(o.precio),stock:parseInt(o.stock||"0",10)};await Y.products.update(r._id,j)},onSuccess:async()=>{a(null),h(),await p()},onError:async j=>{console.error("Error al actualizar producto:",j),alert("Error al actualizar el producto, intenta de nuevo")}}),u=St({mutationFn:async()=>{await Y.products.delete(n._id)},onSuccess:async()=>{i(null),await p()},onError:async j=>{console.error("Error al eliminar producto:",j),alert("Error al eliminar el producto, intenta de nuevo"),i(null)}}),h=()=>{c({nombre:"",descripcion:"",precio:"",stock:"",categoria:"comida",disponible:!0})},v=j=>{c({nombre:j.nombre,descripcion:j.descripcion,precio:j.precio.toString(),stock:j.stock.toString(),categoria:j.categoria,disponible:j.disponible}),a(j)},N=()=>{a(null),h()};return e.jsxs(ie,{className:"py-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h2",{className:"text-yega-gold mb-2",children:"Productos"}),e.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[e.jsx(M,{variant:"outline-light",className:"glass-btn",onClick:()=>s(j=>!j),children:t?"Cancelar":"Nuevo Producto"}),e.jsx(M,{variant:"outline-light",className:"btn-yega-primary",onClick:()=>p(),children:"Refrescar"})]})]}),(t||r)&&e.jsx("div",{className:"glass-card mb-4 p-3",children:e.jsxs(S,{onSubmit:j=>{j.preventDefault(),r?b.mutate():l.mutate()},children:[e.jsx("h4",{className:"text-center mb-3 text-white",children:r?"Editar Producto":"Nuevo Producto"}),e.jsxs(ee,{className:"g-2 align-items-end justify-content-center text-center",children:[e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Nombre"}),e.jsx(S.Control,{required:!0,value:o.nombre,onChange:j=>c({...o,nombre:j.target.value}),className:"glass-input"})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Descripción"}),e.jsx(S.Control,{required:!0,value:o.descripcion,onChange:j=>c({...o,descripcion:j.target.value}),className:"glass-input"})]}),e.jsxs(_,{md:2,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Precio"}),e.jsxs(Ka,{children:[e.jsx(Ka.Text,{className:"glass-input",children:"$"}),e.jsx(S.Control,{required:!0,type:"number",step:"0.01",min:"0",value:o.precio,onChange:j=>c({...o,precio:j.target.value}),className:"glass-input"})]})]}),e.jsxs(_,{md:1,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Stock"}),e.jsx(S.Control,{required:!0,type:"number",min:"0",value:o.stock,onChange:j=>c({...o,stock:j.target.value}),className:"glass-input"})]}),e.jsxs(_,{md:1,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Cat."}),e.jsxs(S.Select,{value:o.categoria,onChange:j=>c({...o,categoria:j.target.value}),className:"glass-input",children:[e.jsx("option",{value:"comida",children:"comida"}),e.jsx("option",{value:"bebida",children:"bebida"}),e.jsx("option",{value:"postre",children:"postre"}),e.jsx("option",{value:"snack",children:"snack"}),e.jsx("option",{value:"otro",children:"otro"})]})]}),e.jsxs(_,{md:2,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Disponible"}),e.jsxs("div",{className:"d-flex gap-2 justify-content-center",children:[e.jsx(S.Check,{type:"radio",id:"disponible-si",label:"Sí",name:"disponible",checked:o.disponible===!0,onChange:()=>c({...o,disponible:!0}),className:"text-white"}),e.jsx(S.Check,{type:"radio",id:"disponible-no",label:"No",name:"disponible",checked:o.disponible===!1,onChange:()=>c({...o,disponible:!1}),className:"text-white"})]})]})]}),e.jsx("div",{className:"mt-3 d-flex gap-2 justify-content-center",children:r?e.jsxs(e.Fragment,{children:[e.jsx(M,{type:"submit",className:"btn-yega-primary",disabled:b.isPending,style:{borderRadius:"12px"},children:b.isPending?"Guardando...":"Guardar Cambios"}),e.jsx(M,{variant:"outline-light",className:"glass-btn",onClick:N,children:"Cancelar"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{type:"submit",className:"btn-yega-primary",disabled:l.isPending,style:{borderRadius:"12px"},children:l.isPending?"Creando...":"Crear"}),e.jsx(M,{variant:"outline-light",className:"glass-btn",onClick:()=>s(!1),children:"Cancelar"})]})})]})}),m&&e.jsx("div",{className:"text-center py-5",children:e.jsx(ke,{animation:"border"})}),x&&e.jsx(ne,{variant:"danger",className:"glass-card",style:{background:"rgba(220,53,69,0.15)"},children:"No se pudieron cargar los productos. Verifica tu conexión y sesión."}),!m&&!x&&e.jsx(e.Fragment,{children:y.length===0?e.jsxs(ne,{variant:"warning",className:"glass-card",style:{background:"rgba(255,193,7,0.15)"},children:["No hay productos aún. Si estás en desarrollo, puedes crear el producto demo ejecutando",e.jsx("code",{className:"ms-1",children:"cd backend && npm run seed"}),"."]}):e.jsx(ee,{className:"g-3",children:y.map(j=>e.jsx(_,{md:6,lg:4,children:e.jsx(I,{className:"glass-card h-100",children:e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsx("div",{className:"fw-bold",children:j.nombre}),e.jsx(de,{bg:j.disponible?"success":"secondary",className:"glass-badge",children:j.disponible?"Disponible":"No disponible"})]}),e.jsx("div",{className:"text-white-50 small mt-1",children:j.categoria}),e.jsx("div",{className:"mt-2 text-white-70",style:{minHeight:40},children:j.descripcion}),e.jsxs("div",{className:"mt-3 d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"fw-bold",children:["$",j.precio?.toFixed?.(2)??j.precio]}),e.jsxs("div",{className:"small",children:["Stock: ",j.stock]})]}),e.jsxs("div",{className:"mt-2 d-flex justify-content-end gap-2",children:[e.jsxs(M,{size:"sm",className:"glass-btn",onClick:()=>v(j),disabled:!!r,children:[e.jsx(bc,{})," Editar"]}),e.jsxs(M,{size:"sm",className:"glass-btn",style:{background:"rgba(220,53,69,0.15)"},onClick:()=>i(j),disabled:!!r,children:[e.jsx(kc,{})," Eliminar"]})]})]})})},j._id))})}),e.jsxs(Ps,{show:!!n,onHide:()=>i(null),centered:!0,dialogClassName:"modal-dialog-custom",contentClassName:"glass-modal-content",backdropClassName:"modal-backdrop-custom",className:"glass-modal",children:[e.jsx(Ps.Header,{closeButton:!0,style:{borderRadius:"20px 20px 0 0"},children:e.jsx(Ps.Title,{children:"Confirmar eliminación"})}),e.jsx(Ps.Body,{children:n&&e.jsxs("div",{children:[e.jsx("p",{children:"¿Estás seguro que deseas eliminar el siguiente producto?"}),e.jsxs("div",{className:"glass-card p-3 mb-3",children:[e.jsx("div",{className:"fw-bold",children:n.nombre}),e.jsx("div",{className:"text-white-50 small",children:n.descripcion}),e.jsxs("div",{className:"mt-1",children:["Precio: $",n.precio?.toFixed(2)]})]}),e.jsx("p",{className:"text-danger",children:"Esta acción no se puede deshacer."})]})}),e.jsxs(Ps.Footer,{style:{borderRadius:"0 0 20px 20px"},children:[e.jsx(M,{className:"glass-btn",onClick:()=>i(null),children:"Cancelar"}),e.jsx(M,{className:"glass-btn",style:{background:"rgba(220,53,69,0.4)"},onClick:()=>u.mutate(),disabled:u.isPending,children:u.isPending?"Eliminando...":"Confirmar eliminación"})]})]})]})},gh=La("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function xh({className:t,variant:s,asChild:r=!1,...a}){const n=r?Wn:"span";return e.jsx(n,{"data-slot":"badge",className:Be(gh({variant:s}),t),...a})}const bh=()=>{const{data:t,isLoading:s,isError:r,refetch:a}=Ee({queryKey:["orders-store"],queryFn:async()=>(await O.get("/orders",{params:{limit:50}})).data,refetchInterval:5e3}),n=t?.pedidos||[],i=St({mutationFn:async({id:c,estado:d})=>{await O.put(`/orders/${c}/status`,{estado:d})},onSuccess:()=>a()}),o=c=>{switch(c){case"pendiente":return"confirmado";case"confirmado":return"preparando";case"preparando":return"listo";default:return null}};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h2",{className:"text-yega-gold m-0 mb-2",children:"Pedidos"}),e.jsx(Re,{className:"btn-yega-primary",onClick:()=>a(),children:"Refrescar"})]}),s&&e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"mx-auto h-6 w-6 animate-spin rounded-full border-2 border-white/30 border-t-white"})}),r&&e.jsxs(ca,{variant:"destructive",children:[e.jsx(Rd,{children:"Error"}),e.jsx(la,{children:"No se pudieron cargar los pedidos."})]}),!s&&!r&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 no-scrollbar place-items-center",children:[n.map(c=>e.jsx(Qe,{children:e.jsxs(Ke,{className:"p-4 space-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"font-semibold",children:c.numero_pedido}),e.jsxs(xh,{className:`bg-${nt(c.estado)}`,children:[vs(c.estado)," ",Ut(c.estado)]})]}),e.jsx("div",{className:"text-sm text-white/70",children:new Date(c.createdAt).toLocaleString()}),e.jsxs("div",{className:"text-sm",children:["Cliente: ",c.clienteId?.nombre??"—"]}),e.jsxs("div",{className:"font-medium",children:["$",c.total?.toFixed?.(2)??c.total]}),e.jsx("div",{className:"pt-2 text-right",children:o(c.estado)&&e.jsxs(Re,{size:"sm",className:"btn-yega-primary",disabled:i.isPending,onClick:()=>i.mutate({id:c._id,estado:o(c.estado)}),children:["Marcar ",Ut(o(c.estado))]})})]})},c._id)),n.length===0&&e.jsx("div",{className:"col-span-full text-center text-muted py-4",children:"No hay pedidos"})]})]})},yh=()=>e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold",children:"Inventario"}),e.jsx("p",{children:"Control de stock y disponibilidad."})]}),vh=()=>e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold",children:"Estadísticas"}),e.jsx("p",{children:"Rendimiento y ventas de la tienda."})]}),jh=()=>{const{user:t}=ue(),[s,r]=g.useState(t?.ubicacion?.direccion||""),[a,n]=g.useState({latitud:t?.ubicacion?.latitud,longitud:t?.ubicacion?.longitud}),[i,o]=g.useState(!1),[c,d]=g.useState("");g.useEffect(()=>{(!a?.latitud||!a?.longitud)&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(p=>n({latitud:p.coords.latitude,longitud:p.coords.longitude}),()=>{})},[a?.latitud,a?.longitud]);const m=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(p=>n({latitud:p.coords.latitude,longitud:p.coords.longitude}),p=>d(p.message))},x=async()=>{if(d(""),!a.latitud||!a.longitud){d("Selecciona o usa tu ubicación");return}o(!0);try{await Y.location.update({...a,direccion:s}),window.location.assign("/tienda")}catch(p){d(p.response?.data?.message||p.message)}finally{o(!1)}};return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold",children:"Configurar Dirección"}),e.jsx(I,{className:"card-yega mt-3",children:e.jsxs(I.Body,{children:[c&&e.jsx(ne,{variant:"danger",children:c}),e.jsxs(ee,{className:"g-3",children:[e.jsxs(_,{md:8,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Dirección"}),e.jsx(S.Control,{value:s,onChange:p=>r(p.target.value),placeholder:"Calle y número, ciudad",className:"form-control-yega"})]}),e.jsxs(_,{md:2,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Latitud"}),e.jsx(S.Control,{value:a.latitud||"",onChange:p=>n(y=>({...y,latitud:parseFloat(p.target.value)||""})),className:"form-control-yega"})]}),e.jsxs(_,{md:2,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Longitud"}),e.jsx(S.Control,{value:a.longitud||"",onChange:p=>n(y=>({...y,longitud:parseFloat(p.target.value)||""})),className:"form-control-yega"})]})]}),e.jsxs("div",{className:"d-flex gap-2 mt-3",children:[e.jsx(M,{className:"btn-yega-secondary",onClick:m,children:"Usar mi ubicación"}),e.jsx(M,{className:"btn-yega-primary",onClick:x,disabled:i,children:i?"Guardando...":"Guardar y continuar"})]})]})})]})},Nh=()=>{const{data:t,isLoading:s,isError:r}=Ee({queryKey:["orders-delivery-history"],queryFn:async()=>(await Y.orders.getAll({limit:50})).data}),a=t?.pedidos?.filter(n=>n.estado==="entregado"||n.estado==="cancelado")||[];return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold text-center mb-4",children:"Historial de Entregas"}),s&&e.jsx("div",{className:"text-center py-5",children:e.jsx(ke,{animation:"border"})}),r&&e.jsx(ne,{variant:"danger",children:"No se pudieron cargar el historial de pedidos."}),!s&&!r&&e.jsx(e.Fragment,{children:a.length===0?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"glass-card mx-auto d-flex align-items-center justify-content-center mb-3",style:{width:"120px",height:"120px",borderRadius:"20px"},children:e.jsx("span",{className:"fs-1",children:"📋"})}),e.jsx("h4",{className:"text-white mb-2",children:"No hay entregas completadas"}),e.jsx("p",{className:"text-muted",children:"Tu historial de entregas aparecerá aquí"})]}):e.jsx(ee,{className:"g-3",children:a.map(n=>e.jsx(_,{md:6,lg:4,children:e.jsx(I,{className:"glass-card h-100",children:e.jsxs(I.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:n.clienteId?.nombre??"—"}),e.jsxs("div",{className:"text-muted small",children:[n.tiendaId?.nombre??"—"," • Pedido ",n.numero_pedido]}),e.jsxs("div",{className:"small text-white-50 mt-1",children:[new Date(n.updatedAt).toLocaleDateString()," • ",new Date(n.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs(de,{bg:nt(n.estado),className:"glass-badge",children:[vs(n.estado)," ",Ut(n.estado)]})]}),e.jsxs("div",{className:"mt-3 d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"fw-bold",children:["$",n.total?.toFixed?.(2)??n.total]}),e.jsx("div",{className:"text-end small text-white-50",children:n.direccion_envio?.direccion&&e.jsx("div",{children:n.direccion_envio.direccion})})]})]})})},n._id))})})]})},wh=()=>e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold",children:"Estadísticas"}),e.jsx("p",{children:"Métricas de rendimiento y ganancias."})]}),Ch=()=>{const{user:t,updateProfile:s}=ue(),[r,a]=g.useState(t?.vehiculo||{tipo:"",marca:"",modelo:"",placa:"",color:"",anio:""}),[n,i]=g.useState(!1),[o,c]=g.useState(""),d=async m=>{if(m.preventDefault(),c(""),!r.tipo){c("Selecciona un tipo de vehículo");return}if(r.tipo!=="bici"&&!r.placa){c("Ingresa placa (no requerida para bici)");return}i(!0);try{await s({vehiculo:r}),window.location.assign("/repartidor")}catch(x){c(x.response?.data?.message||x.message)}finally{i(!1)}};return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold",children:"Datos del Vehículo"}),e.jsx(I,{className:"card-yega mt-3",children:e.jsxs(I.Body,{children:[o&&e.jsx(ne,{variant:"danger",children:o}),e.jsxs(S,{onSubmit:d,children:[e.jsxs(ee,{className:"g-3",children:[e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Tipo"}),e.jsxs(S.Select,{value:r.tipo,onChange:m=>a({...r,tipo:m.target.value}),className:"form-control-yega",children:[e.jsx("option",{value:"",children:"Seleccionar"}),e.jsx("option",{value:"moto",children:"Moto"}),e.jsx("option",{value:"auto",children:"Auto"}),e.jsx("option",{value:"bici",children:"Bici"})]})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Marca"}),e.jsx(S.Control,{value:r.marca||"",onChange:m=>a({...r,marca:m.target.value}),className:"form-control-yega"})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Modelo"}),e.jsx(S.Control,{value:r.modelo||"",onChange:m=>a({...r,modelo:m.target.value}),className:"form-control-yega"})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Año"}),e.jsx(S.Control,{value:r.anio||"",onChange:m=>a({...r,anio:m.target.value}),className:"form-control-yega"})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Placa"}),e.jsx(S.Control,{value:r.placa||"",onChange:m=>a({...r,placa:m.target.value}),className:"form-control-yega"})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Color"}),e.jsx(S.Control,{value:r.color||"",onChange:m=>a({...r,color:m.target.value}),className:"form-control-yega"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(M,{type:"submit",className:"btn-yega-primary",disabled:n,children:n?"Guardando...":"Guardar y continuar"})})]})]})})]})},Sh=t=>{switch(t){case"aprobado":return e.jsx(de,{bg:"success",children:"Aprobado"});case"rechazado":return e.jsx(de,{bg:"danger",children:"Rechazado"});case"pendiente":default:return e.jsx(de,{bg:"warning",text:"dark",children:"Pendiente"})}},Jt=({tipo:t,label:s,current:r})=>{const[a,n]=g.useState(null),i=g.useRef(null),[o,c]=g.useState(!1),[d,m]=g.useState(r||null),x=async()=>{if(a){c(!0);try{const p=await Y.documents.upload(t,a);m(p.data.verificaciones?.[t]||null)}catch(p){alert(p.response?.data?.message||p.message)}finally{c(!1)}}};return e.jsxs("div",{className:"mb-3 p-3 rounded border border-white/10 bg-white/5 text-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-start",children:[e.jsx("strong",{children:s})," ",d?.status&&Sh(d.status)]}),d?.file&&e.jsx("a",{href:d.file,target:"_blank",rel:"noopener noreferrer",className:"small",children:"Ver archivo"})]}),d?.notes&&e.jsxs("div",{className:"text-danger small mt-1 text-start",children:["Observaciones: ",d.notes]}),e.jsxs("div",{className:"d-flex flex-column align-items-center gap-2 mt-2",children:[e.jsx("input",{ref:i,type:"file",accept:"image/*,application/pdf",onChange:p=>n(p.target.files?.[0]||null),style:{display:"none"}}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(M,{size:"sm",variant:"outline-light",className:"btn-yega-secondary",onClick:()=>i.current?.click(),children:"Elegir archivo"}),e.jsx(M,{size:"sm",className:"btn-yega-primary",disabled:!a||o,onClick:x,children:o?"Subiendo...":"Subir"})]}),e.jsx("div",{className:"small text-white-50",style:{maxWidth:260,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a?a.name:""})]})]})},kh=()=>{const{user:t,updateProfile:s}=ue(),r=t?.verificaciones||{},[a,n]=g.useState({nombre:t?.nombre||"",telefono:t?.telefono||"",vehiculo:{tipo:t?.vehiculo?.tipo||"moto",marca:t?.vehiculo?.marca||"",modelo:t?.vehiculo?.modelo||"",color:t?.vehiculo?.color||"",placa:t?.vehiculo?.placa||""}}),[i,o]=g.useState(!1),c=x=>{n({...a,[x.target.name]:x.target.value})},d=x=>{n({...a,vehiculo:{...a.vehiculo,[x.target.name]:x.target.value}})},m=async x=>{x.preventDefault(),o(!0);try{await s(a)}finally{o(!1)}};return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold text-center mb-4",children:"Perfil de Repartidor"}),e.jsxs(ee,{children:[e.jsx(_,{lg:6,children:e.jsx(I,{className:"card-yega mb-4",children:e.jsxs(I.Body,{children:[e.jsx("h4",{className:"text-yega-gold mb-3",children:"Información personal"}),e.jsxs(S,{onSubmit:m,children:[e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Nombre completo"}),e.jsx(S.Control,{name:"nombre",value:a.nombre,onChange:c,className:"form-control-yega"})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Teléfono"}),e.jsx(S.Control,{name:"telefono",value:a.telefono,onChange:c,className:"form-control-yega"})]}),e.jsx("h5",{className:"text-yega-gold mt-4 mb-3",children:"Información del vehículo"}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Tipo de vehículo"}),e.jsxs(S.Select,{name:"tipo",value:a.vehiculo.tipo,onChange:d,className:"form-control-yega",children:[e.jsx("option",{value:"moto",children:"Motocicleta"}),e.jsx("option",{value:"bicicleta",children:"Bicicleta"}),e.jsx("option",{value:"auto",children:"Automóvil"})]})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Marca"}),e.jsx(S.Control,{name:"marca",value:a.vehiculo.marca,onChange:d,className:"form-control-yega"})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Modelo"}),e.jsx(S.Control,{name:"modelo",value:a.vehiculo.modelo,onChange:d,className:"form-control-yega"})]}),e.jsxs(ee,{children:[e.jsx(_,{md:6,children:e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Color"}),e.jsx(S.Control,{name:"color",value:a.vehiculo.color,onChange:d,className:"form-control-yega"})]})}),e.jsx(_,{md:6,children:e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Placa"}),e.jsx(S.Control,{name:"placa",value:a.vehiculo.placa,onChange:d,className:"form-control-yega",placeholder:"XXX-000"})]})})]}),e.jsx(M,{type:"submit",className:"btn-yega-primary mt-2",disabled:i,children:i?"Guardando...":"Guardar cambios"})]})]})})}),e.jsx(_,{lg:6,children:e.jsx(I,{className:"card-yega",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx("h4",{className:"text-yega-gold mb-3",children:"Documentos de verificación"}),e.jsx("div",{className:"mb-3",children:"Sube la documentación requerida para validar tu cuenta."}),e.jsx(Jt,{tipo:"id_doc",label:"Identificación oficial",current:r.id_doc}),e.jsx(Jt,{tipo:"licencia",label:"Licencia de conducir",current:r.licencia}),e.jsx(Jt,{tipo:"tarjeta_circulacion",label:"Tarjeta de circulación",current:r.tarjeta_circulacion}),e.jsx(Jt,{tipo:"poliza_seguro",label:"Póliza de seguro",current:r.poliza_seguro})]})})})]})]})},Eh=()=>{const t=Wi(),[s,r]=g.useState(null),[a,n]=g.useState("idle"),[i,o]=g.useState(null),[c,d]=g.useState(""),[m,x]=g.useState(15),p=g.useRef(null);g.useEffect(()=>{if(navigator.geolocation)return navigator.geolocation.getCurrentPosition(b=>r({lat:b.coords.latitude,lng:b.coords.longitude}),b=>o(b.message)),()=>{p.current&&clearInterval(p.current)}},[]);const y=async()=>{if(s)try{n("sending"),await Y.location.update({latitud:s.lat,longitud:s.lng,direccion:c}),n("ok"),setTimeout(()=>n("idle"),2e3)}catch(b){o(b.response?.data?.message||b.message),n("idle")}};g.useEffect(()=>{if(navigator.geolocation)return p.current=setInterval(()=>{navigator.geolocation.getCurrentPosition(b=>{r({lat:b.coords.latitude,lng:b.coords.longitude}),Y.location.update({latitud:b.coords.latitude,longitud:b.coords.longitude,direccion:c}).catch(()=>{})},()=>{})},Math.max(5,m)*1e3),()=>p.current&&clearInterval(p.current)},[m,c]);const l=({coord:b})=>{const u=Jn();return g.useEffect(()=>{b?.lat&&b?.lng&&u.setView([b.lat,b.lng],14)},[b,u]),null};return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold",children:"Ubicación Manual"}),i&&e.jsx(ne,{variant:"danger",onClose:()=>o(null),dismissible:!0,children:i}),e.jsxs(ne,{variant:"info",className:"mb-3",children:["Esta página solo debe usarse como respaldo cuando la ubicación automática no funciona.",t?.hasActiveDelivery?e.jsxs("div",{className:"mt-2",children:[e.jsx("strong",{children:"Tienes pedidos activos que requieren ubicación."}),t?.enabled?e.jsxs("div",{className:"mt-1 text-success",children:[e.jsx("strong",{children:"La ubicación automática está activa."})," No es necesario usar esta página.",e.jsxs("div",{className:"mt-1",children:[e.jsxs("small",{children:["Última actualización: ",t?.currentPosition?.timestamp?new Date(t.currentPosition.timestamp).toLocaleTimeString():"Nunca"]}),t?.currentPosition&&e.jsx("div",{children:e.jsxs("small",{children:["Coords: [",t.currentPosition.latitud.toFixed(6),", ",t.currentPosition.longitud.toFixed(6),"]"]})})]})]}):e.jsxs("div",{className:"mt-1 text-danger",children:[e.jsx("strong",{children:"La ubicación automática NO está activa a pesar de tener pedidos."}),e.jsx("div",{children:"Posibles razones:"}),e.jsxs("ul",{className:"mt-1",children:[e.jsx("li",{children:"Los permisos de ubicación están denegados en tu navegador"}),e.jsx("li",{children:"Tu dispositivo no admite geolocalización"}),e.jsx("li",{children:"Error de conexión con el servidor"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Solución:"})," Activa los permisos de ubicación o usa la actualización manual de esta página."]})]})]}):e.jsxs("div",{className:"mt-2",children:[e.jsx("strong",{children:"No tienes pedidos activos."})," La ubicación se activará automáticamente cuando tomes un pedido."]})]}),e.jsxs(ee,{className:"g-3 align-items-end",children:[e.jsxs(_,{md:4,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Dirección (opcional)"}),e.jsx(S.Control,{value:c,onChange:b=>d(b.target.value),placeholder:"Calle y número"})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Intervalo auto (seg)"}),e.jsx(S.Control,{type:"number",min:5,value:m,onChange:b=>x(parseInt(b.target.value||"5",10))})]}),e.jsxs(_,{md:"auto",className:"d-flex gap-2",children:[e.jsx(M,{className:"btn-yega-primary",onClick:y,disabled:!s||a==="sending",children:a==="sending"?"Enviando...":"Enviar ubicación ahora"}),e.jsx(M,{as:"a",target:"_blank",rel:"noopener",className:"btn-yega-primary",href:s?`https://www.google.com/maps/dir/?api=1&destination=${s.lat},${s.lng}`:"#",children:"Abrir en Maps"})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs(de,{bg:"secondary",children:["Lat: ",s?.lat?.toFixed?.(6)??"—"]})," ",e.jsxs(de,{bg:"secondary",children:["Lng: ",s?.lng?.toFixed?.(6)??"—"]})]}),e.jsxs("div",{className:"mt-3",style:{height:360},children:[e.jsxs(ka,{style:{height:"100%",width:"100%"},center:s||t?.currentPosition&&{lat:t.currentPosition.latitud,lng:t.currentPosition.longitud}||{lat:-34.6037,lng:-58.3816},zoom:12,scrollWheelZoom:!1,children:[e.jsx(Ea,{attribution:"© OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(l,{coord:s||t?.currentPosition&&{lat:t.currentPosition.latitud,lng:t.currentPosition.longitud}}),s&&e.jsx(Ya,{center:s,radius:10,pathOptions:{color:"#0d6efd"},children:e.jsx(Ls,{permanent:!0,children:"Tu ubicación manual"})}),!s&&t?.currentPosition&&e.jsx(Ya,{center:{lat:t.currentPosition.latitud,lng:t.currentPosition.longitud},radius:10,pathOptions:{color:"#28a745"},children:e.jsx(Ls,{permanent:!0,children:"Ubicación automática"})})]}),e.jsx("div",{className:"small text-muted mt-1",children:s?"Marcador azul: tu ubicación manual":t?.currentPosition?"Marcador verde: ubicación automática":"No hay ubicación disponible"})]})]})},Ph=()=>{const[t,s]=g.useState(""),[r,a]=g.useState(""),[n,i]=g.useState(""),{data:o,isLoading:c,isError:d,refetch:m}=Ee({queryKey:["admin-users",{buscar:t,rol:r,estado:n}],queryFn:async()=>(await O.get("/admin/users",{params:{buscar:t||void 0,rol:r||void 0,estado:n||void 0,limit:50}})).data}),x=o?.usuarios||[],p=St({mutationFn:async l=>{await O.post(`/admin/users/${l}/approve`)},onSuccess:()=>m()}),y=St({mutationFn:async({id:l,motivo:b})=>{await O.post(`/admin/users/${l}/reject`,{motivo:b,desactivar:!1})},onSuccess:()=>m()});return e.jsxs(ie,{className:"py-4",children:[e.jsxs(ee,{className:"align-items-end g-2 mb-3",children:[e.jsxs(_,{md:4,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Buscar"}),e.jsx(S.Control,{placeholder:"Nombre, email o teléfono",value:t,onChange:l=>s(l.target.value)})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Rol"}),e.jsxs(S.Select,{value:r,onChange:l=>a(l.target.value),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"cliente",children:"Cliente"}),e.jsx("option",{value:"tienda",children:"Tienda"}),e.jsx("option",{value:"repartidor",children:"Repartidor"}),e.jsx("option",{value:"administrador",children:"Administrador"})]})]}),e.jsxs(_,{md:3,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Estado"}),e.jsxs(S.Select,{value:n,onChange:l=>i(l.target.value),children:[e.jsx("option",{value:"",children:"Todos"}),e.jsx("option",{value:"pendiente",children:"Pendiente"}),e.jsx("option",{value:"aprobado",children:"Aprobado"}),e.jsx("option",{value:"rechazado",children:"Rechazado"})]})]}),e.jsx(_,{md:2,className:"d-grid",children:e.jsx(M,{className:"btn-yega-primary",onClick:()=>m(),children:"Filtrar"})})]}),c&&e.jsx("div",{className:"text-center py-5",children:e.jsx(ke,{animation:"border"})}),d&&e.jsx(ne,{variant:"danger",children:"No se pudieron cargar los usuarios."}),!c&&!d&&e.jsxs(Sa,{striped:!0,hover:!0,responsive:!0,className:"align-middle",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Rol"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Activo"}),e.jsx("th",{children:"Alta"}),e.jsx("th",{children:"Acciones"})]})}),e.jsxs("tbody",{children:[x.map(l=>e.jsxs("tr",{children:[e.jsx("td",{children:l.nombre}),e.jsx("td",{children:l.email}),e.jsx("td",{children:l.telefono}),e.jsx("td",{children:e.jsx(de,{bg:"secondary",children:l.rol})}),e.jsx("td",{children:e.jsx(de,{bg:l.estado_validacion==="aprobado"?"success":l.estado_validacion==="rechazado"?"danger":"warning",children:l.estado_validacion})}),e.jsx("td",{children:l.activo?"Sí":"No"}),e.jsx("td",{children:new Date(l.createdAt).toLocaleString()}),e.jsx("td",{className:"text-nowrap",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(M,{size:"sm",className:"btn-yega-primary",disabled:l.estado_validacion==="aprobado"||p.isPending,onClick:()=>p.mutate(l._id),children:"Aprobar"}),e.jsx(M,{size:"sm",variant:"outline-light",className:"btn-yega-secondary",disabled:l.estado_validacion==="rechazado"||y.isPending,onClick:()=>{const b=prompt("Motivo de rechazo (opcional):")||void 0;y.mutate({id:l._id,motivo:b})},children:"Rechazar"})]})})]},l._id)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"Sin resultados"})})]})]})]})},Rh=()=>{const{data:t,isLoading:s,isError:r}=Ee({queryKey:["admin-stores"],queryFn:async()=>(await O.get("/admin/users",{params:{rol:"tienda",limit:100}})).data}),a=t?.usuarios||[];return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold mb-3",children:"Tiendas"}),s&&e.jsx("div",{className:"text-center py-5",children:e.jsx(ke,{animation:"border"})}),r&&e.jsx(ne,{variant:"danger",children:"No se pudieron cargar las tiendas."}),!s&&!r&&e.jsxs(Sa,{striped:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Ubicación"})]})}),e.jsxs("tbody",{children:[a.map(n=>e.jsxs("tr",{children:[e.jsx("td",{children:n.nombre}),e.jsx("td",{children:n.email}),e.jsx("td",{children:n.telefono}),e.jsx("td",{children:e.jsx(de,{bg:n.estado_validacion==="aprobado"?"success":n.estado_validacion==="pendiente"?"warning":"danger",children:n.estado_validacion})}),e.jsx("td",{children:n.ubicacion?.direccion||(n.ubicacion?`${n.ubicacion.latitud}, ${n.ubicacion.longitud}`:"—")})]},n._id)),a.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center text-muted py-4",children:"Sin tiendas"})})]})]})]})},Ih=()=>{const[t,s]=g.useState(""),r=Ee({queryKey:["admin-delivery"],queryFn:async()=>(await O.get("/admin/users",{params:{rol:"repartidor",limit:200}})).data.usuarios||[]}),a=Ee({enabled:!!t,queryKey:["admin-orders-by-delivery",t],queryFn:async()=>(await O.get("/orders",{params:{repartidorId:t,limit:50}})).data,refetchInterval:5e3});return e.jsxs(ie,{className:"py-4",children:[e.jsxs(ee,{className:"align-items-end g-2 mb-3",children:[e.jsx(_,{children:e.jsx("h2",{className:"text-yega-gold mb-0",children:"Repartidores"})}),e.jsxs(_,{md:4,children:[e.jsx(S.Label,{className:"form-label-yega",children:"Selecciona un repartidor"}),e.jsxs(S.Select,{value:t,onChange:n=>s(n.target.value),children:[e.jsx("option",{value:"",children:"—"}),r.data?.map(n=>e.jsxs("option",{value:n._id,children:[n.nombre," (",n.email,")"]},n._id))]})]})]}),r.isLoading&&e.jsx("div",{className:"text-center py-5",children:e.jsx(ke,{animation:"border"})}),r.isError&&e.jsx(ne,{variant:"danger",children:"No se pudieron cargar los repartidores."}),t&&e.jsxs(e.Fragment,{children:[e.jsx("h5",{className:"text-yega-silver",children:"Pedidos del repartidor"}),a.isLoading&&e.jsx("div",{className:"text-center py-3",children:e.jsx(ke,{animation:"border"})}),a.isError&&e.jsx(ne,{variant:"danger",children:"No se pudieron cargar los pedidos."}),!a.isLoading&&!a.isError&&e.jsxs(Sa,{striped:!0,hover:!0,responsive:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nº Pedido"}),e.jsx("th",{children:"Fecha"}),e.jsx("th",{children:"Tienda"}),e.jsx("th",{children:"Cliente"}),e.jsx("th",{children:"Estado"}),e.jsx("th",{children:"Total"})]})}),e.jsxs("tbody",{children:[a.data?.pedidos?.map(n=>e.jsxs("tr",{children:[e.jsx("td",{children:n.numero_pedido}),e.jsx("td",{children:new Date(n.createdAt).toLocaleString()}),e.jsx("td",{children:n.tiendaId?.nombre??"—"}),e.jsx("td",{children:n.clienteId?.nombre??"—"}),e.jsx("td",{children:e.jsx(de,{bg:"secondary",children:n.estado})}),e.jsxs("td",{children:["$",n.total?.toFixed?.(2)??n.total]})]},n._id)),(a.data?.pedidos?.length||0)===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"Sin pedidos"})})]})]})]})]})},Ah=()=>e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold",children:"Reportes"}),e.jsx("p",{children:"Estadísticas y reportes generales de la plataforma."})]}),_h=(t=!1)=>{const[s,r]=g.useState(null),[a,n]=g.useState(null),[i,o]=g.useState(!1),[c,d]=g.useState(null),m=g.useCallback(y=>{r({latitude:y.coords.latitude,longitude:y.coords.longitude,accuracy:y.coords.accuracy,timestamp:y.timestamp}),n(null),o(!1)},[]),x=g.useCallback(y=>{let l;switch(y.code){case y.PERMISSION_DENIED:l="Usuario denegó la solicitud de geolocalización";break;case y.POSITION_UNAVAILABLE:l="Información de ubicación no disponible";break;case y.TIMEOUT:l="La solicitud de ubicación expiró";break;default:l="Error desconocido al obtener la ubicación"}n(l),o(!1)},[]),p=g.useCallback(()=>new Promise((y,l)=>{if(!("geolocation"in navigator)){const b="Geolocalización no soportada en este navegador";n(b),l(new Error(b));return}o(!0),navigator.geolocation.getCurrentPosition(b=>{const u={latitude:b.coords.latitude,longitude:b.coords.longitude,accuracy:b.coords.accuracy,timestamp:b.timestamp};r(u),n(null),o(!1),y(u)},b=>{x(b),l(b)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),[x]);return g.useEffect(()=>{if(!t){c!==null&&(navigator.geolocation.clearWatch(c),d(null));return}if(!("geolocation"in navigator)){n("Geolocalización no soportada en este navegador");return}o(!0),navigator.geolocation.getCurrentPosition(m,x,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e4});const y=navigator.geolocation.watchPosition(m,x,{enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3});return d(y),()=>{y!==null&&navigator.geolocation.clearWatch(y)}},[t,m,x]),{currentPosition:s,positionError:a,loading:i,getPosition:p,isTracking:c!==null}},Mh=()=>{const{user:t,updateProfile:s}=ue(),r=t?.verificaciones||{},[a,n]=g.useState({nombre:t?.nombre||"",telefono:t?.telefono||"",descripcion:t?.descripcion||"",horario:t?.horario||""}),[i,o]=g.useState(!1),{currentPosition:c,getPosition:d,positionError:m}=_h(),[x,p]=g.useState(!1),y=u=>{n({...a,[u.target.name]:u.target.value})},l=async()=>{await d(),p(!0)},b=async u=>{u.preventDefault(),o(!0);try{const h={...a};x&&c&&(h.ubicacion={latitud:c.latitude,longitud:c.longitude}),await s(h)}finally{o(!1)}};return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold text-center mb-4",children:"Perfil de Tienda"}),e.jsxs(ee,{children:[e.jsx(_,{lg:6,children:e.jsx(I,{className:"card-yega mb-4",children:e.jsxs(I.Body,{children:[e.jsx("h4",{className:"text-yega-gold mb-3",children:"Información de la tienda"}),e.jsxs(S,{onSubmit:b,children:[e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Nombre de la tienda"}),e.jsx(S.Control,{name:"nombre",value:a.nombre,onChange:y,className:"form-control-yega"})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Teléfono"}),e.jsx(S.Control,{name:"telefono",value:a.telefono,onChange:y,className:"form-control-yega"})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Descripción"}),e.jsx(S.Control,{as:"textarea",name:"descripcion",value:a.descripcion,onChange:y,className:"form-control-yega",placeholder:"Describe tu negocio en pocas palabras"})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Horario"}),e.jsx(S.Control,{name:"horario",value:a.horario,onChange:y,className:"form-control-yega",placeholder:"Ej: Lun-Vie 9:00-18:00, Sáb 10:00-14:00"})]}),e.jsxs(S.Group,{className:"mb-4",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Ubicación"}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("div",{className:"me-3",children:[t?.ubicacion?e.jsxs("div",{className:"text-success small mb-2",children:["Ubicación actual: ",t.ubicacion.latitud.toFixed(6),", ",t.ubicacion.longitud.toFixed(6)]}):e.jsx("div",{className:"text-warning small mb-2",children:"No has configurado tu ubicación"}),x&&c&&e.jsxs("div",{className:"text-info small mb-2",children:["Nueva ubicación: ",c.latitude.toFixed(6),", ",c.longitude.toFixed(6)]}),m&&e.jsx("div",{className:"text-danger small mb-2",children:m})]}),e.jsxs(M,{type:"button",variant:"outline-success",onClick:l,className:"d-flex align-items-center",children:[e.jsx(Dt,{className:"me-1"})," Actualizar"]})]})]}),e.jsx(M,{type:"submit",className:"btn-yega-primary",disabled:i,children:i?"Guardando...":"Guardar cambios"})]})]})})}),e.jsx(_,{lg:6,children:e.jsx(I,{className:"card-yega",children:e.jsxs(I.Body,{className:"text-center",children:[e.jsx("h4",{className:"text-yega-gold mb-3",children:"Documentos de verificación"}),e.jsx("div",{className:"mb-3",children:"Sube la documentación para validar tu cuenta."}),e.jsx(Jt,{tipo:"id_doc",label:"Identificación oficial",current:r.id_doc}),e.jsx(Jt,{tipo:"comprobante_domicilio",label:"Comprobante de domicilio",current:r.comprobante_domicilio})]})})})]})]})},Th=()=>{const{user:t,updateProfile:s}=ue(),[r,a]=g.useState({nombre:t?.nombre||"",telefono:t?.telefono||"",preferencias:t?.preferencias||{notificaciones_email:!0,notificaciones_sms:!0,guardado_info_pago:!1}}),[n,i]=g.useState(!1),o=m=>{a({...r,[m.target.name]:m.target.value})},c=m=>{a({...r,preferencias:{...r.preferencias,[m.target.name]:m.target.checked}})},d=async m=>{m.preventDefault(),i(!0);try{await s(r)}finally{i(!1)}};return e.jsxs(ie,{className:"py-4",children:[e.jsx("h2",{className:"text-yega-gold text-center mb-4",children:"Mi Perfil"}),e.jsx(ee,{className:"justify-content-center",children:e.jsx(_,{md:8,lg:7,children:e.jsx(I,{className:"card-yega",children:e.jsxs(I.Body,{children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"user-avatar-container mb-2",children:e.jsx("div",{className:"user-avatar",children:e.jsx(We,{size:48})})}),e.jsx("h5",{className:"text-yega-gold",children:t?.email}),e.jsxs("div",{className:"text-muted small",children:["Cliente desde ",new Date(t?.createdAt).toLocaleDateString()]})]}),e.jsxs(S,{onSubmit:d,children:[e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Nombre completo"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-dark border-dark text-white",children:e.jsx(We,{})}),e.jsx(S.Control,{name:"nombre",value:r.nombre,onChange:o,placeholder:"Tu nombre completo",className:"form-control-yega"})]})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Teléfono"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-dark border-dark text-white",children:e.jsx(mi,{})}),e.jsx(S.Control,{name:"telefono",value:r.telefono,onChange:o,placeholder:"Tu número de teléfono",className:"form-control-yega"})]})]}),e.jsxs(S.Group,{className:"mb-3",children:[e.jsx(S.Label,{className:"form-label-yega",children:"Correo electrónico"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-dark border-dark text-white",children:e.jsx(Pa,{})}),e.jsx(S.Control,{value:t?.email,disabled:!0,className:"form-control-yega"})]}),e.jsx(S.Text,{className:"text-muted",children:"El correo electrónico no se puede modificar"})]}),e.jsx("h5",{className:"text-yega-gold mt-4 mb-3",children:"Preferencias"}),e.jsx(S.Group,{className:"mb-2",children:e.jsx(S.Check,{type:"switch",id:"notificaciones_email",name:"notificaciones_email",label:"Recibir notificaciones por email",checked:r.preferencias.notificaciones_email,onChange:c})}),e.jsx(S.Group,{className:"mb-2",children:e.jsx(S.Check,{type:"switch",id:"notificaciones_sms",name:"notificaciones_sms",label:"Recibir notificaciones por SMS",checked:r.preferencias.notificaciones_sms,onChange:c})}),e.jsx(S.Group,{className:"mb-3",children:e.jsx(S.Check,{type:"switch",id:"guardado_info_pago",name:"guardado_info_pago",label:"Guardar información de pago para futuros pedidos",checked:r.preferencias.guardado_info_pago,onChange:c})}),e.jsx("div",{className:"d-grid mt-4",children:e.jsx(M,{type:"submit",className:"btn-yega-primary",disabled:n,children:n?"Guardando...":"Guardar cambios"})})]})]})})})})]})},Oh=()=>{try{localStorage.removeItem("yega_demo_products"),console.log("Demo products cleared from localStorage")}catch(t){console.error("Error clearing demo products:",t)}},te=({children:t,allowedRoles:s=[]})=>{const{user:r,loading:a}=ue(),n=Ks();return a?e.jsx(Ra,{}):r?s.length>0&&!s.includes(r.rol)?e.jsx(tt,{to:"/unauthorized",replace:!0}):t:e.jsx(tt,{to:"/login",replace:!0,state:{from:n}})},Lh=()=>{const{user:t,loading:s}=ue(),r=!!localStorage.getItem("token");if(s&&r)return e.jsx(Ra,{});if(!t)return e.jsx(tt,{to:"/login",replace:!0});switch(t.rol){case"cliente":return e.jsx(tt,{to:"/cliente/tiendas",replace:!0});case"tienda":return e.jsx(tt,{to:"/tienda",replace:!0});case"repartidor":return e.jsx(tt,{to:"/repartidor",replace:!0});case"administrador":return e.jsx(tt,{to:"/admin",replace:!0});default:return e.jsx(tt,{to:"/login",replace:!0})}},Yt=({children:t})=>{const{user:s,loading:r}=ue(),a=!!localStorage.getItem("token");return r&&a?e.jsx(Ra,{}):s?e.jsx(tt,{to:"/dashboard",replace:!0}):t};function zh(){const t=Ks(),{user:s}=ue(),r=s?.rol==="administrador"&&t.pathname.startsWith("/admin");return g.useEffect(()=>{Oh()},[]),e.jsxs("div",{className:"App d-flex flex-column min-vh-100",children:[r&&e.jsx(Pc,{}),e.jsx("main",{className:"flex-grow-1",children:e.jsxs(Lo,{children:[e.jsx(Q,{path:"/",element:e.jsx(Yt,{children:e.jsx(_c,{})})}),e.jsx(Q,{path:"/onboarding",element:e.jsx(Yt,{children:e.jsx(Sd,{})})}),e.jsx(Q,{path:"/login",element:e.jsx(Yt,{children:e.jsx(Tc,{})})}),e.jsx(Q,{path:"/register",element:e.jsx(Yt,{children:e.jsx(Oc,{})})}),e.jsx(Q,{path:"/forgot-password",element:e.jsx(Yt,{children:e.jsx(Ad,{})})}),e.jsx(Q,{path:"/verify-otp",element:e.jsx(Yt,{children:e.jsx(Hl,{})})}),e.jsx(Q,{path:"/dashboard",element:e.jsx(Lh,{})}),e.jsx(Q,{path:"/cliente/tiendas",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(ku,{})})}),e.jsx(Q,{path:"/cliente/mycart",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(Xu,{})})}),e.jsx(Q,{path:"/cliente/payment-method",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(mh,{})})}),e.jsx(Q,{path:"/cliente/payment-success",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(ph,{})})}),e.jsx(Q,{path:"/cliente/pedidos",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(Eu,{})})}),e.jsx(Q,{path:"/cliente/seguimiento",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(Wu,{})})}),e.jsx(Q,{path:"/cliente/historial",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(Yu,{})})}),e.jsx(Q,{path:"/cliente/perfil",element:e.jsx(te,{allowedRoles:["cliente"],children:e.jsx(Th,{})})}),e.jsx(Q,{path:"/tienda",element:e.jsx(te,{allowedRoles:["tienda"],children:e.jsx(_d,{})})}),e.jsx(Q,{path:"/tienda/productos",element:e.jsx(te,{allowedRoles:["tienda"],children:e.jsx(fh,{})})}),e.jsx(Q,{path:"/tienda/pedidos",element:e.jsx(te,{allowedRoles:["tienda"],children:e.jsx(bh,{})})}),e.jsx(Q,{path:"/tienda/inventario",element:e.jsx(te,{allowedRoles:["tienda"],children:e.jsx(yh,{})})}),e.jsx(Q,{path:"/tienda/estadisticas",element:e.jsx(te,{allowedRoles:["tienda"],children:e.jsx(vh,{})})}),e.jsx(Q,{path:"/tienda/direccion",element:e.jsx(te,{allowedRoles:["tienda"],children:e.jsx(jh,{})})}),e.jsx(Q,{path:"/tienda/perfil",element:e.jsx(te,{allowedRoles:["tienda"],children:e.jsx(Mh,{})})}),e.jsx(Q,{path:"/repartidor",element:e.jsx(te,{allowedRoles:["repartidor"],children:e.jsx(ju,{})})}),e.jsx(Q,{path:"/repartidor/ubicacion",element:e.jsx(te,{allowedRoles:["repartidor"],children:e.jsx(Eh,{})})}),e.jsx(Q,{path:"/repartidor/historial",element:e.jsx(te,{allowedRoles:["repartidor"],children:e.jsx(Nh,{})})}),e.jsx(Q,{path:"/repartidor/estadisticas",element:e.jsx(te,{allowedRoles:["repartidor"],children:e.jsx(wh,{})})}),e.jsx(Q,{path:"/repartidor/vehiculo",element:e.jsx(te,{allowedRoles:["repartidor"],children:e.jsx(Ch,{})})}),e.jsx(Q,{path:"/repartidor/perfil",element:e.jsx(te,{allowedRoles:["repartidor"],children:e.jsx(kh,{})})}),e.jsx(Q,{path:"/admin",element:e.jsx(te,{allowedRoles:["administrador"],children:e.jsx(Nu,{})})}),e.jsx(Q,{path:"/admin/usuarios",element:e.jsx(te,{allowedRoles:["administrador"],children:e.jsx(Ph,{})})}),e.jsx(Q,{path:"/admin/tiendas",element:e.jsx(te,{allowedRoles:["administrador"],children:e.jsx(Rh,{})})}),e.jsx(Q,{path:"/admin/repartidores",element:e.jsx(te,{allowedRoles:["administrador"],children:e.jsx(Ih,{})})}),e.jsx(Q,{path:"/admin/reportes",element:e.jsx(te,{allowedRoles:["administrador"],children:e.jsx(Ah,{})})}),e.jsx(Q,{path:"/unauthorized",element:e.jsxs("div",{className:"container mt-5 text-center",children:[e.jsx("h2",{children:"Acceso No Autorizado"}),e.jsx("p",{children:"No tienes permisos para acceder a esta página."})]})}),e.jsx(Q,{path:"*",element:e.jsxs("div",{className:"container mt-5 text-center",children:[e.jsx("h2",{children:"Página No Encontrada"}),e.jsx("p",{children:"La página que buscas no existe."})]})})]})}),e.jsx(Rc,{})]})}function Fh(){return e.jsx(Oo,{children:e.jsx(zh,{})})}const $h=new au({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});Xr.createRoot(document.getElementById("root")).render(e.jsx(V.StrictMode,{children:e.jsx(ec,{theme:"dark",children:e.jsx(lu,{client:$h,children:e.jsxs(dc,{children:[e.jsx(Md,{children:e.jsx(Ic,{children:e.jsx(Fh,{})})}),e.jsx(Zr,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]})})})}));
