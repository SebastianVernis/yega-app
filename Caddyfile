yega.18.223.113.254.nip.io {
    root * /var/www/yega/frontend/dist
    file_server
    
    # Add CORP header for static assets
    header /assets/* Cross-Origin-Resource-Policy cross-origin
    header /images/* Cross-Origin-Resource-Policy cross-origin
    header /favicon.ico Cross-Origin-Resource-Policy cross-origin
    header /apple-touch-icon.png Cross-Origin-Resource-Policy cross-origin
    header /favicon-16x16.png Cross-Origin-Resource-Policy cross-origin
    header /favicon-32x32.png Cross-Origin-Resource-Policy cross-origin

    # Proxy API requests to the backend
    handle /api/* {
        reverse_proxy localhost:5000
    }

    # Fallback for SPA routing
    handle {
        try_files {path} /index.html
    }
}